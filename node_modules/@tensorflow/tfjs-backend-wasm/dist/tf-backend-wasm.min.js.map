{"version":3,"file":"tf-backend-wasm.min.js","sources":["../../../../tfjs-backend-wasm/src/kernels/types.ts","../../../../tfjs-backend-wasm/src/kernels/_FusedMatMul.ts","../../../../node_modules/tslib/tslib.es6.js","../../../../tfjs-backend-wasm/src/kernels/unary_kernel.ts","../../../../tfjs-backend-wasm/src/kernels/Abs.ts","../../../../tfjs-backend-wasm/src/kernels/binary_kernel.ts","../../../../tfjs-backend-wasm/src/kernels/Add.ts","../../../../tfjs-backend-wasm/src/kernels/AddN.ts","../../../../tfjs-backend-wasm/src/kernels/Identity.ts","../../../../tfjs-backend-wasm/src/kernels/Transpose.ts","../../../../tfjs-backend-wasm/src/kernels/All.ts","../../../../tfjs-backend-wasm/src/kernels/kernel_utils.ts","../../../../tfjs-backend-wasm/src/kernels/Any.ts","../../../../tfjs-backend-wasm/src/kernels/ArgMax.ts","../../../../tfjs-backend-wasm/src/kernels/AvgPool.ts","../../../../tfjs-backend-wasm/src/kernels/Reshape.ts","../../../../tfjs-backend-wasm/src/kernels/BatchMatMul.ts","../../../../../tfjs-backend-cpu/src/kernels/Slice.ts","../../../../../tfjs-backend-cpu/src/kernels/RaggedTensorToTensor_impl.ts","../../../../../tfjs-backend-cpu/src/kernels/StringNGrams_impl.ts","../../../../../tfjs-backend-cpu/src/kernels/StringSplit_impl.ts","../../../../tfjs-backend-wasm/src/kernels/Slice.ts","../../../../tfjs-backend-wasm/src/kernels/BatchToSpaceND.ts","../../../../tfjs-backend-wasm/src/kernels/Cast.ts","../../../../tfjs-backend-wasm/src/kernels/ClipByValue.ts","../../../../tfjs-backend-wasm/src/kernels/Ceil.ts","../../../../tfjs-backend-wasm/src/kernels/Concat.ts","../../../../../tfjs-backend-cpu/src/kernels/Concat_impl.ts","../../../../tfjs-backend-wasm/src/kernels/Conv2D.ts","../../../../tfjs-backend-wasm/src/kernels/Conv2DBackpropInput.ts","../../../../tfjs-backend-wasm/src/kernels/CropAndResize.ts","../../../../tfjs-backend-wasm/src/kernels/Cos.ts","../../../../tfjs-backend-wasm/src/kernels/Cosh.ts","../../../../tfjs-backend-wasm/src/kernels/Cumprod.ts","../../../../tfjs-backend-wasm/src/kernels/Cumsum.ts","../../../../tfjs-backend-wasm/src/kernels/DepthToSpace.ts","../../../../tfjs-backend-wasm/src/kernels/DepthwiseConv2dNative.ts","../../../../tfjs-backend-wasm/src/kernels/Elu.ts","../../../../tfjs-backend-wasm/src/kernels/Equal.ts","../../../../tfjs-backend-wasm/src/kernels/Exp.ts","../../../../tfjs-backend-wasm/src/kernels/ExpandDims.ts","../../../../tfjs-backend-wasm/src/kernels/Fill.ts","../../../../tfjs-backend-wasm/src/kernels/FlipLeftRight.ts","../../../../tfjs-backend-wasm/src/kernels/FusedBatchNorm.ts","../../../../tfjs-backend-wasm/src/kernels/Floor.ts","../../../../tfjs-backend-wasm/src/kernels/FloorDiv.ts","../../../../tfjs-backend-wasm/src/kernels/FusedConv2D.ts","../../../../tfjs-backend-wasm/src/kernels/FusedDepthwiseConv2D.ts","../../../../tfjs-backend-wasm/src/kernels/GatherNd.ts","../../../../tfjs-backend-wasm/src/kernels/GatherV2.ts","../../../../tfjs-backend-wasm/src/kernels/LeakyRelu.ts","../../../../tfjs-backend-wasm/src/kernels/Greater.ts","../../../../tfjs-backend-wasm/src/kernels/GreaterEqual.ts","../../../../tfjs-backend-wasm/src/kernels/Max.ts","../../../../tfjs-backend-wasm/src/kernels/Less.ts","../../../../tfjs-backend-wasm/src/kernels/LessEqual.ts","../../../../tfjs-backend-wasm/src/kernels/Log.ts","../../../../tfjs-backend-wasm/src/kernels/LogicalAnd.ts","../../../../tfjs-backend-wasm/src/kernels/LogicalNot.ts","../../../../tfjs-backend-wasm/src/kernels/LogicalOr.ts","../../../../tfjs-backend-wasm/src/kernels/LogicalXor.ts","../../../../tfjs-backend-wasm/src/kernels/MaxPool.ts","../../../../tfjs-backend-wasm/src/kernels/Maximum.ts","../../../../tfjs-backend-wasm/src/kernels/Mean.ts","../../../../tfjs-backend-wasm/src/kernels/Min.ts","../../../../tfjs-backend-wasm/src/kernels/MirrorPad.ts","../../../../tfjs-backend-wasm/src/kernels/Minimum.ts","../../../../tfjs-backend-wasm/src/kernels/NonMaxSuppressionV3.ts","../../../../tfjs-backend-wasm/src/kernels/Multiply.ts","../../../../tfjs-backend-wasm/src/kernels/Neg.ts","../../../../tfjs-backend-wasm/src/kernels/NonMaxSuppression_util.ts","../../../../tfjs-backend-wasm/src/kernels/NonMaxSuppressionV4.ts","../../../../tfjs-backend-wasm/src/kernels/NonMaxSuppressionV5.ts","../../../../tfjs-backend-wasm/src/kernels/OneHot.ts","../../../../tfjs-backend-wasm/src/kernels/NotEqual.ts","../../../../tfjs-backend-wasm/src/kernels/OnesLike.ts","../../../../tfjs-backend-wasm/src/kernels/Pack.ts","../../../../tfjs-backend-wasm/src/kernels/PadV2.ts","../../../../tfjs-backend-wasm/src/kernels/Prelu.ts","../../../../tfjs-backend-wasm/src/kernels/Pow.ts","../../../../tfjs-backend-wasm/src/kernels/Prod.ts","../../../../tfjs-backend-wasm/src/kernels/ResizeBilinear.ts","../../../../tfjs-backend-wasm/src/kernels/Range.ts","../../../../../tfjs-backend-cpu/src/kernels/Range_impl.ts","../../../../tfjs-backend-wasm/src/kernels/RealDiv.ts","../../../../tfjs-backend-wasm/src/kernels/Relu.ts","../../../../tfjs-backend-wasm/src/kernels/Relu6.ts","../../../../tfjs-backend-wasm/src/kernels/ResizeNearestNeighbor.ts","../../../../tfjs-backend-wasm/src/kernels/Reverse.ts","../../../../tfjs-backend-wasm/src/kernels/RotateWithOffset.ts","../../../../tfjs-backend-wasm/src/kernels/ScatterNd.ts","../../../../tfjs-backend-wasm/src/kernels/Round.ts","../../../../tfjs-backend-wasm/src/kernels/Rsqrt.ts","../../../../tfjs-backend-wasm/src/kernels/Select.ts","../../../../tfjs-backend-wasm/src/kernels/Sigmoid.ts","../../../../tfjs-backend-wasm/src/kernels/Softmax.ts","../../../../tfjs-backend-wasm/src/kernels/Sin.ts","../../../../tfjs-backend-wasm/src/kernels/SpaceToBatchND.ts","../../../../tfjs-backend-wasm/src/kernels/SparseFillEmptyRows.ts","../../../../tfjs-backend-wasm/src/kernels/SparseReshape.ts","../../../../tfjs-backend-wasm/src/kernels/SparseSegmentReduction.ts","../../../../tfjs-backend-wasm/src/kernels/SparseSegmentMean.ts","../../../../tfjs-backend-wasm/src/kernels/SparseSegmentSum.ts","../../../../tfjs-backend-wasm/src/kernels/SplitV.ts","../../../../tfjs-backend-wasm/src/kernels/Step.ts","../../../../tfjs-backend-wasm/src/kernels/Sqrt.ts","../../../../tfjs-backend-wasm/src/kernels/Square.ts","../../../../tfjs-backend-wasm/src/kernels/SquaredDifference.ts","../../../../tfjs-backend-wasm/src/kernels/StridedSlice.ts","../../../../tfjs-backend-wasm/src/kernels/StringNGrams.ts","../../../../tfjs-backend-wasm/src/kernels/StringSplit.ts","../../../../tfjs-backend-wasm/src/kernels/StringToHashBucketFast.ts","../../../../tfjs-backend-wasm/src/kernels/Sum.ts","../../../../../tfjs-backend-cpu/src/kernels/StringToHashBucketFast_impl.ts","../../../../tfjs-backend-wasm/src/kernels/Sub.ts","../../../../tfjs-backend-wasm/src/kernels/Tile.ts","../../../../tfjs-backend-wasm/src/kernels/Tan.ts","../../../../tfjs-backend-wasm/src/kernels/Tanh.ts","../../../../tfjs-backend-wasm/src/kernels/TopK.ts","../../../../tfjs-backend-wasm/src/kernels/Transform.ts","../../../../tfjs-backend-wasm/src/kernels/Unpack.ts","../../../../tfjs-backend-wasm/src/kernels/ZerosLike.ts","../../../../tfjs-backend-wasm/src/register_all_kernels.ts","../../../../tfjs-backend-wasm/src/flags_wasm.ts","wasm-out/tfjs-backend-wasm-threaded-simd.js","wasm-out/tfjs-backend-wasm.js","../../../../tfjs-backend-wasm/src/backend_wasm.ts","wasm-out/tfjs-backend-wasm-threaded-simd.worker.js","../../../../tfjs-backend-wasm/src/base.ts","../../../../tfjs-backend-wasm/src/version.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\n// This enum must align with the enum defined in cc/backend.h.\nexport enum CppDType {\n  float32 = 0,\n  int32 = 1,\n  bool = 2,\n  string = 3,\n  complex64 = 4\n}\n\n// Must match enum in cc/fusable_activations.h.\nexport enum FusableActivation {\n  linear = 0,\n  relu = 1,\n  relu6 = 2,\n  prelu = 3,\n  leakyrelu = 4,\n  sigmoid = 5,\n  elu = 6\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {_FusedMatMul, _FusedMatMulAttrs, _FusedMatMulInputs, broadcast_util, KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {FusableActivation} from './types';\n\nlet wasmFusedMatMul:\n    (aId: number, aShape: Uint8Array, aShapeSize: number, bId: number,\n     bShape: Uint8Array, bShapeSize: number, transposeA: boolean,\n     transposeB: boolean, activation: number, biasId: number,\n     preluActivationWeightsId: number, leakyreluAlpha: number, outId: number) =>\n        void;\n\nfunction setup(backend: BackendWasm) {\n  wasmFusedMatMul = backend.wasm.cwrap(_FusedMatMul, null /* void */, [\n    'number',  // a_id\n    'array',   // a_shape\n    'number',  // a_shape.length\n    'number',  // b_id\n    'array',   // b_shape\n    'number',  // b_shape.length\n    'number',  // transpose_a\n    'number',  // transpose_b\n    'number',  // activation\n    'number',  // biasId\n    'number',  // preluActivationWeightsId\n    'number',  // leakyreluAlpha\n    'number'   // out_id\n  ]);\n}\n\nfunction fusedBatchMatMul(args: {\n  inputs: _FusedMatMulInputs,\n  backend: BackendWasm,\n  attrs: _FusedMatMulAttrs\n}) {\n  const {inputs, backend, attrs} = args;\n  const {a, b, bias, preluActivationWeights} = inputs;\n\n  if (a.dtype !== 'float32' || b.dtype !== 'float32') {\n    throw new Error(\n        `_FusedMatMul for non non-float32 tensors not yet supported.`);\n  }\n\n  const {transposeA, transposeB, activation, leakyreluAlpha} = attrs;\n  const aId = backend.dataIdMap.get(a.dataId).id;\n  const bId = backend.dataIdMap.get(b.dataId).id;\n\n  let biasId = 0;\n  if (bias != null) {\n    const biasData = backend.dataIdMap.get(bias.dataId);\n    if (biasData.shape.length !== 1) {\n      throw new Error(\n          `_FusedMatMul only supports rank-1 bias but got ` +\n          `rank ${biasData.shape.length}.`);\n    }\n    biasId = biasData.id;\n  }\n  const preluActivationWeightsId = preluActivationWeights == null ?\n      0 :\n      backend.dataIdMap.get(preluActivationWeights.dataId).id;\n  const fusedActivation =\n      FusableActivation[activation as {} as keyof typeof FusableActivation];\n  if (fusedActivation == null) {\n    throw new Error(\n        `${activation} activation not yet supported for FusedConv2D ` +\n        `in the wasm backend.`);\n  }\n\n  const leftDim = transposeA ? a.shape[2] : a.shape[1];\n  const rightDim = transposeB ? b.shape[1] : b.shape[2];\n  const batchDims = broadcast_util.assertAndGetBroadcastShape(\n      a.shape.slice(0, -2), b.shape.slice(0, -2));\n\n  const out = backend.makeOutput([...batchDims, leftDim, rightDim], a.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const aShapeBytes = new Uint8Array(new Int32Array(a.shape).buffer);\n  const bShapeBytes = new Uint8Array(new Int32Array(b.shape).buffer);\n\n  wasmFusedMatMul(\n      aId, aShapeBytes, a.shape.length, bId, bShapeBytes, b.shape.length,\n      transposeA, transposeB, fusedActivation, biasId, preluActivationWeightsId,\n      leakyreluAlpha || 0, outId);\n\n  return out;\n}\n\nexport const _fusedMatMulConfig: KernelConfig = {\n  kernelName: _FusedMatMul,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: fusedBatchMatMul as {} as KernelFunc\n};\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {DataType, KernelConfig, TensorInfo, UnaryInputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nexport function createUnaryKernelConfig(\n    kernelName: string, outType?: DataType): KernelConfig {\n  let wasmFunc: (xId: number, dtype: number, outId: number) => void;\n\n  function setupFunc(backend: BackendWasm): void {\n    wasmFunc = backend.wasm.cwrap(kernelName, null /* void */, [\n      'number',  // x_id\n      'number',  // dtype\n      'number',  // out_id\n    ]);\n  }\n\n  function kernelFunc(args: {backend: BackendWasm, inputs: UnaryInputs}):\n      TensorInfo {\n    const {backend, inputs: {x}} = args;\n    const xId = backend.dataIdMap.get(x.dataId).id;\n    const out = backend.makeOutput(x.shape, outType || x.dtype);\n    const outId = backend.dataIdMap.get(out.dataId).id;\n\n    // Short-circuit zero-sized tensors.\n    if (util.sizeFromShape(out.shape) === 0) {\n      return out;\n    }\n\n    wasmFunc(xId, CppDType[x.dtype], outId);\n    return out;\n  }\n\n  return {kernelName, backendName: 'wasm', setupFunc, kernelFunc};\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Abs, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const absConfig: KernelConfig = createUnaryKernelConfig(Abs);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, BinaryInputs, DataType, KernelConfig, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nexport function createBinaryKernelConfig(\n    kernelName: string, supportsFullBroadcast: boolean,\n    dtype?: DataType): KernelConfig {\n  let wasmFunc:\n      (aId: number, aShape: Uint8Array, aShapeLen: number, bId: number,\n       bShape: Uint8Array, bShapeLen: number, dtype: number, outId: number) =>\n          void;\n\n  function setupFunc(backend: BackendWasm): void {\n    wasmFunc = backend.wasm.cwrap(kernelName, null /* void */, [\n      'number',  // a_id,\n      'array',   // a_shape\n      'number',  // a_shape.length\n      'number',  // b_id\n      'array',   // b_shape\n      'number',  // b_shape.length\n      'number',  // dtype\n      'number'   // out_id\n    ]);\n  }\n\n  function kernelFunc(args: {backend: BackendWasm, inputs: BinaryInputs}):\n      TensorInfo {\n    const {backend, inputs} = args;\n    const {a, b} = inputs;\n    const aId = backend.dataIdMap.get(a.dataId).id;\n    const bId = backend.dataIdMap.get(b.dataId).id;\n\n    const outputType = dtype != null ? dtype : a.dtype;\n    const newShape = backend_util.assertAndGetBroadcastShape(a.shape, b.shape);\n    const out = backend.makeOutput(newShape, outputType);\n\n    // Short-circuit zero-sized tensors.\n    if (util.sizeFromShape(newShape) === 0) {\n      return out;\n    }\n\n    const aShapeBytes = new Uint8Array(new Int32Array(a.shape).buffer);\n    const bShapeBytes = new Uint8Array(new Int32Array(b.shape).buffer);\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    const kernelFunc = () => wasmFunc(\n        aId, aShapeBytes, a.shape.length, bId, bShapeBytes, b.shape.length,\n        CppDType[a.dtype], outId);\n\n    kernelFunc();\n    return out;\n  }\n\n  return {kernelName, backendName: 'wasm', setupFunc, kernelFunc};\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Add, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = true;\n\nexport const addConfig: KernelConfig =\n    createBinaryKernelConfig(Add, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {AddN, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmFunc:\n    (inputIds: Uint8Array, inputIdsLen: number, dtype: number, outId: number) =>\n        void;\n\nfunction setupFunc(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(AddN, null /* void */, [\n    'array',   // input_ids\n    'number',  // input_ids.length\n    'number',  // dtype\n    'number',  // out_id\n  ]);\n}\n\nfunction addn(args: {inputs: TensorInfo[], backend: BackendWasm}) {\n  const {inputs, backend} = args;\n  const out = backend.makeOutput(inputs[0].shape, inputs[0].dtype);\n\n  // Short-circuit zero-sized tensors.\n  if (util.sizeFromShape(out.shape) === 0) {\n    return out;\n  }\n\n  const inputIds = inputs.map(x => backend.dataIdMap.get(x.dataId).id);\n  const inputIdsBytes = new Uint8Array(new Int32Array(inputIds).buffer);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmFunc(inputIdsBytes, inputIds.length, CppDType[out.dtype], outId);\n\n  return out;\n}\n\nexport const addNConfig: KernelConfig = {\n  kernelName: AddN,\n  backendName: 'wasm',\n  setupFunc,\n  kernelFunc: addn as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Identity, IdentityInputs, KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\nimport {TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nexport function identity(args: {inputs: IdentityInputs, backend: BackendWasm}):\n    TensorInfo {\n  const {inputs: {x}, backend} = args;\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const inVals = backend.typedArrayFromHeap(x);\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.set(inVals);\n  return out;\n}\n\nexport const identityConfig: KernelConfig = {\n  kernelName: Identity,\n  backendName: 'wasm',\n  kernelFunc: identity as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, TensorInfo, Transpose, TransposeAttrs, TransposeInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {identity} from './Identity';\nimport {CppDType} from './types';\n\nlet wasmTranspose: (\n    xId: number, xShape: Uint8Array, xShapeLength: number, dtype: CppDType,\n    outId: number, perm: Uint8Array, permLength: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmTranspose = backend.wasm.cwrap(Transpose, null /* void */, [\n    'number',  // xId\n    'array',   // x.shape\n    'number',  // x.shape.length\n    'number',  // dtype\n    'number',  // outId\n    'array',   // perm\n    'number',  // perm.length\n  ]);\n}\n\nexport function transpose(\n    args:\n        {inputs: TransposeInputs, backend: BackendWasm, attrs: TransposeAttrs}):\n    TensorInfo {\n  const {inputs, backend, attrs} = args;\n  // Reduce any dimensions with size one. Lower-rank transpose kernel performs\n  // better due to simpler memory access pattern.\n  const [reducedShape, perm] = removeOneSizeDims(inputs.x.shape, attrs.perm);\n\n  let permIsNoOp = true;\n  for (let i = 0; i < perm.length; i++) {\n    if (perm[i] !== i) {\n      permIsNoOp = false;\n    }\n  }\n  const outShape = computeOutShape(inputs.x.shape, attrs.perm);\n  const x = {\n    dataId: inputs.x.dataId,\n    shape: reducedShape,\n    dtype: inputs.x.dtype\n  };\n\n  if (permIsNoOp) {\n    const cloned = identity({inputs, backend});\n    cloned.shape = outShape;\n    return cloned;\n  }\n\n  const out = backend.makeOutput(outShape, x.dtype);\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const permBytes = new Uint8Array(new Int32Array(perm).buffer);\n  const xShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n\n  wasmTranspose(\n      xId, xShapeBytes, x.shape.length, CppDType[x.dtype], outId, permBytes,\n      perm.length);\n  return out;\n}\n\nfunction computeOutShape(inShape: number[], perm: number[]): number[] {\n  const outShape = new Array(inShape.length);\n  for (let i = 0; i < outShape.length; i++) {\n    outShape[i] = inShape[perm[i]];\n  }\n  return outShape;\n}\n\nfunction removeOneSizeDims(\n    shape: number[], perm: number[]): [number[], number[]] {\n  const newShape: number[] = [];\n  const newPerm: number[] = [];\n  for (let i = 0; i < shape.length; ++i) {\n    if (shape[i] !== 1) {\n      newShape.push(shape[i]);\n    }\n    if (shape[perm[i]] !== 1) {\n      newPerm.push(perm[i]);\n    }\n  }\n  for (let i = 0; i < newPerm.length; ++i) {\n    let minValIdx = -1;\n    for (let j = 0; j < newPerm.length; ++j) {\n      if (newPerm[j] >= i &&\n          (minValIdx === -1 || newPerm[minValIdx] > newPerm[j])) {\n        minValIdx = j;\n      }\n    }\n    newPerm[minValIdx] = i;\n  }\n  return [newShape, newPerm];\n}\n\nexport const transposeConfig: KernelConfig = {\n  kernelName: Transpose,\n  backendName: 'wasm',\n  kernelFunc: transpose as {} as KernelFunc,\n  setupFunc: setup,\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {All, AllAttrs, AllInputs, backend_util, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\n\nlet wasmAll: (xId: number, reduceSize: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmAll = backend.wasm.cwrap(All, null /*void*/, ['number, number, number']);\n}\n\nfunction all(args: {backend: BackendWasm, inputs: AllInputs, attrs: AllAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    input = transposed;\n    inputId = transposedId;\n  }\n\n  const inputRank = input.shape.length;\n  backend_util.assertAxesAreInnerMostDims('all', axes, inputRank);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, axes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, x.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmAll(inputId, reduceSize, outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const allConfig: KernelConfig = {\n  kernelName: All,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: all as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, TensorInfo, util} from '@tensorflow/tfjs-core';\nimport {BackendWasm} from '../backend_wasm';\nimport {transpose} from './Transpose';\n\n/**\n * Compute permutation axes and do a transpose if necessary.\n *\n * Used by reduction ops.\n * @param x input TensorInfo\n * @param axis reduction axes\n * @param backend wasm backend instance\n */\nexport function permuteAxesAndTranspose(\n    x: TensorInfo, axis: number|number[], backend: BackendWasm): {\n  transposed: TensorInfo|null,\n  axes: number[],\n  originalAxes: number[],\n  inputWasTransposed: boolean\n} {\n  const xShape = x.shape;\n  const xRank = x.shape.length;\n\n  const originalAxes = util.parseAxisParam(axis, xShape);\n  let axes = originalAxes;\n  const permutedAxes = backend_util.getAxesPermutation(axes, xRank);\n  let xTransposed = null;\n  let inputWasTransposed = false;\n  if (permutedAxes != null) {\n    const newShape: number[] = new Array(xRank);\n    for (let i = 0; i < newShape.length; i++) {\n      newShape[i] = xShape[permutedAxes[i]];\n    }\n\n    axes = backend_util.getInnerMostAxes(axes.length, xRank);\n    xTransposed =\n        transpose({inputs: {x}, attrs: {perm: permutedAxes}, backend});\n\n    const xId = backend.dataIdMap.get(x.dataId).id;\n    const transposedId = backend.dataIdMap.get(xTransposed.dataId).id;\n    if (transposedId !== xId) {\n      inputWasTransposed = true;\n    }\n  }\n\n  return {transposed: xTransposed, originalAxes, axes, inputWasTransposed};\n}\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Any, AnyAttrs, AnyInputs, backend_util, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\n\nlet wasmAny: (xId: number, reduceSize: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmAny = backend.wasm.cwrap(Any, null /*void*/, ['number, number, number']);\n}\n\nfunction any(args: {backend: BackendWasm, inputs: AnyInputs, attrs: AnyAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    input = transposed;\n    inputId = transposedId;\n  }\n\n  const inputRank = input.shape.length;\n  backend_util.assertAxesAreInnerMostDims('any', axes, inputRank);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, axes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, x.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmAny(inputId, reduceSize, outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const anyConfig: KernelConfig = {\n  kernelName: Any,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: any as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ArgMax, ArgMaxAttrs, ArgMaxInputs, KernelConfig, KernelFunc, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\nimport {CppDType} from './types';\n\nlet wasmFunc: (\n    xId: number, dtype: number, outerSize: number, innerSize: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmFunc = backend.wasm.cwrap(ArgMax, null /* void */, [\n    'number',  // x_id\n    'number',  // dtype\n    'number',  // outer_size\n    'number',  // inner_size\n    'number'   // out_id\n  ]);\n}\n\nfunction argmax(\n    args: {inputs: ArgMaxInputs, backend: BackendWasm, attrs: ArgMaxAttrs}) {\n  const {backend, inputs, attrs} = args;\n  const {axis} = attrs as {} as ArgMaxAttrs;\n  const {x} = inputs as {} as ArgMaxInputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    if (transposedId !== xId) {\n      // transpose was not a no-op. We will need to dispose of this\n      // once we are done.\n      input = transposed;\n      inputId = transposedId;\n    }\n  }\n\n  const outShape = input.shape.slice(0, -1);\n  const out = backend.makeOutput(outShape, 'int32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const outerSize = util.sizeFromShape(out.shape);\n  const innerSize = input.shape[axes[0]];\n  wasmFunc(inputId, CppDType[input.dtype], outerSize, innerSize, outId);\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  return out;\n}\n\nexport const argMaxConfig: KernelConfig = {\n  kernelName: ArgMax,\n  backendName: 'wasm',\n  kernelFunc: argmax as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {AvgPool, AvgPoolAttrs, AvgPoolInputs, backend_util, KernelConfig, KernelFunc, Tensor4D} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmAvgPool: (\n    xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n    filterHeight: number, filterWidth: number, padTop: number, padRight: number,\n    padBottom: number, padLeft: number, strideHeight: number,\n    strideWidth: number, channels: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmAvgPool = backend.wasm.cwrap(AvgPool, null /* void */, [\n    'number',  // xId\n    'number',  // batchSize\n    'number',  // inputHeight\n    'number',  // inputWidth\n    'number',  // filterHeight\n    'number',  // filterWidth\n    'number',  // padTop\n    'number',  // padRight\n    'number',  // padBottom\n    'number',  // padLeft\n    'number',  // strideHeight\n    'number',  // strideWidth\n    'number',  // channels\n    'number',  // outId\n  ]);\n}\n\nfunction avgPool(\n    args: {inputs: AvgPoolInputs, backend: BackendWasm, attrs: AvgPoolAttrs}) {\n  const {inputs, attrs, backend} = args;\n\n  const x = inputs.x as Tensor4D;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n\n  const {filterSize, strides, pad, dimRoundingMode} = attrs;\n  const convInfo = backend_util.computePool2DInfo(\n      x.shape, filterSize, strides, 1 /* dilations */, pad, dimRoundingMode);\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const channels = convInfo.inChannels;\n\n  if (convInfo.dataFormat !== 'channelsLast') {\n    throw new Error(\n        `wasm backend does not support dataFormat:'` +\n        `${convInfo.dataFormat}'. Please use 'channelsLast'.`);\n  }\n\n  if (convInfo.dilationWidth !== 1 || convInfo.dilationHeight !== 1) {\n    throw new Error(\n        `was backend only supports average pooling with dilation = [1, 1], ` +\n        `got [${convInfo.dilationHeight}, ${convInfo.dilationWidth}].`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  wasmAvgPool(\n      xId, x.shape[0], x.shape[1], x.shape[2], filterHeight, filterWidth,\n      padTop, padRight, padBottom, padLeft, strideHeight, strideWidth, channels,\n      outId);\n  return out;\n}\n\nexport const avgPoolConfig: KernelConfig = {\n  kernelName: AvgPool,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: avgPool as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Reshape, ReshapeAttrs, ReshapeInputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nexport function reshape(\n    args: {inputs: ReshapeInputs, attrs: ReshapeAttrs, backend: BackendWasm}) {\n  const {inputs, attrs} = args;\n  const {x} = inputs;\n  const {shape} = attrs;\n\n  const xSize = util.sizeFromShape(x.shape);\n  const $shape = util.inferFromImplicitShape(shape, xSize);\n\n  util.assert(\n      xSize === util.sizeFromShape($shape),\n      () => `new shape: ${$shape}, old shape: ${x.shape}. New shape and old ` +\n          `shape must have the same number of elements.`);\n\n  // Backend needs to track refCount for the dataId for reshape op\n  args.backend.incRef(x.dataId);\n  return {dataId: x.dataId, shape: $shape, dtype: x.dtype};\n}\n\nexport const reshapeConfig: KernelConfig = {\n  kernelName: Reshape,\n  backendName: 'wasm',\n  kernelFunc: reshape as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {BatchMatMul, BatchMatMulAttrs, BatchMatMulInputs, broadcast_util, KernelConfig, KernelFunc, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {reshape} from './Reshape';\n\nlet wasmBatchMatMul: (\n    aId: number, aShape: Uint8Array, aShapeSize: number, bId: number,\n    bShape: Uint8Array, bShapeSize: number, transposeA: boolean,\n    transposeB: boolean, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmBatchMatMul = backend.wasm.cwrap(BatchMatMul, null /* void */, [\n    'number',  // a_id\n    'array',   // a_shape\n    'number',  // a_shape.length\n    'number',  // b_id\n    'array',   // b_shape\n    'number',  // b_shape.length\n    'number',  // transpose_a\n    'number',  // transpose_b\n    'number'   // out_id\n  ]);\n}\n\nfunction batchMatMul(args: {\n  inputs: BatchMatMulInputs,\n  backend: BackendWasm,\n  attrs: BatchMatMulAttrs\n}) {\n  const {inputs, backend, attrs} = args;\n  const {a, b} = inputs;\n  const {transposeA, transposeB} = attrs;\n\n  if (a.dtype !== 'float32' || b.dtype !== 'float32') {\n    throw new Error(\n        `BatchMatMul for non non-float32 tensors not yet supported.`);\n  }\n\n  const aRank = a.shape.length;\n  const bRank = b.shape.length;\n\n  const innerShapeA = transposeA ? a.shape[aRank - 2] : a.shape[aRank - 1];\n  const innerShapeB = transposeB ? b.shape[bRank - 1] : b.shape[bRank - 2];\n\n  const outerShapeA = transposeA ? a.shape[aRank - 1] : a.shape[aRank - 2];\n  const outerShapeB = transposeB ? b.shape[bRank - 2] : b.shape[bRank - 1];\n\n  const outerDimsA = a.shape.slice(0, -2);\n  const outerDimsB = b.shape.slice(0, -2);\n\n  const batchDimA = util.sizeFromShape(outerDimsA);\n  const batchDimB = util.sizeFromShape(outerDimsB);\n\n  const outShapeOuterDims = broadcast_util.assertAndGetBroadcastShape(\n      a.shape.slice(0, -2), b.shape.slice(0, -2));\n  const outShape = outShapeOuterDims.concat([outerShapeA, outerShapeB]);\n\n  util.assert(\n      innerShapeA === innerShapeB,\n      () => `Error in matMul: inner shapes (${innerShapeA}) and (` +\n          `${innerShapeB}) of Tensors with shapes ${a.shape} and ` +\n          `${b.shape} and transposeA=${transposeA}` +\n          ` and transposeB=${transposeB} must match.`);\n\n  const a3dShape = transposeA ? [batchDimA, innerShapeA, outerShapeA] :\n                                [batchDimA, outerShapeA, innerShapeA];\n  const b3dShape = transposeB ? [batchDimB, outerShapeB, innerShapeB] :\n                                [batchDimB, innerShapeB, outerShapeB];\n\n  // The rest of the implementation is designed to operate on rank-3 tensors\n  const a3d = reshape({inputs: {x: a}, backend, attrs: {shape: a3dShape}});\n  const b3d = reshape({inputs: {x: b}, backend, attrs: {shape: b3dShape}});\n\n  const a3dId = backend.dataIdMap.get(a3d.dataId).id;\n  const b3dId = backend.dataIdMap.get(b3d.dataId).id;\n\n  const leftDim = transposeA ? a3d.shape[2] : a3d.shape[1];\n  const rightDim = transposeB ? b3d.shape[1] : b3d.shape[2];\n  const batchDim = Math.max(batchDimA, batchDimB);\n\n  const out = backend.makeOutput([batchDim, leftDim, rightDim], a3d.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const aShapeBytes = new Uint8Array(new Int32Array(a3d.shape).buffer);\n  const bShapeBytes = new Uint8Array(new Int32Array(b3d.shape).buffer);\n\n  wasmBatchMatMul(\n      a3dId, aShapeBytes, a3d.shape.length, b3dId, bShapeBytes,\n      b3d.shape.length, transposeA, transposeB, outId);\n\n  backend.disposeData(a3d.dataId);\n  backend.disposeData(b3d.dataId);\n\n  out.shape = outShape;\n  return out;\n}\n\nexport const batchMatMulConfig: KernelConfig = {\n  kernelName: BatchMatMul,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: batchMatMul as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, BackendValues, buffer, DataType, KernelConfig, KernelFunc, Slice, slice_util, SliceAttrs, SliceInputs, TensorInfo, TypedArray, util} from '@tensorflow/tfjs-core';\n\nimport {MathBackendCPU} from '../backend_cpu';\nimport {assertNotComplex} from '../cpu_util';\n\nexport function sliceImpl(\n    vals: BackendValues, begin: number[], size: number[], shape: number[],\n    dtype: DataType): BackendValues {\n  const isContinous = slice_util.isSliceContinous(shape, begin, size);\n  const length = util.sizeFromShape(size);\n  const xStrides = util.computeStrides(shape);\n\n  if (isContinous) {\n    const flatOffset = slice_util.computeFlatOffset(begin, xStrides);\n\n    if (dtype === 'string') {\n      return (vals as Uint8Array[]).slice(flatOffset, flatOffset + length);\n    }\n\n    return (vals as TypedArray).subarray(flatOffset, flatOffset + length);\n  }\n\n  const decodedData = dtype === 'string' ?\n      backend_util.fromUint8ToStringArray(vals as Uint8Array[]) :\n      vals as TypedArray;\n\n  const inBuf = buffer(shape, dtype, decodedData);\n  const outBuf = buffer(size, dtype);\n  for (let i = 0; i < outBuf.size; ++i) {\n    const outLoc = outBuf.indexToLoc(i);\n    const inLoc = outLoc.map((idx: number, j) => idx + begin[j]);\n    outBuf.set(inBuf.get(...inLoc), ...outLoc);\n  }\n\n  if (dtype === 'string') {\n    return backend_util.fromStringArrayToUint8(outBuf.values as string[]);\n  }\n  return outBuf.values as TypedArray;\n}\n\nexport function slice(\n    args: {inputs: SliceInputs, backend: MathBackendCPU, attrs: SliceAttrs}):\n    TensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {begin, size} = attrs;\n\n  assertNotComplex(x, 'slice');\n\n  const [$begin, $size] = slice_util.parseSliceParams(x, begin, size);\n  slice_util.assertParamsValid(x, $begin, $size);\n\n  const vals = backend.data.get(x.dataId).values;\n  const outVals = sliceImpl(vals, $begin, $size, x.shape, x.dtype);\n  return backend.makeTensorInfo($size, x.dtype, outVals);\n}\n\nexport const sliceConfig: KernelConfig = {\n  kernelName: Slice,\n  backendName: 'cpu',\n  kernelFunc: slice as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, broadcastTo, DataType, reshape, tidy, TypedArray, util} from '@tensorflow/tfjs-core';\n\nimport RowPartitionType = backend_util.RowPartitionType;\n// Based on\n// https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/ragged_tensor_to_tensor_op.cc\nclass RaggedTensorToTensorOp {\n  private readonly rowPartitionTypes: RowPartitionType[];\n  private readonly raggedRank: number;\n  constructor(\n      private shape: TypedArray, private shapeShape: number[],\n      private values: TypedArray, private valuesShape: number[],\n      private valuesDType: DataType, private defaultValue: TypedArray,\n      private defaultValueShape: number[],\n      private readonly rowPartitionValues: TypedArray[],\n      private readonly rowPartitionValuesShapes: number[][],\n      rowPartitionTypeStrings: string[]) {\n    this.rowPartitionTypes =\n        backend_util.getRowPartitionTypesHelper(rowPartitionTypeStrings);\n    this.raggedRank = backend_util.getRaggedRank(this.rowPartitionTypes);\n  }\n\n  private getRowPartitionTypeByDimension(dimension: number) {\n    if (this.rowPartitionTypes[0] === RowPartitionType.FIRST_DIM_SIZE) {\n      return this.rowPartitionTypes[dimension + 1];\n    } else {\n      return this.rowPartitionTypes[dimension];\n    }\n  }\n\n  // Returns the relationship between dimension and dimension + 1.\n  private getRowPartitionTensor(dimension: number) {\n    if (this.rowPartitionTypes[0] === RowPartitionType.FIRST_DIM_SIZE) {\n      return this.rowPartitionValues[dimension + 1];\n    } else {\n      return this.rowPartitionValues[dimension];\n    }\n  }\n\n  private getMaxWidth(dimension: number) {\n    const rowPartitionTensor = this.getRowPartitionTensor(dimension - 1);\n    switch (this.getRowPartitionTypeByDimension(dimension - 1)) {\n      case RowPartitionType.VALUE_ROWIDS:\n        return RaggedTensorToTensorOp.getMaxWidthValueRowID(rowPartitionTensor);\n      case RowPartitionType.ROW_SPLITS:\n        return RaggedTensorToTensorOp.getMaxWidthRowSplit(rowPartitionTensor);\n      default:\n        throw new Error(`Cannot handle partition type ${\n            RowPartitionType[this.getRowPartitionTypeByDimension(\n                dimension - 1)]}`);\n    }\n  }\n\n  static getMaxWidthRowSplit(rowSplit: TypedArray) {\n    const tensorLength = rowSplit.length;\n    if (tensorLength === 0 || tensorLength === 1) {\n      return 0;\n    }\n    let maxWidth = 0;\n    for (let i = 0; i < tensorLength - 1; ++i) {\n      const currentWidth = rowSplit[i + 1] - rowSplit[i];\n      if (currentWidth > maxWidth) {\n        maxWidth = currentWidth;\n      }\n    }\n    return maxWidth;\n  }\n\n  static getMaxWidthValueRowID(valueRowIds: TypedArray) {\n    const indexLength = valueRowIds.length;\n    if (indexLength === 0) {\n      return 0;\n    }\n    let firstEqualIndex = 0;\n    let firstEqualIndexValue = valueRowIds[0];\n    let maxWidth = 0;\n    for (let i = 1; i < indexLength; ++i) {\n      const value = valueRowIds[i];\n      if (value !== firstEqualIndexValue) {\n        firstEqualIndexValue = value;\n        maxWidth = Math.max(i - firstEqualIndex, maxWidth);\n        firstEqualIndex = i;\n      }\n    }\n    return Math.max(indexLength - firstEqualIndex, maxWidth);\n  }\n\n  private tensorShapeFromTensor(\n      t: TypedArray, tShape: number[], isPartial = true) {\n    if (tShape.length === 0) {\n      if (t[0] === -1) {\n        return [];\n      }\n      throw new Error(\n          `The only valid scalar shape tensor is the fully unknown shape specified as -1.`);\n    }\n    // MakePartialShape/MakeShapeHelper.\n    return makeShape(t, isPartial);\n  }\n\n  private calculateOutputSize(firstDim: number) {\n    const valueShape = this.valuesShape;\n    const defaultValueShape = this.defaultValueShape;\n\n    backend_util.validateDefaultValueShape(defaultValueShape, valueShape);\n\n    const shape = this.tensorShapeFromTensor(this.shape, this.shapeShape);\n    const outputShape = backend_util.combineRaggedTensorToTensorShapes(\n        this.raggedRank, shape, valueShape);\n\n    const result = outputShape;\n\n    if (result[0] < 0) {\n      result[0] = firstDim;\n    }\n    for (let i = 1; i <= this.raggedRank; ++i) {\n      if (result[i] < 0) {\n        result[i] = this.getMaxWidth(i);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * The outputIndex represents the index in the output tensor\n   * where the first element of a particular dimension would be written.\n   * If it is -1, it indicates that the index is out of scope.\n   * Example, given firstDimension = 10, firstDimensionOutput = 6,\n   * and outputIndexMultiplier = 100:\n   * result = [0 100 200 300 400 500 -1 -1 -1 -1]\n   * If firstDimensionOutput = 11 instead, then:\n   * result = [0 100 200 300 400 500 600 700 800 900]\n   */\n  private calculateFirstParentOutputIndex(\n      firstDimension: number, outputIndexMultiplier: number,\n      firstDimensionOutput: number) {\n    const minDimension = Math.min(firstDimension, firstDimensionOutput);\n    const result: number[] = [];\n    let currentOutputIndex = 0;\n    for (let i = 0; i < minDimension;\n         ++i, currentOutputIndex += outputIndexMultiplier) {\n      result.push(currentOutputIndex);\n    }\n    for (let i = minDimension; i < firstDimension; ++i) {\n      result.push(-1);\n    }\n    util.assert(\n        result.length === firstDimension,\n        () => 'Final length of result must be equal to firstDimension.');\n\n    return result;\n  }\n\n  private calculateOutputIndexRowSplit(\n      rowSplit: TypedArray, parentOutputIndex: number[],\n      outputIndexMultiplier: number, outputSize: number) {\n    const rowSplitSize = rowSplit.length;\n    const result: number[] = [];\n    for (let i = 0; i < rowSplitSize - 1; ++i) {\n      const rowLength = rowSplit[i + 1] - rowSplit[i];\n      let realLength = Math.min(outputSize, rowLength);\n      let parentOutputIndexCurrent = parentOutputIndex[i];\n\n      if (parentOutputIndexCurrent === -1) {\n        realLength = 0;\n      }\n      for (let j = 0; j < realLength; ++j) {\n        result.push(parentOutputIndexCurrent);\n        parentOutputIndexCurrent += outputIndexMultiplier;\n      }\n      for (let j = 0; j < rowLength - realLength; ++j) {\n        result.push(-1);\n      }\n    }\n    if (rowSplitSize > 0 && result.length !== rowSplit[rowSplitSize - 1]) {\n      throw new Error('Invalid row split size.');\n    }\n\n    return result;\n  }\n\n  // Calculate the output index of the first element of a list.\n  // The parentOutputIndex is the same computation for the previous list.\n  // -1 indicates an element or list that is out of range.\n  // The outputIndexMultiplier is the number of output indices one moves\n  // forward for each column.\n  // E.g., given:\n  // valueRowIds:[0 1 2 2 2 3 5 5 6]\n  // parentOutputIndex:[1000 1100 2000 2100 -1 3000 4000]\n  // outputIndexMultiplier: 10\n  // outputSize: 2\n  // You get:\n  // result = [1000 1100 2000 2010 -1 2100 -1 -1 3000]\n  // result[0] = parentOutputIndex[valueRowIds[0]]\n  // result[1] = parentOutputIndex[valueRowIds[1]]\n  // result[2] = parentOutputIndex[valueRowIds[2]]\n  // result[3] = parentOutputIndex[valueRowIds[2] + 10]\n  // result[4] = -1 because it is the third element the size is 2.\n  // result[5] = parentOutputIndex[valueRowIds[3]]\n  // result[6] = -1 because parentOutputIndex[valueRowIds[6]] == -1\n  // result[7] = -1 because parentOutputIndex[valueRowIds[6]] == -1\n  // result[8] = parentOutputIndex[valueRowIds[7]]\n  private calculateOutputIndexValueRowID(\n      valueRowIds: TypedArray, parentOutputIndex: number[],\n      outputIndexMultiplier: number, outputSize: number) {\n    const indexSize = valueRowIds.length;\n    const result: number[] = [];\n    if (indexSize === 0) {\n      return [];\n    }\n\n    let currentOutputColumn = 0;\n    let currentValueRowId = valueRowIds[0];\n\n    if (currentValueRowId >= parentOutputIndex.length) {\n      throw new Error(\n          `Got currentValueRowId=${currentValueRowId}, which is not less than ${\n              parentOutputIndex.length}`);\n    }\n\n    let currentOutputIndex = parentOutputIndex[currentValueRowId];\n    result.push(currentOutputIndex);\n    for (let i = 1; i < indexSize; ++i) {\n      const nextValueRowId = valueRowIds[i];\n      if (nextValueRowId === currentValueRowId) {\n        if (currentOutputIndex >= 0) {\n          ++currentOutputColumn;\n          if (currentOutputColumn < outputSize) {\n            currentOutputIndex += outputIndexMultiplier;\n          } else {\n            currentOutputIndex = -1;\n          }\n        }\n      } else {\n        currentOutputColumn = 0;\n        currentValueRowId = nextValueRowId;\n\n        if (nextValueRowId >= parentOutputIndex.length) {\n          throw new Error(\n              `Got nextValueRowId=${nextValueRowId} which is not less than ${\n                  parentOutputIndex.length}`);\n        }\n\n        currentOutputIndex = parentOutputIndex[nextValueRowId];\n      }\n      result.push(currentOutputIndex);\n    }\n\n    if (result.length !== valueRowIds.length) {\n      throw new Error('Invalid row ids.');\n    }\n\n    return result;\n  }\n\n  private calculateOutputIndex(\n      dimension: number, parentOutputIndex: number[],\n      outputIndexMultiplier: number, outputSize: number) {\n    const rowPartitionTensor = this.getRowPartitionTensor(dimension);\n    const partitionType = this.getRowPartitionTypeByDimension(dimension);\n    switch (partitionType) {\n      case RowPartitionType.VALUE_ROWIDS:\n        return this.calculateOutputIndexValueRowID(\n            rowPartitionTensor, parentOutputIndex, outputIndexMultiplier,\n            outputSize);\n      case RowPartitionType.ROW_SPLITS:\n        if (rowPartitionTensor.length - 1 > parentOutputIndex.length) {\n          throw new Error(`Row partition size is greater than output size: ${\n              rowPartitionTensor.length - 1} > ${parentOutputIndex.length}`);\n        }\n        return this.calculateOutputIndexRowSplit(\n            rowPartitionTensor, parentOutputIndex, outputIndexMultiplier,\n            outputSize);\n      default:\n        throw new Error(\n            `Unsupported partition type: ${RowPartitionType[partitionType]}`);\n    }\n  }\n\n  private getFirstDimensionSize() {\n    const firstPartitionTensor = this.rowPartitionValues[0];\n    if (this.rowPartitionTypes.length === 0) {\n      throw new Error('No row_partition_types given.');\n    }\n    const firstPartitionType = this.rowPartitionTypes[0];\n    switch (firstPartitionType) {\n      case RowPartitionType.FIRST_DIM_SIZE:\n        return firstPartitionTensor[0];\n      case RowPartitionType.VALUE_ROWIDS:\n        throw new Error('Cannot handle VALUE_ROWIDS in first dimension.');\n      case RowPartitionType.ROW_SPLITS:\n        return this.rowPartitionValuesShapes[0][0] - 1;\n      default:\n        throw new Error(\n            `Cannot handle type ${RowPartitionType[firstPartitionType]}`);\n    }\n  }\n\n  compute(): [number[], TypedArray] {\n    const firstPartitionTensor = this.rowPartitionValues[0];\n    if (firstPartitionTensor.length <= 0) {\n      throw new Error(\n          'Invalid first partition input. ' +\n          'Tensor requires at least one element.');\n    }\n    const firstDimension = this.getFirstDimensionSize();\n    const outputSize = this.calculateOutputSize(firstDimension);\n    const multiplier: number[] = new Array(this.raggedRank + 1);\n\n    multiplier[multiplier.length - 1] = 1;\n    for (let i = multiplier.length - 2; i >= 0; --i) {\n      multiplier[i] = multiplier[i + 1] * outputSize[i + 1];\n    }\n    // Full size of the tensor.\n    const outputShape: number[] = makeShape(outputSize, false);\n    const outputTensor =\n        util.getArrayFromDType(\n            this.valuesDType, util.sizeFromShape(outputShape)) as TypedArray;\n\n    const fullSize = multiplier[0] * outputSize[0];\n    if (fullSize > 0) {\n      let outputIndex = this.calculateFirstParentOutputIndex(\n          firstDimension, multiplier[0], outputSize[0]);\n      for (let i = 1; i <= this.raggedRank; ++i) {\n        const newOutputIndex = this.calculateOutputIndex(\n            i - 1, outputIndex, multiplier[i], outputSize[i]);\n        outputIndex = newOutputIndex;\n      }\n\n      this.setOutput(this.raggedRank, outputIndex, outputTensor, outputShape);\n    }\n\n    return [outputShape, outputTensor];\n  }\n  setOutput(\n      raggedRank: number, outputIndex: number[], outputTensor: TypedArray,\n      outputShape: number[]) {\n    if (outputTensor.length === 0) {\n      return;\n    }\n\n    const valuesBase = this.values;\n    const outputBase = outputTensor;\n\n    let elementShape = outputShape.slice();\n    elementShape = elementShape.slice(raggedRank + 1);\n    const valueElementSize = util.sizeFromShape(elementShape);\n    const outputIndexSize = outputIndex.length;\n\n    // Broadcast the default value to value_element_size.  (We can skip this\n    // if defaultValueTensor.size == 1, since we use fill when that's true.)\n    let defaultValue = this.defaultValue;\n    if (defaultValue.length !== valueElementSize && defaultValue.length !== 1) {\n      const srcShape = this.defaultValueShape;\n      tidy(() => {\n        const defaultValueTensor = reshape(defaultValue, srcShape);\n        const bCastDefault = broadcastTo(defaultValueTensor, elementShape);\n        defaultValue = bCastDefault.dataSync();\n      });\n    }\n\n    // Loop through the outputIndex array, finding contiguous regions that\n    // should be copied.  Once we find the end of a contiguous region, copy it\n    // and add any necessary padding (with defaultValue).\n    let srcStart = 0;  // Start of contiguous region (in values)\n    let dstStart = 0;  // Destination for contiguous region (in output)\n    let dstEnd = 0;    // Destination for contiguous region (in output)\n    for (let srcI = 0; srcI <= outputIndexSize; ++srcI) {\n      // dstI is the destination where the value at srcI should be copied.\n      let dstI = srcI < outputIndexSize ? outputIndex[srcI] : -1;\n\n      // If we're still in a contiguous region, then update dstEnd go to the\n      // next srcI.\n      if (dstI === dstEnd) {\n        ++dstEnd;\n        continue;\n      }\n\n      // We found the end of contiguous region.  This can be because we found\n      // a gap (dstI > dstEnd), or a source value that shouldn't be copied\n      // because it's out-of-bounds (dstI == -1), or the end of the tensor\n      // (dstI === -1).\n      if (dstStart < dstEnd) {\n        // Copy the contiguous region.\n        const src = valuesBase.subarray(srcStart * valueElementSize);\n        const dst = outputBase.subarray(dstStart * valueElementSize);\n        const nVals = (dstEnd - dstStart) * valueElementSize;\n        copyArray(dst, src, nVals);\n      }\n\n      // Add any necessary padding (w/ defaultValue).\n      if (srcI >= outputIndexSize) {\n        // We reached the end of values: pad to the end of output.\n        const outputSize = outputTensor.length;\n        dstI = Math.floor(outputSize / valueElementSize);\n      }\n      if (dstI > dstEnd) {\n        if (this.defaultValue.length === 1) {\n          outputBase\n              .subarray(dstEnd * valueElementSize, dstI * valueElementSize)\n              .fill(this.defaultValue[0]);\n          dstEnd = dstI;\n        } else {\n          while (dstI > dstEnd) {\n            const dst = outputBase.slice(dstEnd * valueElementSize);\n            copyArray(dst, defaultValue, valueElementSize);\n            ++dstEnd;\n          }\n        }\n      }\n\n      // Update indices.\n      if (dstI < 0) {\n        // srcI should be skipped -- leave it out of the contiguous region.\n        srcStart = srcI + 1;\n        dstStart = dstEnd;\n      } else {\n        // srcI should be copied -- include it in the contiguous region.\n        srcStart = srcI;\n        dstStart = dstEnd;\n        dstEnd = dstStart + 1;\n      }\n    }\n  }\n}\n\nfunction copyArray(dst: TypedArray, src: TypedArray, size: number) {\n  for (let i = 0; i < size; i++) {\n    dst[i] = src[i];\n  }\n}\n\nfunction makeShape(shape: number[]|TypedArray, isPartial: boolean) {\n  const out: number[] = [];\n  for (let dim of shape) {\n    if (dim < 0) {\n      if (!isPartial) {\n        throw new Error(`Dimension ${dim} must be >= 0`);\n      }\n      if (dim < -1) {\n        throw new Error(`Dimension ${dim} must be >= -1`);\n      }\n      dim = -1;\n    }\n    out.push(dim);\n  }\n\n  return out;\n}\n\nexport function raggedTensorToTensorImpl(\n    shape: TypedArray, shapesShape: number[], values: TypedArray,\n    valuesShape: number[], valuesDType: DataType, defaultValue: TypedArray,\n    defaultValueShape: number[], rowPartitionValues: TypedArray[],\n    rowPartitionValuesShapes: number[][],\n    rowPartitionTypes: string[]): [number[], TypedArray] {\n  return new RaggedTensorToTensorOp(\n             shape, shapesShape, values, valuesShape, valuesDType, defaultValue,\n             defaultValueShape, rowPartitionValues, rowPartitionValuesShapes,\n             rowPartitionTypes)\n      .compute();\n}\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {util} from '@tensorflow/tfjs-core';\n\n/**\n * The StringNGramsOp class creates ngrams from ragged string data.\n * The constructor contains all attributes related to the operation such as\n * padding widths and strings, and the compute function can be used to\n * compute the ngrams for different ragged tensor inputs.\n */\nclass StringNGramsOp {\n  private separator: Uint8Array;\n  private nGramWidths: number[];\n  private padWidth: number;\n  private leftPad: Uint8Array;\n  private rightPad: Uint8Array;\n  private preserveShort: boolean;\n\n  constructor(\n      separator: string, nGramWidths: number[], leftPad: string,\n      rightPad: string, padWidth: number, preserveShortSequences: boolean) {\n    this.separator = util.encodeString(separator);\n    this.nGramWidths = nGramWidths;\n    this.leftPad = util.encodeString(leftPad);\n    this.rightPad = util.encodeString(rightPad);\n    this.padWidth = padWidth;\n    this.preserveShort = preserveShortSequences;\n  }\n\n  private getPadWidth(nGramWidth: number) {\n    // Ngrams can be padded with either a fixed pad width or a dynamic pad\n    // width depending on the 'padWidth' arg, but in no case should the padding\n    // ever be wider than 'nGramWidth' - 1.\n    return Math.min(\n        this.padWidth < 0 ? nGramWidth - 1 : this.padWidth, nGramWidth - 1);\n  }\n\n  private getNumNGrams(length: number, nGramWidth: number) {\n    const padWidth = this.getPadWidth(nGramWidth);\n    return Math.max(0, ((length + 2 * padWidth) - nGramWidth) + 1);\n  }\n\n  private createNGrams(\n      data: Uint8Array[], splitIndex: number, output: Uint8Array[],\n      outputStartIndex: number, numNGrams: number, nGramWidth: number) {\n    for (let nGramIndex = 0; nGramIndex < numNGrams; ++nGramIndex) {\n      const padWidth = this.getPadWidth(nGramWidth);\n      const leftPadding = Math.max(0, padWidth - nGramIndex);\n      const rightPadding =\n          Math.max(0, padWidth - (numNGrams - (nGramIndex + 1)));\n      const numTokens = nGramWidth - (leftPadding + rightPadding);\n      const dataStartIndex =\n          splitIndex + (leftPadding > 0 ? 0 : nGramIndex - padWidth);\n\n      // Calculate the total expected size of the nGram so we can reserve the\n      // correct amount of space in the string.\n      let nGramSize = 0;\n      // Size of the left padding.\n      nGramSize += leftPadding * this.leftPad.length;\n      // Size of the tokens.\n      for (let n = 0; n < numTokens; ++n) {\n        nGramSize += data[dataStartIndex + n].length;\n      }\n      // Size of the right padding.\n      nGramSize += rightPadding * this.rightPad.length;\n      // Size of the separators.\n      const numSeparators = leftPadding + rightPadding + numTokens - 1;\n      nGramSize += numSeparators * this.separator.length;\n\n      // Build the nGram.\n      output[outputStartIndex + nGramIndex] = new Uint8Array(nGramSize);\n      const nGram = output[outputStartIndex + nGramIndex];\n\n      let nextNGramIndex = 0;\n      const appendToNGram = (str: Uint8Array) =>\n          str.forEach((value) => nGram[nextNGramIndex++] = value);\n\n      for (let n = 0; n < leftPadding; ++n) {\n        appendToNGram(this.leftPad);\n        appendToNGram(this.separator);\n      }\n      // Only output first numTokens - 1 pairs of data and separator\n      for (let n = 0; n < numTokens - 1; ++n) {\n        appendToNGram(data[dataStartIndex + n]);\n        appendToNGram(this.separator);\n      }\n      // Handle case when there are no tokens or no right padding as these\n      // can result in consecutive separators.\n      if (numTokens > 0) {\n        // If we have tokens, then output last and then pair each separator\n        // with the right padding that follows, to ensure nGram ends either with\n        // the token or with the right pad.\n        appendToNGram(data[dataStartIndex + numTokens - 1]);\n        for (let n = 0; n < rightPadding; ++n) {\n          appendToNGram(this.separator);\n          appendToNGram(this.rightPad);\n        }\n      } else {\n        // If we don't have tokens, then the last item inserted into the nGram\n        // has been the separator from the left padding loop above. Hence,\n        // output right pad and separator and make sure to finish with a\n        // padding, not a separator.\n        for (let n = 0; n < rightPadding - 1; ++n) {\n          appendToNGram(this.rightPad);\n          appendToNGram(this.separator);\n        }\n        appendToNGram(this.rightPad);\n      }\n    }\n  }\n\n  // Data and splits together form the definition of the ragged tensor,\n  // where data is 1 dimensional and contains the values of the tensor\n  // and splits denotes the indices at which each row starts.\n  public compute(data: Uint8Array[], splits: Int32Array):\n      [Uint8Array[], Int32Array] {\n    // Validate that the splits are valid indices into data, only if there are\n    // splits specified.\n    const inputDataSize = data.length;\n    const splitsSize = splits.length;\n    if (splitsSize > 0) {\n      let prevSplit = splits[0];\n      if (prevSplit !== 0) {\n        throw new Error(`First split value must be 0, got ${prevSplit}`);\n      }\n      for (let i = 1; i < splitsSize; ++i) {\n        let validSplits = splits[i] >= prevSplit;\n        validSplits = validSplits && (splits[i] <= inputDataSize);\n        if (!validSplits) {\n          throw new Error(`Invalid split value ${splits[i]}, must be in [${\n              prevSplit}, ${inputDataSize}]`);\n        }\n        prevSplit = splits[i];\n      }\n      if (prevSplit !== inputDataSize) {\n        throw new Error(`Last split value must be data size. Expected ${\n            inputDataSize}, got ${prevSplit}`);\n      }\n    }\n\n    const numBatchItems = splitsSize - 1;\n    const nGramsSplits = util.getArrayFromDType('int32', splitsSize);\n    // If there is no data or size, return an empty ragged tensor.\n    if (inputDataSize === 0 || splitsSize === 0) {\n      const empty: Uint8Array[] = new Array(inputDataSize);\n      for (let i = 0; i <= numBatchItems; ++i) {\n        nGramsSplits[i] = 0;\n      }\n      return [empty, nGramsSplits];\n    }\n\n    nGramsSplits[0] = 0;\n    for (let i = 1; i <= numBatchItems; ++i) {\n      const length = splits[i] - splits[i - 1];\n      let numNGrams = 0;\n      this.nGramWidths.forEach((nGramWidth) => {\n        numNGrams += this.getNumNGrams(length, nGramWidth);\n      });\n      if (this.preserveShort && length > 0 && numNGrams === 0) {\n        numNGrams = 1;\n      }\n      nGramsSplits[i] = nGramsSplits[i - 1] + numNGrams;\n    }\n\n    const nGrams: Uint8Array[] = new Array(nGramsSplits[numBatchItems]);\n\n    for (let i = 0; i < numBatchItems; ++i) {\n      const splitIndex = splits[i];\n      let outputStartIdx = nGramsSplits[i];\n      this.nGramWidths.forEach((nGramWidth) => {\n        const length = splits[i + 1] - splits[i];\n        const numNGrams = this.getNumNGrams(length, nGramWidth);\n        this.createNGrams(\n            data, splitIndex, nGrams, outputStartIdx, numNGrams, nGramWidth);\n        outputStartIdx += numNGrams;\n      });\n      // If we're preserving short sequences, check to see if no sequence was\n      // generated by comparing the current output start idx to the original\n      // one (nGramSplitsdata). If no ngrams were generated, then they will\n      // be equal (since we increment outputStartIdx by numNGrams every\n      // time we create a set of ngrams.)\n      if (this.preserveShort && outputStartIdx === nGramsSplits[i]) {\n        const dataLength = splits[i + 1] - splits[i];\n        // One legitimate reason to not have any ngrams when this.preserveShort\n        // is true is if the sequence itself is empty. In that case, move on.\n        if (dataLength === 0) {\n          continue;\n        }\n        // We don't have to worry about dynamic padding sizes here: if padding\n        // was dynamic, every sequence would have had sufficient padding to\n        // generate at least one nGram.\n        const nGramWidth = dataLength + 2 * this.padWidth;\n        const numNGrams = 1;\n        this.createNGrams(\n            data, splitIndex, nGrams, outputStartIdx, numNGrams, nGramWidth);\n      }\n    }\n    return [nGrams, nGramsSplits];\n  }\n}\n\nexport function stringNGramsImpl(\n    data: Uint8Array[], dataSplits: Int32Array, separator: string,\n    nGramWidths: number[], leftPad: string, rightPad: string, padWidth: number,\n    preserveShortSequences: boolean): [Uint8Array[], Int32Array] {\n  return new StringNGramsOp(\n             separator, nGramWidths, leftPad, rightPad, padWidth,\n             preserveShortSequences)\n      .compute(data, dataSplits);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {TypedArray, util} from '@tensorflow/tfjs-core';\n\nfunction split(\n    str: Uint8Array, delimiters: Uint8Array, skipEmpty: boolean,\n    result: Uint8Array[]): void {\n  if (!str.length) {\n    return;\n  }\n  // When the delimiter is empty, the input is split into individual characters.\n  if (delimiters.length === 0) {\n    for (let i = 0; i < str.length; ++i) {\n      result.push(str.subarray(i, i + 1));\n    }\n    return;\n  }\n  // When there is one delimiter, the input is split only at that delimiter.\n  if (delimiters.length === 1) {\n    const delimiter = delimiters[0];\n    let f = str.indexOf(delimiter);\n    while (f !== -1) {\n      const token = str.subarray(0, f);\n      if (!skipEmpty || token.length !== 0) {\n        result.push(token);\n      }\n      str = str.subarray(f + 1);\n      f = str.indexOf(delimiter);\n    }\n    if (!skipEmpty || str.length !== 0) {\n      result.push(str);\n    }\n    return;\n  }\n  // When there are multiple delimiters, the input is split at every instance\n  // one of the delimiters appears.\n  let tokenStart = 0;\n  for (let i = 0; i < str.length + 1; i++) {\n    if ((i === str.length) || (delimiters.indexOf(str[i]) !== -1)) {\n      const token = str.subarray(tokenStart, i);\n      if (!skipEmpty || token.length !== 0) {\n        result.push(token);\n      }\n      tokenStart = i + 1;\n    }\n  }\n}\n\nexport function stringSplitImpl(\n    input: Uint8Array[], delimiter: Uint8Array,\n    skipEmpty: boolean): [TypedArray, Uint8Array[], [number, number]] {\n  const batchSize = input.length;\n\n  // Empty delimiter means split the input character by character.\n  const tokens: Uint8Array[] = [];\n\n  let outputSize = 0;\n  let maxNumEntries = 0;\n  const numIndices: number[] = new Array(batchSize);\n  for (let i = 0; i < batchSize; ++i) {\n    const prevTokensLength = tokens.length;\n    split(input[i], delimiter, skipEmpty, tokens);\n    const nEntries = tokens.length - prevTokensLength;\n    numIndices[i] = nEntries;\n    outputSize += nEntries;\n    maxNumEntries = Math.max(maxNumEntries, nEntries);\n  }\n\n  const indices = util.getArrayFromDType('int32', outputSize * 2) as TypedArray;\n  const values: Uint8Array[] = new Array(outputSize);\n  const shape: [number, number] = [batchSize, maxNumEntries];\n\n  let c = 0;\n  for (let i = 0; i < batchSize; ++i) {\n    for (let j = 0; j < numIndices[i]; ++j) {\n      // indices is a 2d tensor with shape of [outputSize, 2]\n      indices[c * 2] = i;\n      indices[c * 2 + 1] = j;\n      values[c] = tokens[c];\n      ++c;\n    }\n  }\n\n  return [indices, values, shape];\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Slice, slice_util, SliceAttrs, SliceInputs, TypedArray, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {sliceImplCPU} from '../kernel_utils/shared';\n\nexport function slice(\n    args: {inputs: SliceInputs, attrs: SliceAttrs, backend: BackendWasm}) {\n  const {inputs: {x}, attrs: {begin, size}, backend} = args;\n\n  const [begin_, size_] = slice_util.parseSliceParams(x, begin, size);\n\n  const isContinous = slice_util.isSliceContinous(x.shape, begin_, size_);\n  const xVals = backend.readSync(x.dataId);\n  const out = backend.makeOutput(size_, x.dtype);\n  const xStrides = util.computeStrides(x.shape);\n  const outData = backend.dataIdMap.get(out.dataId);\n\n  if (isContinous) {\n    const flatOffset = slice_util.computeFlatOffset(begin_, xStrides);\n\n    if (x.dtype === 'string') {\n      outData.stringBytes =\n          (xVals as Uint8Array[])\n              .slice(flatOffset, flatOffset + util.sizeFromShape(size_));\n    } else {\n      const outVals = backend.typedArrayFromHeap(out);\n      outVals.set(\n          (xVals as TypedArray)\n              .subarray(flatOffset, flatOffset + util.sizeFromShape(size_)));\n    }\n\n    return out;\n  }\n\n  if (x.dtype === 'string') {\n    const res = sliceImplCPU(xVals, begin_, size_, x.shape, x.dtype);\n    outData.stringBytes = res as Uint8Array[];\n    return out;\n  }\n\n  const outVals = backend.typedArrayFromHeap(out);\n  const rank = x.shape.length;\n  if (rank === 2) {\n    slice2d(\n        xVals as TypedArray, xStrides[0], outVals, begin_ as [number, number],\n        size_ as [number, number]);\n  } else if (rank === 3) {\n    slice3d(\n        xVals as TypedArray, xStrides[0], xStrides[1], outVals,\n        begin_ as [number, number, number], size_ as [number, number, number]);\n  } else if (rank === 4) {\n    slice4d(\n        xVals as TypedArray, xStrides[0], xStrides[1], xStrides[2], outVals,\n        begin_ as [number, number, number, number],\n        size_ as [number, number, number, number]);\n  } else {\n    const res =\n        sliceImplCPU(xVals, begin_, size_, x.shape, x.dtype) as TypedArray;\n    outVals.set(res);\n  }\n\n  return out;\n}\n\nfunction slice2d(\n    xVals: backend_util.TypedArray, xStride: number,\n    outVals: backend_util.TypedArray, begin: [number, number],\n    size: [number, number]): void {\n  let outOffset = 0;\n  const beginI = begin[0];\n  const beginJ = begin[1];\n  const endI = beginI + size[0];\n  for (let i = beginI; i < endI; i++) {\n    const xOffset = i * xStride + beginJ;\n    outVals.set(xVals.subarray(xOffset, xOffset + size[1]), outOffset);\n    outOffset += size[1];\n  }\n}\n\nfunction slice3d(\n    xVals: backend_util.TypedArray, xStride1: number, xStride2: number,\n    outVals: backend_util.TypedArray, begin: [number, number, number],\n    size: [number, number, number]): void {\n  let outOffset = 0;\n  const beginI = begin[0];\n  const beginJ = begin[1];\n  const beginK = begin[2];\n  const endI = beginI + size[0];\n  const endJ = beginJ + size[1];\n  for (let i = beginI; i < endI; i++) {\n    for (let j = beginJ; j < endJ; j++) {\n      const xOffset = i * xStride1 + j * xStride2 + beginK;\n      outVals.set(xVals.subarray(xOffset, xOffset + size[2]), outOffset);\n      outOffset += size[2];\n    }\n  }\n}\n\nfunction slice4d(\n    xVals: backend_util.TypedArray, xStride1: number, xStride2: number,\n    xStride3: number, outVals: backend_util.TypedArray,\n    begin: [number, number, number, number],\n    size: [number, number, number, number]): void {\n  let outOffset = 0;\n  const beginI = begin[0];\n  const beginJ = begin[1];\n  const beginK = begin[2];\n  const endI = beginI + size[0];\n  const endJ = beginJ + size[1];\n  const endK = beginK + size[2];\n  const beginL = begin[3];\n\n  for (let i = beginI; i < endI; i++) {\n    for (let j = beginJ; j < endJ; j++) {\n      for (let k = beginK; k < endK; k++) {\n        const xOffset = i * xStride1 + j * xStride2 + k * xStride3 + beginL;\n        outVals.set(xVals.subarray(xOffset, xOffset + size[3]), outOffset);\n        outOffset += size[3];\n      }\n    }\n  }\n}\n\nexport const sliceConfig: KernelConfig = {\n  kernelName: Slice,\n  backendName: 'wasm',\n  kernelFunc: slice as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, BatchToSpaceND, BatchToSpaceNDAttrs, BatchToSpaceNDInputs, KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {reshape} from './Reshape';\nimport {slice} from './Slice';\nimport {transpose} from './Transpose';\n\nfunction batchToSpaceND(args: {\n  inputs: BatchToSpaceNDInputs,\n  backend: BackendWasm,\n  attrs: BatchToSpaceNDAttrs\n}) {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {blockShape, crops} = attrs;\n\n  const prod = blockShape.reduce((a, b) => a * b);\n\n  const reshaped = backend_util.getReshaped(x.shape, blockShape, prod);\n  const permuted = backend_util.getPermuted(reshaped.length, blockShape.length);\n  const reshapedPermuted =\n      backend_util.getReshapedPermuted(x.shape, blockShape, prod);\n  const sliceBeginCoords =\n      backend_util.getSliceBeginCoords(crops, blockShape.length);\n  const sliceSize =\n      backend_util.getSliceSize(reshapedPermuted, crops, blockShape.length);\n\n  const xReshaped = reshape({inputs: {x}, backend, attrs: {shape: reshaped}});\n  const xTransposed =\n      transpose({inputs: {x: xReshaped}, backend, attrs: {perm: permuted}});\n  const xTransposedReshaped = reshape(\n      {inputs: {x: xTransposed}, backend, attrs: {shape: reshapedPermuted}});\n  const result = slice({\n    inputs: {x: xTransposedReshaped},\n    backend,\n    attrs: {begin: sliceBeginCoords, size: sliceSize}\n  });\n\n  backend.disposeData(xReshaped.dataId);\n  backend.disposeData(xTransposed.dataId);\n  backend.disposeData(xReshaped.dataId);\n\n  return result;\n}\n\nexport const batchToSpaceNDConfig: KernelConfig = {\n  kernelName: BatchToSpaceND,\n  backendName: 'wasm',\n  kernelFunc: batchToSpaceND as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Cast, CastAttrs, CastInputs, KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\nimport {TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nexport function cast(\n    args: {inputs: CastInputs, attrs: CastAttrs, backend: BackendWasm}):\n    TensorInfo {\n  const {inputs: {x}, attrs: {dtype}, backend} = args;\n  const out = backend.makeOutput(x.shape, dtype);\n  const inVals = backend.typedArrayFromHeap(x);\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.set(inVals);\n  return out;\n}\n\nexport const castConfig: KernelConfig = {\n  kernelName: Cast,\n  backendName: 'wasm',\n  kernelFunc: cast as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ClipByValue, ClipByValueAttrs, ClipByValueInputs, KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmClip: (xId: number, min: number, max: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmClip = backend.wasm.cwrap(ClipByValue, null /* void */, [\n    'number',  // x_id\n    'number',  // min\n    'number',  // max\n    'number'   // out_id\n  ]);\n}\n\nfunction clip(args: {\n  inputs: ClipByValueInputs,\n  backend: BackendWasm,\n  attrs: ClipByValueAttrs\n}) {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {clipValueMin, clipValueMax} = attrs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmClip(xId, clipValueMin, clipValueMax, outId);\n  return out;\n}\n\nexport const clipByValueConfig: KernelConfig = {\n  kernelName: ClipByValue,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: clip as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Ceil} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const ceilConfig: KernelConfig = createUnaryKernelConfig(Ceil);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, Concat, ConcatAttrs, ConcatInputs, KernelConfig, KernelFunc, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {concatImplCPU} from '../kernel_utils/shared';\nimport {identity} from './Identity';\nimport {reshape} from './Reshape';\n\nexport function concat(\n    args: {inputs: ConcatInputs, backend: BackendWasm, attrs: ConcatAttrs}) {\n  const {inputs, backend} = args;\n\n  const axis = util.parseAxisParam(args.attrs.axis, inputs[0].shape)[0];\n\n  const shapes = inputs.map(t => t.shape);\n  backend_util.assertParamsConsistent(shapes, axis);\n\n  let outShape = backend_util.computeOutShape(inputs.map(t => t.shape), axis);\n\n  // Keep only non-empty tensors (ignore tensors with 0 in their shape).\n  const $inputs = inputs.filter(t => util.sizeFromShape(t.shape) > 0);\n  if ($inputs.length === 1) {\n    return identity({inputs: {x: $inputs[0]}, backend});\n  }\n\n  const out = backend.makeOutput(outShape, inputs[0].dtype);\n\n  if (util.sizeFromShape(outShape) === 0) {\n    return out;\n  }\n\n  if ($inputs[0].dtype === 'string') {\n    // Any concat of n-dimensional tensors across any axis can be reduced to\n    // a concatenation of two-dimensional tensors across the axis 1 by first\n    // partitioning the axes of the original tensors into those less than the\n    // axis to be concatenated and the rest. Then reshape the tensors\n    // into a two-dimensional tensor by collapsing these two sets of axes and\n    // concatenate the resulting matrices across the axis 1, finally reshaping\n    // the result to have the proper shape.\n    const inputs2D = $inputs.map(t => {\n      const innerSize = util.sizeFromShape(t.shape.slice(axis));\n      const shape = [-1, innerSize];\n      return reshape({inputs: {x: t}, backend, attrs: {shape}});\n    });\n\n    const inputsValShapes = inputs2D.map(t => {\n      return {vals: backend.readSync(t.dataId), shape: t.shape};\n    });\n\n    // Concats 2d tensors along axis=1.\n    outShape =\n        backend_util.computeOutShape(inputs2D.map(t => t.shape), 1 /* axis */);\n    const simplyConcat = inputs2D[0].shape[0] === 1;\n    const outVals = concatImplCPU(\n                        inputsValShapes, outShape, inputs[0].dtype,\n                        simplyConcat) as string[];\n\n    const finalOutShape =\n        backend_util.computeOutShape($inputs.map(t => t.shape), axis);\n\n    out.shape = finalOutShape;\n    const outData = backend.dataIdMap.get(out.dataId);\n    outData.stringBytes = backend_util.fromStringArrayToUint8(outVals);\n\n    inputs2D.forEach(t => backend.disposeData(t.dataId));\n\n    return out;\n  }\n\n  const batchDim = util.sizeFromShape($inputs[0].shape.slice(0, axis));\n  let sumInnerDims = 0;\n  const innerDims = $inputs.map(input => {\n    const innerDim = util.sizeFromShape(input.shape.slice(axis));\n    sumInnerDims += innerDim;\n    return innerDim;\n  });\n  const inVals = $inputs.map(input => backend.typedArrayFromHeap(input));\n  const outVals = backend.typedArrayFromHeap(out);\n  for (let b = 0; b < batchDim; b++) {\n    let outOffset = b * sumInnerDims;\n    for (let i = 0; i < inVals.length; i++) {\n      const innerDim = innerDims[i];\n      const inOffset = b * innerDim;\n      const vals = inVals[i].subarray(inOffset, inOffset + innerDim);\n      outVals.set(vals, outOffset);\n      outOffset += innerDim;\n    }\n  }\n  return out;\n}\n\nexport const concatConfig: KernelConfig = {\n  kernelName: Concat,\n  backendName: 'wasm',\n  kernelFunc: concat as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, BackendValues, DataType, TypedArray, util} from '@tensorflow/tfjs-core';\n\nexport function concatImpl(\n    inputs: Array<{vals: BackendValues, shape: number[]}>, outShape: number[],\n    dtype: DataType, simplyConcat: boolean): TypedArray|string[] {\n  const outVals = util.getArrayFromDType(dtype, util.sizeFromShape(outShape));\n\n  if (simplyConcat && dtype !== 'string') {\n    // Use built-in TypedArray.set() method for speed.\n    let offset = 0;\n    inputs.forEach(input => {\n      const size = util.sizeFromShape(input.shape);\n\n      (outVals as TypedArray).set(input.vals as TypedArray, offset);\n      offset += size;\n    });\n  } else {\n    let colOffset = 0;\n\n    inputs.forEach(input => {\n      const decodedData = dtype === 'string' ?\n          backend_util.fromUint8ToStringArray(input.vals as Uint8Array[]) :\n          input.vals as TypedArray;\n\n      let tIdx = 0;\n\n      for (let row = 0; row < input.shape[0]; ++row) {\n        const resIdx = row * outShape[1] + colOffset;\n        for (let col = 0; col < input.shape[1]; ++col) {\n          outVals[resIdx + col] = decodedData[tIdx++];\n        }\n      }\n\n      colOffset += input.shape[1];\n    });\n  }\n\n  return outVals;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, Conv2D, Conv2DAttrs, Conv2DInputs, KernelConfig, KernelFunc, Tensor4D} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmConv2d: (\n    xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n    filterId: number, filterHeight: number, filterWidth: number, padTop: number,\n    padRight: number, padBottom: number, padLeft: number, isSamePad: number,\n    dilationHeight: number, dilationWidth: number, strideHeight: number,\n    strideWidth: number, inputChannels: number, outputChannels: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmConv2d = backend.wasm.cwrap(Conv2D, null /* void */, [\n    'number',  // xId\n    'number',  // batchSize\n    'number',  // inputHeight\n    'number',  // inputWidth\n    'number',  // filterId\n    'number',  // filterHeight\n    'number',  // filterWidth\n    'number',  // padTop\n    'number',  // padRight\n    'number',  // padBottom\n    'number',  // padLeft\n    'number',  // isSamePad\n    'number',  // dilationHeight\n    'number',  // dilationWidth\n    'number',  // strideHeight\n    'number',  // strideWidth\n    'number',  // inputChannels\n    'number',  // outputChannels\n    'number',  // outId\n  ]);\n}\n\nfunction conv2d(\n    args: {inputs: Conv2DInputs, backend: BackendWasm, attrs: Conv2DAttrs}) {\n  const {inputs, attrs, backend} = args;\n\n  const {x, filter} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const filterId = backend.dataIdMap.get(filter.dataId).id;\n\n  const {strides, dilations, pad, dimRoundingMode, dataFormat} = attrs;\n  const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n  const convInfo = backend_util.computeConv2DInfo(\n      (x as Tensor4D).shape, (filter as Tensor4D).shape, strides, dilations,\n      pad, dimRoundingMode, false, $dataFormat);\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const dilationHeight = convInfo.dilationHeight;\n  const dilationWidth = convInfo.dilationWidth;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const inputChannels = convInfo.inChannels;\n  const outputChannels = convInfo.outChannels;\n  const isSamePad = convInfo.padInfo.type === 'SAME' ? 1 : 0;\n\n  if (convInfo.dataFormat !== 'channelsLast') {\n    throw new Error(\n        `wasm backend Conv2D does not support dataFormat:'` +\n        `${convInfo.dataFormat}'. Please use 'channelsLast'.`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmConv2d(\n      xId, x.shape[0], x.shape[1], x.shape[2], filterId, filterHeight,\n      filterWidth, padTop, padRight, padBottom, padLeft, isSamePad,\n      dilationHeight, dilationWidth, strideHeight, strideWidth, inputChannels,\n      outputChannels, outId);\n  return out;\n}\n\nexport const conv2DConfig: KernelConfig = {\n  kernelName: Conv2D,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: conv2d as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, Conv2DBackpropInput, Conv2DBackpropInputAttrs, Conv2DBackpropInputInputs, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmConv2DBackpropInput: (\n    dyId: number, filterId: number, batchSize: number, filterHeight: number,\n    filterWidth: number, inHeight: number, inWidth: number, inChannels: number,\n    outHeight: number, outWidth: number, outChannels: number,\n    strideHeight: number, strideWidth: number, topPad: number, leftPad: number,\n    fltS0: number, fltS1: number, fltS2: number, xBatchStride: number,\n    xRowStride: number, xColStride: number, xChannelStride: number,\n    yBatchStride: number, yRowStride: number, yColStride: number,\n    yChannelStride: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmConv2DBackpropInput = backend.wasm.cwrap(Conv2DBackpropInput, null, [\n    'number',  // dyId\n    'number',  // filterId\n    'number',  // batchSize\n    'number',  // filterHeight\n    'number',  // filterWidth\n    'number',  // inHeight\n    'number',  // inWidth\n    'number',  // inChannels\n    'number',  // outHeight\n    'number',  // outWidth\n    'number',  // outChannels\n    'number',  // strideHeight\n    'number',  // strideWidth\n    'number',  // topPad\n    'number',  // leftPad\n    'number',  // fltS0\n    'number',  // fltS1\n    'number',  // fltS2\n    'number',  // xBatchStride\n    'number',  // xRowStride\n    'number',  // xColStride\n    'number',  // xChannelStride\n    'number',  // yBatchStride\n    'number',  // yRowStride\n    'number',  // yColStride\n    'number',  // yChannelStride\n    'number',  // outId\n  ]);\n}\n\nfunction conv2DBackpropInput(args: {\n  backend: BackendWasm,\n  inputs: Conv2DBackpropInputInputs,\n  attrs: Conv2DBackpropInputAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {dy, filter} = inputs;\n  const {strides, pad, dataFormat, dimRoundingMode, inputShape} = attrs;\n\n  const dilations = 1;\n\n  const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n  const convInfo = backend_util.computeConv2DInfo(\n      inputShape, filter.shape as [number, number, number, number], strides,\n      dilations, pad, dimRoundingMode, false /* depthwise */, $dataFormat);\n  const {\n    batchSize,\n    filterHeight,\n    filterWidth,\n    inChannels,\n    inHeight,\n    inWidth,\n    outChannels,\n    outHeight,\n    outWidth,\n    strideHeight,\n    strideWidth\n  } = convInfo;\n\n  const topPad = filterHeight - 1 - convInfo.padInfo.top;\n  const leftPad = filterWidth - 1 - convInfo.padInfo.left;\n\n  const isChannelsLast = convInfo.dataFormat === 'channelsLast';\n  const dxStrides = util.computeStrides(convInfo.inShape);\n  const dyStrides = util.computeStrides(dy.shape);\n  const [fltS0, fltS1, fltS2] = util.computeStrides(filter.shape);\n  const xBatchStride = dxStrides[0];\n  const xRowStride = isChannelsLast ? dxStrides[1] : dxStrides[2];\n  const xColStride = isChannelsLast ? dxStrides[2] : 1;\n  const xChannelStride = isChannelsLast ? 1 : dxStrides[1];\n  const yBatchStride = dyStrides[0];\n  const yRowStride = isChannelsLast ? dyStrides[1] : dyStrides[2];\n  const yColStride = isChannelsLast ? dyStrides[2] : 1;\n  const yChannelStride = isChannelsLast ? 1 : dyStrides[1];\n\n  const out = backend.makeOutput(convInfo.inShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const dyId = backend.dataIdMap.get(dy.dataId).id;\n  const filterId = backend.dataIdMap.get(filter.dataId).id;\n\n  wasmConv2DBackpropInput(\n      dyId, filterId, batchSize, filterHeight, filterWidth, inHeight, inWidth,\n      inChannels, outHeight, outWidth, outChannels, strideHeight, strideWidth,\n      topPad, leftPad, fltS0, fltS1, fltS2, xBatchStride, xRowStride,\n      xColStride, xChannelStride, yBatchStride, yRowStride, yColStride,\n      yChannelStride, outId);\n  return out;\n}\n\nexport const conv2DBackpropInputConfig: KernelConfig = {\n  kernelName: Conv2DBackpropInput,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: conv2DBackpropInput as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {CropAndResize, CropAndResizeAttrs, CropAndResizeInputs, KernelConfig, KernelFunc, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {cast} from './Cast';\n\n// Must match enum in CropAndResize.cc\nenum InterpolationMethod {\n  bilinear = 0,\n  nearest = 1\n}\n\nlet wasmCropAndResize: (\n    imagesId: number, boxesId: number, boxIndId: number, numBoxes: number,\n    imagesShape: Uint8Array, cropHeight: number, cropWidth: number,\n    method: number, extrapolationValue: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmCropAndResize = backend.wasm.cwrap(CropAndResize, null /*void*/, [\n    'number',  // imagesId\n    'number',  // boxesId\n    'number',  // boxIndId\n    'number',  // numBoxes\n    'array',   // images shape\n    'number',  // cropHeight\n    'number',  // cropWidth\n    'number',  // method\n    'number',  // extrapolation value\n    'number'   // out id\n  ]);\n}\n\nfunction cropAndResize(args: {\n  backend: BackendWasm,\n  inputs: CropAndResizeInputs,\n  attrs: CropAndResizeAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {method, extrapolationValue, cropSize} = attrs;\n  const {image, boxes, boxInd} = inputs;\n\n  const numBoxes = boxes.shape[0];\n\n  const [cropHeight, cropWidth] = cropSize as [number, number];\n  const outShape = [numBoxes, cropHeight, cropWidth, image.shape[3]];\n\n  let imagesData = backend.dataIdMap.get(image.dataId);\n  let castedData;\n  if (image.dtype !== 'float32') {\n    castedData = cast({backend, inputs: {x: image}, attrs: {dtype: 'float32'}});\n    imagesData = backend.dataIdMap.get(castedData.dataId);\n  }\n\n  const imagesId = imagesData.id;\n  const boxesId = backend.dataIdMap.get(boxes.dataId).id;\n  const boxIndId = backend.dataIdMap.get(boxInd.dataId).id;\n\n  const out = backend.makeOutput(outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const imagesShapeBytes = new Uint8Array(new Int32Array(image.shape).buffer);\n\n  wasmCropAndResize(\n      imagesId, boxesId, boxIndId, numBoxes, imagesShapeBytes, cropHeight,\n      cropWidth,\n      InterpolationMethod[method as {} as keyof typeof InterpolationMethod],\n      extrapolationValue, outId);\n\n  if (castedData != null) {\n    backend.disposeData(castedData.dataId);\n  }\n\n  return out;\n}\n\nexport const cropAndResizeConfig: KernelConfig = {\n  kernelName: CropAndResize,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: cropAndResize as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Cos, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const cosConfig: KernelConfig = createUnaryKernelConfig(Cos);\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Cosh, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const coshConfig: KernelConfig = createUnaryKernelConfig(Cosh);\n","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Cumprod, CumprodAttrs, CumprodInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nimport {transpose} from './Transpose';\n\nlet wasmCumprod: (xId: number, exclusive: number, reverse: number,\n                 finalDim: number, outId: number, dtype: CppDType) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmCumprod = backend.wasm.cwrap(Cumprod, null /* void */, [\n    'number', // x_id\n    'number', // exclusive\n    'number', // reverse\n    'number', // final_dim\n    'number', // out_id\n    'number'  // dtype\n  ]);\n}\n\nexport function cumprod(\n  args: {inputs: CumprodInputs, backend: BackendWasm, attrs: CumprodAttrs}):\nTensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {axis, exclusive, reverse} = attrs;\n  const xRank = x.shape.length;\n\n  util.assert(x.dtype === 'float32' || x.dtype === 'int32',\n    () => `cumprod does not support ${x.dtype} tensors in the WASM backend`);\n  // permute required axis to inner most axis\n  const permutation = backend_util.getAxesPermutation([axis], xRank);\n  let permutedX = x;\n  if (permutation !== null) {\n    permutedX = transpose({inputs: {x}, attrs: {perm: permutation}, backend});\n  }\n  const permutedAxis = backend_util.getInnerMostAxes(1, xRank)[0];\n  backend_util.assertAxesAreInnerMostDims('cumprod', [permutedAxis], xRank);\n\n  const permutedOut = backend.makeOutput(permutedX.shape, permutedX.dtype);\n  const finalDim = permutedX.shape[permutedAxis];\n  const permutedXId = backend.dataIdMap.get(permutedX.dataId).id;\n  const permutedOutId = backend.dataIdMap.get(permutedOut.dataId).id;\n  wasmCumprod(permutedXId, exclusive ? 1 : 0, reverse ? 1 : 0, finalDim,\n              permutedOutId, CppDType[x.dtype]);\n\n  // transpose data back if permuted\n  let out = permutedOut;\n  if (permutation !== null) {\n    const undoPermutation = backend_util.getUndoAxesPermutation(permutation);\n    out = transpose(\n      {inputs: {x: permutedOut}, attrs: {perm: undoPermutation}, backend});\n    backend.disposeData(permutedX.dataId);\n    backend.disposeData(permutedOut.dataId);\n  }\n  return out;\n}\n\nexport const cumprodConfig: KernelConfig = {\n  kernelName: Cumprod,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: cumprod as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Cumsum, CumsumAttrs, CumsumInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nimport {transpose} from './Transpose';\n\nlet wasmCumsum: (xId: number, exclusive: number, reverse: number,\n                 finalDim: number, outId: number, dtype: CppDType) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmCumsum = backend.wasm.cwrap(Cumsum, null /* void */, [\n    'number', // x_id\n    'number', // exclusive\n    'number', // reverse\n    'number', // final_dim\n    'number', // out_id\n    'number'  // dtype\n  ]);\n}\n\nexport function cumsum(\n  args: {inputs: CumsumInputs, backend: BackendWasm, attrs: CumsumAttrs}):\nTensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {axis, exclusive, reverse} = attrs;\n  const xRank = x.shape.length;\n\n  util.assert(x.dtype === 'float32' || x.dtype === 'int32',\n    () => `cumsum does not support ${x.dtype} tensors in the WASM backend`);\n  // permute required axis to inner most axis\n  const permutation = backend_util.getAxesPermutation([axis], xRank);\n  let permutedX = x;\n  if (permutation !== null) {\n    permutedX = transpose({inputs: {x}, attrs: {perm: permutation}, backend});\n  }\n  const permutedAxis = backend_util.getInnerMostAxes(1, xRank)[0];\n  backend_util.assertAxesAreInnerMostDims('cumsum', [permutedAxis], xRank);\n\n  const permutedOut = backend.makeOutput(permutedX.shape, permutedX.dtype);\n  const finalDim = permutedX.shape[permutedAxis];\n  const permutedXId = backend.dataIdMap.get(permutedX.dataId).id;\n  const permutedOutId = backend.dataIdMap.get(permutedOut.dataId).id;\n  wasmCumsum(permutedXId, exclusive ? 1 : 0, reverse ? 1 : 0, finalDim,\n             permutedOutId, CppDType[x.dtype]);\n\n  // transpose data back if permuted\n  let out = permutedOut;\n  if (permutation !== null) {\n    const undoPermutation = backend_util.getUndoAxesPermutation(permutation);\n    out = transpose(\n      {inputs: {x: permutedOut}, attrs: {perm: undoPermutation}, backend});\n    backend.disposeData(permutedX.dataId);\n    backend.disposeData(permutedOut.dataId);\n  }\n  return out;\n}\n\nexport const cumsumConfig: KernelConfig = {\n  kernelName: Cumsum,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: cumsum as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {DepthToSpace, DepthToSpaceAttrs, DepthToSpaceInputs, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmDepthToSpace: (\n    xId: number, blockSize: number, channelsLast: number, xStrides: Uint8Array,\n    xStridesLength: number, outputShape: Uint8Array, outputStrides: Uint8Array,\n    outSize: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmDepthToSpace = backend.wasm.cwrap(DepthToSpace, null /*void*/, [\n    'number',  // xId\n    'number',  // blockSize\n    'number',  // channelsLast\n    'array',   // xStrides\n    'number',  // xStridesLength\n    'array',   // outputShape\n    'array',   // outputStrides\n    'number',  // outSize\n    'number',  // outId\n  ]);\n}\n\nexport function depthToSpace(args: {\n  backend: BackendWasm,\n  inputs: DepthToSpaceInputs,\n  attrs: DepthToSpaceAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {x} = inputs;\n  const {blockSize, dataFormat} = attrs;\n\n  const batchSize = x.shape[0];\n  const inputHeight = (dataFormat === 'NHWC') ? x.shape[1] : x.shape[2];\n  const inputWidth = (dataFormat === 'NHWC') ? x.shape[2] : x.shape[3];\n  const inputDepth = (dataFormat === 'NHWC') ? x.shape[3] : x.shape[1];\n\n  const outputHeight = inputHeight * blockSize;\n  const outputWidth = inputWidth * blockSize;\n  const outputDepth = inputDepth / (blockSize * blockSize);\n\n  const outputShape = (dataFormat === 'NHWC') ?\n      [batchSize, outputHeight, outputWidth, outputDepth] :\n      [batchSize, outputDepth, outputHeight, outputWidth];\n\n  const out = backend.makeOutput(outputShape, 'float32');\n\n  const xData = backend.dataIdMap.get(x.dataId);\n  const xId = xData.id;\n  const xStridesBytes =\n      new Uint8Array(new Int32Array(util.computeStrides(x.shape)).buffer);\n\n  const outputShapeBytes = new Uint8Array(new Int32Array(outputShape).buffer);\n  const outStridesBytes =\n      new Uint8Array(new Int32Array(util.computeStrides(outputShape)).buffer);\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const channelsLast = dataFormat === 'NHWC' ? 1 : 0;\n  wasmDepthToSpace(\n      xId, blockSize, channelsLast, xStridesBytes, x.shape.length - 1,\n      outputShapeBytes, outStridesBytes, outputShape.length, outId);\n\n  return out;\n}\n\nexport const depthToSpaceConfig: KernelConfig = {\n  kernelName: DepthToSpace,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: depthToSpace as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, DepthwiseConv2dNative, DepthwiseConv2dNativeAttrs, DepthwiseConv2dNativeInputs, KernelConfig, KernelFunc, Tensor4D} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmDepthwiseConv2d: (\n    xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n    filterId: number, filterHeight: number, filterWidth: number, padTop: number,\n    padRight: number, padBottom: number, padLeft: number, isSamePad: number,\n    dilationHeight: number, dilationWidth: number, strideHeight: number,\n    strideWidth: number, inputChannels: number, outputChannels: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmDepthwiseConv2d =\n      backend.wasm.cwrap(DepthwiseConv2dNative, null /* void */, [\n        'number',  // xId\n        'number',  // batchSize\n        'number',  // inputHeight\n        'number',  // inputWidth\n        'number',  // filterId\n        'number',  // filterHeight\n        'number',  // filterWidth\n        'number',  // padTop\n        'number',  // padRight\n        'number',  // padBottom\n        'number',  // padLeft\n        'number',  // isSamePad\n        'number',  // dilationHeight\n        'number',  // dilationWidth\n        'number',  // strideHeight\n        'number',  // strideWidth\n        'number',  // inputChannels\n        'number',  // outputChannels\n        'number',  // outId\n      ]);\n}\n\nfunction depthwiseConv2d(args: {\n  inputs: DepthwiseConv2dNativeInputs,\n  backend: BackendWasm,\n  attrs: DepthwiseConv2dNativeAttrs\n}) {\n  const {inputs, attrs, backend} = args;\n\n  const {x, filter} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const filterId = backend.dataIdMap.get(filter.dataId).id;\n\n  const {strides, dilations, pad, dimRoundingMode} = attrs;\n\n  const $dilations = dilations == null ? [1, 1] : dilations;\n\n  const convInfo = backend_util.computeConv2DInfo(\n      (x as Tensor4D).shape, (filter as Tensor4D).shape, strides,\n      ($dilations as number | [number, number]), pad, dimRoundingMode,\n      true /* depthwise */);\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const dilationHeight = convInfo.dilationHeight;\n  const dilationWidth = convInfo.dilationWidth;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const inputChannels = convInfo.inChannels;\n  const outputChannels = convInfo.outChannels;\n  const isSamePad = convInfo.padInfo.type === 'SAME' ? 1 : 0;\n\n  if (convInfo.dataFormat !== 'channelsLast') {\n    throw new Error(\n        `wasm backend DepthwiseConv2dNative does not support dataFormat:'` +\n        `${convInfo.dataFormat}'. Please use 'channelsLast'.`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmDepthwiseConv2d(\n      xId, x.shape[0], x.shape[1], x.shape[2], filterId, filterHeight,\n      filterWidth, padTop, padRight, padBottom, padLeft, isSamePad,\n      dilationHeight, dilationWidth, strideHeight, strideWidth, inputChannels,\n      outputChannels, outId);\n  return out;\n}\n\nexport const depthwiseConv2dNativeConfig: KernelConfig = {\n  kernelName: DepthwiseConv2dNative,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: depthwiseConv2d as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Elu, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const eluConfig: KernelConfig = createUnaryKernelConfig(Elu);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Equal, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = false;\nexport const equalConfig: KernelConfig =\n    createBinaryKernelConfig(Equal, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Exp, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const expConfig: KernelConfig = createUnaryKernelConfig(Exp, 'float32');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ExpandDims, ExpandDimsAttrs, ExpandDimsInputs, KernelConfig, KernelFunc, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {reshape} from './Reshape';\n\nexport function expandDims(args: {\n  inputs: ExpandDimsInputs,\n  attrs: ExpandDimsAttrs,\n  backend: BackendWasm\n}) {\n  const {inputs, attrs, backend} = args;\n  const {input} = inputs;\n  const {dim} = attrs;\n\n  const inputRank = input.shape.length;\n  const newShape = input.shape.slice();\n  let $dim = dim;\n  if (dim < 0) {\n    // Negative value is counted from the tail of rank.\n    util.assert(\n        -(inputRank + 1) <= dim,\n        () => `Axis must be in the interval [${- (inputRank + 1)}, ${\n            inputRank}]`);\n    $dim = inputRank + dim + 1;\n  }\n  newShape.splice($dim, 0, 1);\n\n  return reshape({inputs: {x: input}, backend, attrs: {shape: newShape}});\n}\n\nexport const expandDimsConfig: KernelConfig = {\n  kernelName: ExpandDims,\n  backendName: 'wasm',\n  kernelFunc: expandDims as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc} from '@tensorflow/tfjs-core';\nimport {Fill, FillAttrs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nexport function fill(args: {attrs: FillAttrs, backend: BackendWasm}) {\n  const {attrs: {shape, value, dtype}, backend} = args;\n  const out = backend.makeOutput(shape, dtype);\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.fill(value as number);\n  return out;\n}\n\nexport const fillConfig: KernelConfig = {\n  kernelName: Fill,\n  backendName: 'wasm',\n  kernelFunc: fill as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {FlipLeftRight, FlipLeftRightInputs, KernelConfig, KernelFunc, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmFlipLeftRight: (\n    xId: number, batch: number, imageHeight: number, imageWidth: number,\n    numChannels: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmFlipLeftRight = backend.wasm.cwrap(FlipLeftRight, null /* void */, [\n    'number',  // xId\n    'number',  // batch\n    'number',  // imageHeight\n    'number',  // imageWidth\n    'number',  // numChannels\n    'number',  // outId\n  ]);\n}\n\nexport function flipLeftRight(\n    args: {inputs: FlipLeftRightInputs, backend: BackendWasm}): TensorInfo {\n  const {inputs, backend} = args;\n  const {image} = inputs;\n\n  const out = backend.makeOutput(image.shape, image.dtype);\n  const imageId = backend.dataIdMap.get(image.dataId).id;\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const [batch, imageHeight, imageWidth, numChannels] = image.shape;\n\n  wasmFlipLeftRight(\n      imageId, batch, imageHeight, imageWidth, numChannels, outId);\n  return out;\n}\n\nexport const flipLeftRightConfig: KernelConfig = {\n  kernelName: FlipLeftRight,\n  backendName: 'wasm',\n  kernelFunc: flipLeftRight as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {FusedBatchNorm, FusedBatchNormAttrs, FusedBatchNormInputs, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmBatchNorm: (\n    xId: number, meanId: number, varianceId: number, offsetId: number,\n    scaleId: number, varianceEpsilon: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmBatchNorm = backend.wasm.cwrap(\n      FusedBatchNorm, null /* void */,\n      ['number', 'number', 'number', 'number', 'number', 'number', 'number']);\n}\n\nfunction fusedBatchNorm(args: {\n  backend: BackendWasm,\n  inputs: FusedBatchNormInputs,\n  attrs: FusedBatchNormAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {varianceEpsilon} = attrs;\n  const {x, mean, variance, offset, scale} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const meanId = backend.dataIdMap.get(mean.dataId).id;\n  const varianceId = backend.dataIdMap.get(variance.dataId).id;\n  const offsetId = offset != null ? backend.dataIdMap.get(offset.dataId).id : 0;\n  const scaleId = scale != null ? backend.dataIdMap.get(scale.dataId).id : 0;\n\n  const out = backend.makeOutput(x.shape, x.dtype);\n  // Short-circuit zero-sized tensors.\n  if (util.sizeFromShape(x.shape) === 0) {\n    return out;\n  }\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  wasmBatchNorm(\n      xId, meanId, varianceId, offsetId, scaleId, varianceEpsilon, outId);\n  return out;\n}\n\nexport const fusedBatchNormConfig: KernelConfig = {\n  kernelName: FusedBatchNorm,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: fusedBatchNorm as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Floor, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const floorConfig: KernelConfig = createUnaryKernelConfig(Floor);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {FloorDiv, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = false;\nexport const floorDivConfig: KernelConfig =\n    createBinaryKernelConfig(FloorDiv, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, FusedConv2D, FusedConv2DAttrs, FusedConv2DInputs, KernelConfig, KernelFunc, Tensor4D} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {FusableActivation} from './types';\n\nlet wasmFusedConv2d:\n    (xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n     filterId: number, filterHeight: number, filterWidth: number,\n     biasId: number, padTop: number, padRight: number, padBottom: number,\n     padLeft: number, isSamePad: number, dilationHeight: number,\n     dilationWidth: number, strideHeight: number, strideWidth: number,\n     inputChannels: number, outputChannels: number, activation: number,\n     preluActivationWeightsId: number, leakyreluAlpha: number, outId: number) =>\n        void;\n\nfunction setup(backend: BackendWasm) {\n  wasmFusedConv2d = backend.wasm.cwrap(FusedConv2D, null /* void */, [\n    'number',  // xId\n    'number',  // batchSize\n    'number',  // inputHeight\n    'number',  // inputWidth\n    'number',  // filterId\n    'number',  // filterHeight\n    'number',  // filterWidth\n    'number',  // biasId\n    'number',  // padTop\n    'number',  // padRight\n    'number',  // padBottom\n    'number',  // padLeft\n    'number',  // isSamePad\n    'number',  // dilationHeight\n    'number',  // dilationWidth\n    'number',  // strideHeight\n    'number',  // strideWidth\n    'number',  // inputChannels\n    'number',  // outputChannels\n    'number',  // activation\n    'number',  // preluActivationWeightsId\n    'number',  // leakyreluAlpha\n    'number',  // outId\n  ]);\n}\n\nfunction fusedConv2d(args: {\n  inputs: FusedConv2DInputs,\n  backend: BackendWasm,\n  attrs: FusedConv2DAttrs\n}) {\n  const {inputs, attrs, backend} = args;\n  const {x, filter, bias, preluActivationWeights} = inputs;\n  const {\n    strides,\n    pad,\n    dilations,\n    dataFormat,\n    dimRoundingMode,\n    activation,\n    leakyreluAlpha\n  } = attrs;\n\n  const convInfo = backend_util.computeConv2DInfo(\n      (x as Tensor4D).shape, (filter as Tensor4D).shape, strides, dilations,\n      pad, dimRoundingMode);\n\n  const fusedActivation =\n      FusableActivation[activation as {} as keyof typeof FusableActivation];\n  if (fusedActivation == null) {\n    throw new Error(\n        `${activation} activation not yet supported for FusedConv2D ` +\n        `in the wasm backend.`);\n  }\n\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const filterId = backend.dataIdMap.get(filter.dataId).id;\n\n  const outputChannels = convInfo.outChannels;\n\n  let biasId = 0;\n  if (bias != null) {\n    const biasData = backend.dataIdMap.get(bias.dataId);\n    if (biasData.shape.length !== 1) {\n      throw new Error(\n          `FusedConv2D only supports rank-1 bias but got ` +\n          `rank ${biasData.shape.length}.`);\n    }\n    if (biasData.shape[0] !== outputChannels) {\n      throw new Error(\n          `FusedConv2D bias shape (${biasData.shape}) does not ` +\n          `match the number of output channels (${outputChannels})`);\n    }\n    biasId = biasData.id;\n  }\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const dilationHeight = convInfo.dilationHeight;\n  const dilationWidth = convInfo.dilationWidth;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const inputChannels = convInfo.inChannels;\n  const isSamePad = convInfo.padInfo.type === 'SAME' ? 1 : 0;\n  const batchSize = convInfo.batchSize;\n  const inHeight = convInfo.inHeight;\n  const inWidth = convInfo.inWidth;\n\n  if (dataFormat !== 'NHWC') {\n    throw new Error(\n        `wasm backend FusedConv2D does not support dataFormat:'` +\n        `${dataFormat}'. Please use 'NHWC'.`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const preluActivationWeightsId = preluActivationWeights == null ?\n      0 :\n      backend.dataIdMap.get(preluActivationWeights.dataId).id;\n\n  wasmFusedConv2d(\n      xId, batchSize, inHeight, inWidth, filterId, filterHeight, filterWidth,\n      biasId, padTop, padRight, padBottom, padLeft, isSamePad, dilationHeight,\n      dilationWidth, strideHeight, strideWidth, inputChannels, outputChannels,\n      fusedActivation, preluActivationWeightsId, leakyreluAlpha || 0, outId);\n\n  return out;\n}\n\nexport const fusedConv2DConfig: KernelConfig = {\n  kernelName: FusedConv2D,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: fusedConv2d as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, FusedDepthwiseConv2D, FusedDepthwiseConv2DAttrs, FusedDepthwiseConv2DInputs, KernelConfig, KernelFunc, Tensor4D} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {FusableActivation} from './types';\n\nlet wasmFusedDepthwiseConv2d:\n    (xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n     filterId: number, filterHeight: number, filterWidth: number,\n     biasId: number, padTop: number, padRight: number, padBottom: number,\n     padLeft: number, isSamePad: number, dilationHeight: number,\n     dilationWidth: number, strideHeight: number, strideWidth: number,\n     inputChannels: number, outputChannels: number, activation: number,\n     preluActivationWeightsId: number, leakyreluAlpha: number, outId: number) =>\n        void;\n\nfunction setup(backend: BackendWasm) {\n  wasmFusedDepthwiseConv2d =\n      backend.wasm.cwrap(FusedDepthwiseConv2D, null /* void */, [\n        'number',  // xId\n        'number',  // batchSize\n        'number',  // inputHeight\n        'number',  // inputWidth\n        'number',  // filterId\n        'number',  // filterHeight\n        'number',  // filterWidth\n        'number',  // biasId\n        'number',  // padTop\n        'number',  // padRight\n        'number',  // padBottom\n        'number',  // padLeft\n        'number',  // isSamePad\n        'number',  // dilationHeight\n        'number',  // dilationWidth\n        'number',  // strideHeight\n        'number',  // strideWidth\n        'number',  // inputChannels\n        'number',  // outputChannels\n        'number',  // activation\n        'number',  // preluActivationWeightsId\n        'number',  // leakyreluAlpha\n        'number',  // outId\n      ]);\n}\n\nfunction fusedDepthwiseConv2d(args: {\n  inputs: FusedDepthwiseConv2DInputs,\n  backend: BackendWasm,\n  attrs: FusedDepthwiseConv2DAttrs\n}) {\n  const {inputs, attrs, backend} = args;\n  const {x, filter, bias, preluActivationWeights} = inputs;\n  const {\n    strides,\n    pad,\n    dilations,\n    dataFormat,\n    dimRoundingMode,\n    activation,\n    leakyreluAlpha\n  } = attrs;\n\n  const convInfo = backend_util.computeConv2DInfo(\n      (x as Tensor4D).shape, (filter as Tensor4D).shape, strides, dilations,\n      pad, dimRoundingMode, true /* depthwise */);\n\n  const fusedActivation =\n      FusableActivation[activation as {} as keyof typeof FusableActivation];\n  if (fusedActivation == null) {\n    throw new Error(\n        `${activation} activation not yet supported for FusedDepthwiseConv2D ` +\n        `in the wasm backend.`);\n  }\n\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const filterId = backend.dataIdMap.get(filter.dataId).id;\n\n  const outputChannels = convInfo.outChannels;\n\n  let biasId = 0;\n  if (bias != null) {\n    const biasData = backend.dataIdMap.get(bias.dataId);\n    if (biasData.shape.length !== 1) {\n      throw new Error(\n          `FusedDepthwiseConv2D only supports rank-1 bias but got ` +\n          `rank ${biasData.shape.length}.`);\n    }\n    if (biasData.shape[0] !== outputChannels) {\n      throw new Error(\n          `FusedDepthwiseConv2D bias shape (${biasData.shape}) does not ` +\n          `match the number of output channels (${outputChannels})`);\n    }\n    biasId = biasData.id;\n  }\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const dilationHeight = convInfo.dilationHeight;\n  const dilationWidth = convInfo.dilationWidth;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const inputChannels = convInfo.inChannels;\n  const isSamePad = convInfo.padInfo.type === 'SAME' ? 1 : 0;\n  const batchSize = convInfo.batchSize;\n  const inHeight = convInfo.inHeight;\n  const inWidth = convInfo.inWidth;\n\n  if (dataFormat !== 'NHWC') {\n    throw new Error(\n        `wasm backend FusedDepthwiseConv2D does not support dataFormat:'` +\n        `${dataFormat}'. Please use 'NHWC'.`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const preluActivationWeightsId = preluActivationWeights == null ?\n      0 :\n      backend.dataIdMap.get(preluActivationWeights.dataId).id;\n\n  wasmFusedDepthwiseConv2d(\n      xId, batchSize, inHeight, inWidth, filterId, filterHeight, filterWidth,\n      biasId, padTop, padRight, padBottom, padLeft, isSamePad, dilationHeight,\n      dilationWidth, strideHeight, strideWidth, inputChannels, outputChannels,\n      fusedActivation, preluActivationWeightsId, leakyreluAlpha || 0, outId);\n\n  return out;\n}\n\nexport const fusedDepthwiseConv2DConfig: KernelConfig = {\n  kernelName: FusedDepthwiseConv2D,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: fusedDepthwiseConv2d as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {gather_util, GatherNd, GatherNdInputs, KernelConfig, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmGatherNd: (\n    xId: number, dtype: CppDType, indicesId: number, numSlices: number,\n    sliceRank: number, sliceSize: number, strides: Uint8Array, outId: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmGatherNd = backend.wasm.cwrap(GatherNd, null /*void*/, [\n    'number',  // xId\n    'number',  // dtype\n    'number',  // indicesId\n    'number',  // numSlices\n    'number',  // sliceRank\n    'number',  // sliceSize\n    'array',   // strides\n    'number'   // outId\n  ]);\n}\n\nfunction gatherNd(args: {backend: BackendWasm, inputs: GatherNdInputs}):\n    TensorInfo {\n  const {backend, inputs} = args;\n  const {params, indices} = inputs;\n\n  const [resultShape, numSlices, sliceSize, strides] =\n      gather_util.prepareAndValidate(params, indices);\n\n  const out = backend.makeOutput(resultShape, params.dtype);\n  if (numSlices === 0) {\n    return out;\n  }\n\n  const indicesShape = indices.shape;\n  const sliceRank = indicesShape[indicesShape.length - 1];\n\n  const xData = backend.dataIdMap.get(params.dataId);\n  const xId = xData.id;\n  const indicesData = backend.dataIdMap.get(indices.dataId);\n  const indicesId = indicesData.id;\n\n  const stridesBytes = new Uint8Array(new Int32Array(strides).buffer);\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmGatherNd(\n      xId, CppDType[params.dtype], indicesId, numSlices, sliceRank, sliceSize,\n      stridesBytes, outId);\n\n  return out;\n}\n\nexport const gatherNdConfig: KernelConfig = {\n  kernelName: GatherNd,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: gatherNd\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, GatherV2, GatherV2Attrs, GatherV2Inputs, KernelConfig, KernelFunc, Tensor, TensorInfo, TypedArray, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {reshape} from './Reshape';\nimport {CppDType} from './types';\n\nlet wasmGather: (\n    xId: number, dtype: CppDType, xStrides: Uint8Array, stridesSize: number,\n    indicesId: number, batchSize: number, outStrides: Uint8Array,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmGather = backend.wasm.cwrap('Gather', null /*void*/, [\n    'number',  // xId\n    'number',  // dtype\n    'array',   // xStrides\n    'number',  // stridesSize\n    'number',  // indicesId\n    'number',  // batchSize\n    'array',   // outStrides\n    'number'   // outId\n  ]);\n}\n\nfunction gatherV2(\n    args: {backend: BackendWasm, inputs: GatherV2Inputs, attrs: GatherV2Attrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {x, indices} = inputs;\n  const {axis, batchDims} = attrs;\n\n  // Throw error when any index is out of bound.\n  const parsedAxis = util.parseAxisParam(axis, x.shape)[0];\n  const indicesVals = backend.readSync(indices.dataId) as TypedArray;\n  const axisDim = x.shape[parsedAxis];\n  for (let i = 0; i < indicesVals.length; ++i) {\n    const index = indicesVals[i];\n    util.assert(\n        index <= axisDim - 1 && index >= 0,\n        () =>\n            `GatherV2: the index value ${index} is not in [0, ${axisDim - 1}]`);\n  }\n\n  const shapeInfo = backend_util.segment_util.collectGatherOpShapeInfo(\n      x as Tensor, indices as Tensor, parsedAxis, batchDims);\n\n  const flattenX = reshape({\n    inputs: {x},\n    attrs: {\n      shape: [\n        shapeInfo.batchSize, shapeInfo.outerSize, shapeInfo.dimSize,\n        shapeInfo.sliceSize\n      ]\n    },\n    backend\n  });\n  const indicesSize = util.sizeFromShape(indices.shape);\n  const flattenIndex = reshape({\n    inputs: {x: indices},\n    attrs: {shape: [shapeInfo.batchSize, indicesSize / shapeInfo.batchSize]},\n    backend\n  });\n  const flattenOutputShape = [\n    shapeInfo.batchSize, shapeInfo.outerSize, indicesSize / shapeInfo.batchSize,\n    shapeInfo.sliceSize\n  ];\n\n  const out = backend.makeOutput(flattenOutputShape, x.dtype);\n  if (util.sizeFromShape(x.shape) === 0) {\n    return out;\n  }\n  const stridesSize = flattenX.shape.length - 1;\n\n  const xData = backend.dataIdMap.get(flattenX.dataId);\n  const xId = xData.id;\n\n  const indicesData = backend.dataIdMap.get(flattenIndex.dataId);\n  const indicesId = indicesData.id;\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const xStridesBytes = new Uint8Array(\n      new Int32Array(util.computeStrides(flattenX.shape)).buffer);\n  const outStridesBytes = new Uint8Array(\n      new Int32Array(util.computeStrides(flattenOutputShape)).buffer);\n\n  wasmGather(\n      xId, CppDType[x.dtype], xStridesBytes, stridesSize, indicesId,\n      shapeInfo.batchSize, outStridesBytes, outId);\n\n  backend.disposeData(flattenX.dataId);\n  backend.disposeData(flattenIndex.dataId);\n\n  // reshape\n  out.shape = shapeInfo.outputShape;\n  return out;\n}\n\nexport const gatherV2Config: KernelConfig = {\n  kernelName: GatherV2,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: gatherV2 as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, LeakyRelu, LeakyReluAttrs, LeakyReluInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmFunc: (\n    xId: number, dtype: number, leakyreluAlpha: number, outId: number) => void;\n\nfunction setupFunc(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(LeakyRelu, null /* void */, [\n    'number',  // x_id\n    'number',  // dtype\n    'number',  // leakyrelu_alpha\n    'number',  // out_id\n  ]);\n}\n\nexport function leakyRelu(\n    args:\n        {inputs: LeakyReluInputs, attrs: LeakyReluAttrs, backend: BackendWasm}):\n    TensorInfo {\n  const {inputs: {x}, attrs: {alpha}, backend} = args;\n\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  // According to TF API, LeakyRelu returns float32 when input is either float32\n  // or int32.\n  const out = backend.makeOutput(x.shape, 'float32');\n\n  if (util.sizeFromShape(x.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmFunc(xId, CppDType[x.dtype], alpha, outId);\n  }\n\n  return out;\n}\n\nexport const leakyReluConfig: KernelConfig = {\n  kernelName: LeakyRelu,\n  backendName: 'wasm',\n  setupFunc,\n  kernelFunc: leakyRelu as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {Greater, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = false;\nexport const greaterConfig: KernelConfig =\n    createBinaryKernelConfig(Greater, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {GreaterEqual, KernelConfig} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = false;\nexport const greaterEqualConfig: KernelConfig =\n    createBinaryKernelConfig(GreaterEqual, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Max, MaxAttrs, MaxInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\nimport {CppDType} from './types';\n\nlet wasmMax: (xId: number, dtype: number, reduceSize: number, outId: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmMax = backend.wasm.cwrap(Max, null /*void*/, [\n    'number',  // x_id\n    'number',  // dtype\n    'number',  // reduce_size\n    'number',  // out_id\n  ]);\n}\n\nfunction max(args: {backend: BackendWasm, inputs: MaxInputs, attrs: MaxAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {reductionIndices: axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    input = transposed;\n    inputId = transposedId;\n  }\n\n  const inputRank = input.shape.length;\n  backend_util.assertAxesAreInnerMostDims('max', axes, inputRank);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, axes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, x.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmMax(inputId, CppDType[x.dtype], reduceSize, outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const maxConfig: KernelConfig = {\n  kernelName: Max,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: max as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Less} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const lessConfig: KernelConfig =\n    createBinaryKernelConfig(Less, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, LessEqual} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const lessEqualConfig: KernelConfig =\n    createBinaryKernelConfig(LessEqual, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Log} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const logConfig: KernelConfig = createUnaryKernelConfig(Log);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, LogicalAnd} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const logicalAndConfig: KernelConfig =\n    createBinaryKernelConfig(LogicalAnd, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, LogicalNot} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const logicalNotConfig: KernelConfig =\n  createUnaryKernelConfig(LogicalNot);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, LogicalOr} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const logicalOrConfig: KernelConfig =\n    createBinaryKernelConfig(LogicalOr, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, LogicalXor} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const logicalXorConfig: KernelConfig =\n    createBinaryKernelConfig(LogicalXor, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, MaxPool, MaxPoolAttrs, MaxPoolInputs, Tensor4D, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmMaxPool: (\n    xId: number, batchSize: number, inputHeight: number, inputWidth: number,\n    filterHeight: number, filterWidth: number, padTop: number, padRight: number,\n    padBottom: number, padLeft: number, dilationHeight: number,\n    dilationWidth: number, strideHeight: number, strideWidth: number,\n    inputChannels: number, outputChannels: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmMaxPool = backend.wasm.cwrap(MaxPool, null /* void */, [\n    'number',  // xId\n    'number',  // batchSize\n    'number',  // inputHeight\n    'number',  // inputWidth\n    'number',  // filterHeight\n    'number',  // filterWidth\n    'number',  // padTop\n    'number',  // padRight\n    'number',  // padBottom\n    'number',  // padLeft\n    'number',  // dilationHeight\n    'number',  // dilationWidth\n    'number',  // strideHeight\n    'number',  // strideWidth\n    'number',  // inputChannels\n    'number',  // outputChannels\n    'number',  // outId\n  ]);\n}\n\nfunction maxPool(\n    args: {inputs: MaxPoolInputs, backend: BackendWasm, attrs: MaxPoolAttrs}) {\n  const {inputs, attrs, backend} = args;\n\n  const x = inputs.x as Tensor4D;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n\n  // TF API supports int32 input. CPU and WebGL backend also support int32\n  // input. WASM backend doesn't support it because it uses xnnpack which only\n  // supports float32.\n  //\n  // Add the following assert only for the WASM backend instead of at core op\n  // level.\n  //\n  // TODO: add support for int32 input.\n  util.assert(\n      x.dtype === 'float32',\n      () =>\n          `Error in MaxPool: only float32 input is supported. Got ${x.dtype}.`);\n\n  const {filterSize, strides, pad, dimRoundingMode} = attrs;\n  const convInfo = backend_util.computePool2DInfo(\n      x.shape, filterSize, strides, 1 /* dilations */, pad, dimRoundingMode);\n\n  const filterHeight = convInfo.filterHeight;\n  const filterWidth = convInfo.filterWidth;\n  const padTop = convInfo.padInfo.top;\n  const padRight = convInfo.padInfo.right;\n  const padBottom = convInfo.padInfo.bottom;\n  const padLeft = convInfo.padInfo.left;\n  const dilationHeight = convInfo.dilationHeight;\n  const dilationWidth = convInfo.dilationWidth;\n  const strideHeight = convInfo.strideHeight;\n  const strideWidth = convInfo.strideWidth;\n  const inputChannels = convInfo.inChannels;\n  const outputChannels = convInfo.outChannels;\n\n  if (convInfo.dataFormat !== 'channelsLast') {\n    throw new Error(\n        `wasm backend does not support dataFormat:'` +\n        `${convInfo.dataFormat}'. Please use 'channelsLast'.`);\n  }\n\n  const out = backend.makeOutput(convInfo.outShape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  wasmMaxPool(\n      xId, x.shape[0], x.shape[1], x.shape[2], filterHeight, filterWidth,\n      padTop, padRight, padBottom, padLeft, dilationHeight, dilationWidth,\n      strideHeight, strideWidth, inputChannels, outputChannels, outId);\n  return out;\n}\n\nexport const maxPoolConfig: KernelConfig = {\n  kernelName: MaxPool,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: maxPool as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Maximum} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const maximumConfig: KernelConfig =\n    createBinaryKernelConfig(Maximum, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Mean, MeanAttrs, MeanInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {cast} from './Cast';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\n\nlet wasmMean: (xId: number, reduceSize: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmMean =\n      backend.wasm.cwrap(Mean, null /*void*/, ['number, number, number']);\n}\n\nexport function mean(\n    args: {backend: BackendWasm, inputs: MeanInputs, attrs: MeanAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  let reductionAxes = axes;\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    if (transposedId !== xId) {\n      // transpose was not a no-op. We will need to dispose of this\n      // once we are done.\n      input = transposed;\n      inputId = transposedId;\n      reductionAxes = backend_util.getInnerMostAxes(\n          reductionAxes.length, input.shape.length);\n    }\n  }\n\n  backend_util.assertAxesAreInnerMostDims(\n      'mean', reductionAxes, input.shape.length);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, reductionAxes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n  let castedInput = input;\n  if (input.dtype !== 'float32') {\n    castedInput =\n        cast({backend, inputs: {x: input}, attrs: {dtype: 'float32'}});\n    inputId = backend.dataIdMap.get(castedInput.dataId).id;\n  }\n\n  const out = backend.makeOutput(outShape, 'float32');\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmMean(inputId, reduceSize, outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  if (input.dtype !== 'float32') {\n    backend.disposeData(castedInput.dataId);\n  }\n\n  return out;\n}\n\nexport const meanConfig: KernelConfig = {\n  kernelName: Mean,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: mean as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Min, MinAttrs, MinInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\nimport {CppDType} from './types';\n\nlet wasmMin: (xId: number, dtype: number, reduceSize: number, outId: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmMin = backend.wasm.cwrap(Min, null /*void*/, [\n    'number',  // x_id\n    'number',  // dtype\n    'number',  // reduce_size\n    'number',  // out_id\n  ]);\n}\n\nfunction min(args: {backend: BackendWasm, inputs: MinInputs, attrs: MinAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    if (transposedId !== xId) {\n      // transpose was not a no-op. We will need to dispose of this\n      // once we are done.\n      input = transposed;\n      inputId = transposedId;\n    }\n  }\n\n  const inputRank = input.shape.length;\n\n  backend_util.assertAxesAreInnerMostDims('min', axes, inputRank);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, axes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, input.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmMin(inputId, CppDType[x.dtype], reduceSize, outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const minConfig: KernelConfig = {\n  kernelName: Min,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: min as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, MirrorPad, MirrorPadAttrs, MirrorPadInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\n// Must match enum in MirrorPad.cc\nenum MirrorPaddingMode {\n  reflect = 0,\n  symmetric = 1\n}\n\nlet wasmMirrorPad: (\n    xId: number, xShapeBytes: Uint8Array, xShapeLength: number, xDtype: number,\n    prePaddingsBytes: Uint8Array, postPaddingsBytes: Uint8Array, mode: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmMirrorPad = backend.wasm.cwrap(MirrorPad, null /* void */, [\n    'number',  // xId\n    'array',   // x.shape\n    'number',  // x.shape.length\n    'number',  // x.dtype\n    'array',   // pre-paddings\n    'array',   // post-paddings\n    'number',  // mode\n    'number',  // outId\n  ]);\n}\n\nfunction mirrorPad(args: {\n  inputs: MirrorPadInputs,\n  backend: BackendWasm,\n  attrs: MirrorPadAttrs\n}) {\n  const {inputs: {x}, backend, attrs: {paddings, mode}} = args;\n\n  const outShape = paddings.map(\n      (p, i) => p[0] /* beforePad */ + x.shape[i] + p[1] /* afterPad */);\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const out = backend.makeOutput(outShape, x.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  const xShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n\n  const prePaddingsFlat = paddings.map(padTuple => padTuple[0]);\n  const postPaddingsFlat = paddings.map(padTuple => padTuple[1]);\n  const prePaddingsBytes =\n      new Uint8Array(new Int32Array(prePaddingsFlat).buffer);\n  const postPaddingsBytes =\n      new Uint8Array(new Int32Array(postPaddingsFlat).buffer);\n\n  wasmMirrorPad(\n      xId, xShapeBytes, x.shape.length, CppDType[x.dtype], prePaddingsBytes,\n      postPaddingsBytes, MirrorPaddingMode[mode], outId);\n  return out;\n}\n\nexport const mirrorPadConfig: KernelConfig = {\n  kernelName: MirrorPad,\n  backendName: 'wasm',\n  kernelFunc: mirrorPad as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Minimum} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const minimumConfig: KernelConfig =\n    createBinaryKernelConfig(Minimum, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, NonMaxSuppressionV3, NonMaxSuppressionV3Attrs, NonMaxSuppressionV3Inputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {parseResultStruct} from './NonMaxSuppression_util';\n\nlet wasmFunc: (\n    boxesId: number, scoresId: number, maxOutputSize: number,\n    iouThreshold: number, scoreThreshold: number) => number;\n\nfunction setup(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(\n      NonMaxSuppressionV3,\n      'number',  // Result*\n      [\n        'number',  // boxesId\n        'number',  // scoresId\n        'number',  // maxOutputSize\n        'number',  // iouThreshold\n        'number',  // scoreThreshold\n      ]);\n}\n\nfunction kernelFunc(args: {\n  backend: BackendWasm,\n  inputs: NonMaxSuppressionV3Inputs,\n  attrs: NonMaxSuppressionV3Attrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {iouThreshold, maxOutputSize, scoreThreshold} = attrs;\n  const {boxes, scores} = inputs;\n\n  const boxesId = backend.dataIdMap.get(boxes.dataId).id;\n  const scoresId = backend.dataIdMap.get(scores.dataId).id;\n\n  const resOffset =\n      wasmFunc(boxesId, scoresId, maxOutputSize, iouThreshold, scoreThreshold);\n\n  const {pSelectedIndices, selectedSize, pSelectedScores, pValidOutputs} =\n      parseResultStruct(backend, resOffset);\n\n  // Since we are not using scores for V3, we have to delete it from the heap.\n  backend.wasm._free(pSelectedScores);\n  backend.wasm._free(pValidOutputs);\n\n  const selectedIndicesTensor =\n      backend.makeOutput([selectedSize], 'int32', pSelectedIndices);\n\n  return selectedIndicesTensor;\n}\n\nexport const nonMaxSuppressionV3Config: KernelConfig = {\n  kernelName: NonMaxSuppressionV3,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: kernelFunc as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, Multiply} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = true;\nexport const multiplyConfig: KernelConfig =\n    createBinaryKernelConfig(Multiply, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Neg} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const negConfig: KernelConfig = createUnaryKernelConfig(Neg);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {BackendWasm} from '../backend_wasm';\n\n// Analogous to `struct Result` in `non_max_suppression_impl.h`.\ninterface Result {\n  pSelectedIndices: number;\n  selectedSize: number;\n  pSelectedScores: number;\n  pValidOutputs: number;\n}\n/**\n * Parse the result of the c++ method, which has the shape equivalent to\n * `Result`.\n */\nexport function parseResultStruct(\n    backend: BackendWasm, resOffset: number): Result {\n  const result = new Int32Array(backend.wasm.HEAPU8.buffer, resOffset, 4);\n  const pSelectedIndices = result[0];\n  const selectedSize = result[1];\n  const pSelectedScores = result[2];\n  const pValidOutputs = result[3];\n  // Since the result was allocated on the heap, we have to delete it.\n  backend.wasm._free(resOffset);\n  return {pSelectedIndices, selectedSize, pSelectedScores, pValidOutputs};\n}\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, NonMaxSuppressionV4, NonMaxSuppressionV4Attrs, NonMaxSuppressionV4Inputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {parseResultStruct} from './NonMaxSuppression_util';\n\nlet wasmFunc: (\n    boxesId: number, scoresId: number, maxOutputSize: number,\n    iouThreshold: number, scoreThreshold: number,\n    padToMaxOutputSize: boolean) => number;\n\nfunction setup(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(\n      NonMaxSuppressionV4,\n      'number',  // Result*\n      [\n        'number',  // boxesId\n        'number',  // scoresId\n        'number',  // maxOutputSize\n        'number',  // iouThreshold\n        'number',  // scoreThreshold\n        'bool',    // padToMaxOutputSize\n      ]);\n}\n\nfunction nonMaxSuppressionV4(args: {\n  backend: BackendWasm,\n  inputs: NonMaxSuppressionV4Inputs,\n  attrs: NonMaxSuppressionV4Attrs\n}): TensorInfo[] {\n  const {backend, inputs, attrs} = args;\n  const {iouThreshold, maxOutputSize, scoreThreshold, padToMaxOutputSize} =\n      attrs;\n  const {boxes, scores} = inputs;\n\n  const boxesId = backend.dataIdMap.get(boxes.dataId).id;\n  const scoresId = backend.dataIdMap.get(scores.dataId).id;\n\n  const resOffset = wasmFunc(\n      boxesId, scoresId, maxOutputSize, iouThreshold, scoreThreshold,\n      padToMaxOutputSize);\n\n  const {pSelectedIndices, selectedSize, pSelectedScores, pValidOutputs} =\n      parseResultStruct(backend, resOffset);\n\n  // Since we are not using scores for V4, we have to delete it from the heap.\n  backend.wasm._free(pSelectedScores);\n\n  const selectedIndicesTensor =\n      backend.makeOutput([selectedSize], 'int32', pSelectedIndices);\n\n  const validOutputsTensor = backend.makeOutput([], 'int32', pValidOutputs);\n\n  return [selectedIndicesTensor, validOutputsTensor];\n}\n\nexport const nonMaxSuppressionV4Config: KernelConfig = {\n  kernelName: NonMaxSuppressionV4,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: nonMaxSuppressionV4 as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, NonMaxSuppressionV5, NonMaxSuppressionV5Attrs, NonMaxSuppressionV5Inputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {parseResultStruct} from './NonMaxSuppression_util';\n\nlet wasmFunc:\n    (boxesId: number, scoresId: number, maxOutputSize: number,\n     iouThreshold: number, scoreThreshold: number, softNmsSigma: number) =>\n        number;\n\nfunction setup(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(\n      NonMaxSuppressionV5,\n      'number',  // Result*\n      [\n        'number',  // boxesId\n        'number',  // scoresId\n        'number',  // maxOutputSize\n        'number',  // iouThreshold\n        'number',  // scoreThreshold\n        'number',  // softNmsSigma\n      ]);\n}\n\nfunction kernelFunc(args: {\n  backend: BackendWasm,\n  inputs: NonMaxSuppressionV5Inputs,\n  attrs: NonMaxSuppressionV5Attrs\n}): TensorInfo[] {\n  const {backend, inputs, attrs} = args;\n  const {iouThreshold, maxOutputSize, scoreThreshold, softNmsSigma} = attrs;\n  const {boxes, scores} = inputs;\n\n  const boxesId = backend.dataIdMap.get(boxes.dataId).id;\n  const scoresId = backend.dataIdMap.get(scores.dataId).id;\n\n  const resOffset = wasmFunc(\n      boxesId, scoresId, maxOutputSize, iouThreshold, scoreThreshold,\n      softNmsSigma);\n\n  const {pSelectedIndices, selectedSize, pSelectedScores, pValidOutputs} =\n      parseResultStruct(backend, resOffset);\n\n  // Since we are not using validOutputs for V5, we have to delete it from the\n  // heap.\n  backend.wasm._free(pValidOutputs);\n\n  const selectedIndicesTensor =\n      backend.makeOutput([selectedSize], 'int32', pSelectedIndices);\n  const selectedScoresTensor =\n      backend.makeOutput([selectedSize], 'float32', pSelectedScores);\n\n  return [selectedIndicesTensor, selectedScoresTensor];\n}\n\nexport const nonMaxSuppressionV5Config: KernelConfig = {\n  kernelName: NonMaxSuppressionV5,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: kernelFunc as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, OneHot, OneHotAttrs, OneHotInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmOneHot: (\n    indicesId: number, depth: number, onValue: number, offValue: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmOneHot = backend.wasm.cwrap(OneHot, null /* void */, [\n    'number',  // indices_id\n    'number',  // depth,\n    'number',  // onValue\n    'number',  // offValue\n    'number'   // out_id\n  ]);\n}\n\nfunction oneHot(\n    args: {inputs: OneHotInputs, attrs: OneHotAttrs, backend: BackendWasm}) {\n  const {inputs, backend, attrs} = args;\n  const {indices} = inputs;\n  const {dtype, depth, onValue, offValue} = attrs;\n\n  const out = backend.makeOutput([...indices.shape, depth], dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const indicesData = backend.dataIdMap.get(indices.dataId);\n  const indicesId = indicesData.id;\n\n  wasmOneHot(indicesId, depth, onValue, offValue, outId);\n\n  return out;\n}\n\nexport const oneHotConfig: KernelConfig = {\n  kernelName: OneHot,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: oneHot as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, NotEqual} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const notEqualConfig: KernelConfig =\n    createBinaryKernelConfig(NotEqual, supportsFullBroadcast, 'bool');\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, OnesLike, OnesLikeInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nfunction onesLike(args: {inputs: OnesLikeInputs, backend: BackendWasm}) {\n  const {inputs: {x}, backend} = args;\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.fill(1);\n  return out;\n}\n\nexport const onesLikeConfig: KernelConfig = {\n  kernelName: OnesLike,\n  backendName: 'wasm',\n  kernelFunc: onesLike as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Pack, PackAttrs, PackInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\nimport {BackendWasm} from '../backend_wasm';\n\nimport {concat} from './Concat';\nimport {expandDims} from './ExpandDims';\n\nexport function pack(\n    args: {inputs: PackInputs, backend: BackendWasm, attrs: PackAttrs}):\n    TensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {axis} = attrs;\n\n  if (inputs.length === 1) {\n    return expandDims(\n        {inputs: {input: inputs[0]}, backend, attrs: {dim: axis}});\n  }\n\n  const shape = inputs[0].shape;\n  const dtype = inputs[0].dtype;\n\n  inputs.forEach(t => {\n    util.assertShapesMatch(\n        shape, t.shape,\n        'All tensors passed to stack must have matching shapes');\n    util.assert(\n        dtype === t.dtype,\n        () => 'All tensors passed to stack must have matching dtypes');\n  });\n\n  const intermediateTensorInfos: TensorInfo[] = [];\n  const expandedTensors = inputs.map(t => {\n    const expandedT =\n        expandDims({inputs: {input: t}, backend, attrs: {dim: axis}});\n    intermediateTensorInfos.push(expandedT);\n    return expandedT;\n  });\n\n  const result = concat({inputs: expandedTensors, backend, attrs: {axis}});\n\n  intermediateTensorInfos.forEach(t => backend.disposeData(t.dataId));\n\n  return result;\n}\n\nexport const packConfig: KernelConfig = {\n  kernelName: Pack,\n  backendName: 'wasm',\n  kernelFunc: pack as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, PadV2, PadV2Attrs, PadV2Inputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {fill} from './Fill';\n\nimport {CppDType} from './types';\n\nlet wasmPadV2: (\n    xId: number, xShapeBytes: Uint8Array, xShapeLength: number, xDtype: number,\n    prePaddingsBytes: Uint8Array, postPaddingsBytes: Uint8Array,\n    constantValue: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmPadV2 = backend.wasm.cwrap(PadV2, null /* void */, [\n    'number',  // xId\n    'array',   // x.shape\n    'number',  // x.shape.length\n    'number',  // x.dtype\n    'array',   // pre-paddings\n    'array',   // post-paddings\n    'number',  // constantValue\n    'number',  // outId\n  ]);\n}\n\nfunction pad(\n    args: {inputs: PadV2Inputs, backend: BackendWasm, attrs: PadV2Attrs}) {\n  const {inputs: {x}, backend, attrs: {paddings, constantValue}} = args;\n\n  const outShape = paddings.map(\n      (p, i) => p[0] /* beforePad */ + x.shape[i] + p[1] /* afterPad */);\n\n  if (util.sizeFromShape(x.shape) === 0) {\n    // Short-circuit the computation, since x doesn't have value, only\n    // the shape is used to compute output shape to pad.\n    return fill({\n      backend,\n      attrs: {shape: outShape, value: constantValue, dtype: x.dtype}\n    });\n  }\n\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const out = backend.makeOutput(outShape, x.dtype);\n  const outTensorData = backend.dataIdMap.get(out.dataId);\n  const outId = outTensorData.id;\n\n  const xShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n\n  const prePaddingsFlat = paddings.map(padTuple => padTuple[0]);\n  const postPaddingsFlat = paddings.map(padTuple => padTuple[1]);\n  const prePaddingsBytes =\n      new Uint8Array(new Int32Array(prePaddingsFlat).buffer);\n  const postPaddingsBytes =\n      new Uint8Array(new Int32Array(postPaddingsFlat).buffer);\n\n  wasmPadV2(\n      xId, xShapeBytes, x.shape.length, CppDType[x.dtype], prePaddingsBytes,\n      postPaddingsBytes, constantValue, outId);\n  return out;\n}\n\nexport const padV2Config: KernelConfig = {\n  kernelName: PadV2,\n  backendName: 'wasm',\n  kernelFunc: pad as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Prelu, PreluInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {cast} from './Cast';\n\nlet wasmPrelu: (xId: number, weightsId: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmPrelu = backend.wasm.cwrap(Prelu, null /* void */, [\n    'number',  // x_id\n    'number',  // weights_id\n    'number'   // out_id\n  ]);\n}\n\nfunction prelu(args: {inputs: PreluInputs, backend: BackendWasm}) {\n  const {inputs, backend} = args;\n  const {x, alpha} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const weightsId = backend.dataIdMap.get(alpha.dataId).id;\n\n  let inputId = xId;\n  const input = x;\n  let castedInput = input;\n  if (input.dtype !== 'float32') {\n    castedInput = cast({backend, inputs: {x}, attrs: {dtype: 'float32'}});\n    inputId = backend.dataIdMap.get(castedInput.dataId).id;\n  }\n\n  const out = backend.makeOutput(x.shape, 'float32');\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmPrelu(inputId, weightsId, outId);\n\n  if (input.dtype !== 'float32') {\n    backend.disposeData(castedInput.dataId);\n  }\n  return out;\n}\n\nexport const preluConfig: KernelConfig = {\n  kernelName: Prelu,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: prelu as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Pow} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = false;\nexport const powConfig: KernelConfig =\n    createBinaryKernelConfig(Pow, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Prod, ProdAttrs, ProdInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\n\nimport {CppDType} from './types';\n\nlet wasmProd: (\n    xId: number, reduceSize: number,\n    dtype: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmProd = backend.wasm.cwrap(Prod, null /*void*/, [\n    'number',\n    'number',\n    'number',\n    'number'\n  ]);\n}\n\nfunction prod(args: {\n  backend: BackendWasm,\n  inputs: ProdInputs,\n  attrs: ProdAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  let reductionAxes = axes;\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    if (transposedId !== xId) {\n      // transpose was not a no-op. We will need to dispose of this\n      // once we are done.\n      input = transposed;\n      inputId = transposedId;\n      reductionAxes = backend_util.getInnerMostAxes(\n          reductionAxes.length, input.shape.length);\n    }\n  }\n\n  backend_util.assertAxesAreInnerMostDims(\n      'prod', reductionAxes, input.shape.length);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, reductionAxes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, input.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmProd(inputId, reduceSize, CppDType[out.dtype], outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const prodConfig: KernelConfig = {\n  kernelName: Prod,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: prod as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, ResizeBilinear, ResizeBilinearAttrs, ResizeBilinearInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {cast} from './Cast';\n\nlet wasmResizeBilinear: (\n    xId: number, batch: number, oldHeight: number, oldWidth: number,\n    numChannels: number, newHeight: number, newWidth: number,\n    alignCorners: number, halfPixelCenters: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmResizeBilinear = backend.wasm.cwrap(ResizeBilinear, null /*void*/, [\n    'number',  // xId\n    'number',  // batch\n    'number',  // oldHeight\n    'number',  // oldWidth\n    'number',  // numChannels\n    'number',  // newHeight\n    'number',  // newWidth\n    'number',  // alignCorners\n    'number',  // halfPixelCenters\n    'number'   // outId\n  ]);\n}\n\nfunction resizeBilinear(args: {\n  backend: BackendWasm,\n  inputs: ResizeBilinearInputs,\n  attrs: ResizeBilinearAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n\n  const {images} = inputs;\n  const {alignCorners, halfPixelCenters, size} = attrs;\n  const [newHeight, newWidth] = size;\n\n  const [batch, oldHeight, oldWidth, numChannels] = images.shape;\n  const outShape = [batch, newHeight, newWidth, numChannels];\n\n  let xData = backend.dataIdMap.get(images.dataId);\n  let castedData;\n  if (xData.dtype !== 'float32') {\n    castedData =\n        cast({backend, inputs: {x: images}, attrs: {dtype: 'float32'}});\n    xData = backend.dataIdMap.get(castedData.dataId);\n  }\n  const xId = xData.id;\n\n  const out = backend.makeOutput(outShape, 'float32');\n  if (util.sizeFromShape(images.shape) === 0) {\n    return out;\n  }\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  wasmResizeBilinear(\n      xId, batch, oldHeight, oldWidth, numChannels, newHeight, newWidth,\n      alignCorners ? 1 : 0, halfPixelCenters ? 1 : 0, outId);\n\n  if (castedData != null) {\n    backend.disposeData(castedData.dataId);\n  }\n\n  return out;\n}\n\nexport const resizeBilinearConfig: KernelConfig = {\n  kernelName: ResizeBilinear,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: resizeBilinear as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Range, RangeAttrs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {rangeImplCPU} from '../kernel_utils/shared';\n\nexport const range =\n    (args: {backend: BackendWasm, attrs: RangeAttrs}): TensorInfo => {\n      const {backend, attrs} = args;\n      const {start, stop, step, dtype} = attrs;\n      const values = rangeImplCPU(start, stop, step, dtype);\n\n      const out = backend.makeOutput([values.length], dtype);\n      const outVals = backend.typedArrayFromHeap(out);\n      outVals.set(values);\n      return out;\n    };\n\nexport const rangeConfig: KernelConfig = {\n  kernelName: Range,\n  backendName: 'wasm',\n  kernelFunc: range as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {DataTypeMap, util} from '@tensorflow/tfjs-core';\n\nexport function rangeImpl(\n    start: number, stop: number, step: number,\n    dtype: 'float32'|'int32'): DataTypeMap['float32' | 'int32'] {\n  const sameStartStop = start === stop;\n  const increasingRangeNegativeStep = start < stop && step < 0;\n  const decreasingRangePositiveStep = stop < start && step > 1;\n\n  if (sameStartStop || increasingRangeNegativeStep ||\n      decreasingRangePositiveStep) {\n    return util.makeZerosTypedArray(0, dtype);\n  }\n\n  const numElements = Math.abs(Math.ceil((stop - start) / step));\n  const values = util.makeZerosTypedArray(numElements, dtype);\n\n  if (stop < start && step === 1) {\n    // Auto adjust the step's sign if it hasn't been set\n    // (or was set to 1)\n    step = -1;\n  }\n\n  values[0] = start;\n  for (let i = 1; i < values.length; i++) {\n    values[i] = values[i - 1] + step;\n  }\n  return values;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, RealDiv} from '@tensorflow/tfjs-core';\n\nimport {createBinaryKernelConfig} from './binary_kernel';\n\nconst supportsFullBroadcast = true;\nexport const realDivConfig: KernelConfig =\n    createBinaryKernelConfig(RealDiv, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Relu} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const reluConfig: KernelConfig = createUnaryKernelConfig(Relu);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Relu6} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const relu6Config: KernelConfig = createUnaryKernelConfig(Relu6);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {\n  KernelConfig,\n  KernelFunc,\n  ResizeNearestNeighbor,\n  ResizeNearestNeighborAttrs,\n  ResizeNearestNeighborInputs,\n  TensorInfo,\n  util,\n} from '@tensorflow/tfjs-core';\n\nimport { BackendWasm } from '../backend_wasm';\n\nimport { cast } from './Cast';\n\nlet wasmResizeNearestNeighbor: (\n  xId: number,\n  batch: number,\n  oldHeight: number,\n  oldWidth: number,\n  numChannels: number,\n  newHeight: number,\n  newWidth: number,\n  alignCorners: number,\n  halfPixelCenters: number,\n  outId: number\n) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmResizeNearestNeighbor = backend.wasm.cwrap(\n    ResizeNearestNeighbor,\n    null /*void*/,\n    [\n      'number', // xId\n      'number', // batch\n      'number', // oldHeight\n      'number', // oldWidth\n      'number', // numChannels\n      'number', // newHeight\n      'number', // newWidth\n      'number', // alignCorners\n      'number', // halfPixelCenters\n      'number', // outId\n    ]\n  );\n}\n\nfunction resizeNearestNeighbor(args: {\n  backend: BackendWasm;\n  inputs: ResizeNearestNeighborInputs;\n  attrs: ResizeNearestNeighborAttrs;\n}): TensorInfo {\n  const { backend, inputs, attrs } = args;\n  const { images } = inputs;\n  const { alignCorners, halfPixelCenters, size } = attrs;\n\n  const [newHeight, newWidth] = size;\n\n  const [batch, oldHeight, oldWidth, numChannels] = images.shape;\n  const outShape = [batch, newHeight, newWidth, numChannels];\n\n  const out = backend.makeOutput(outShape, 'float32');\n  if (util.sizeFromShape(images.shape) === 0) {\n    return out;\n  }\n\n  let xData = backend.dataIdMap.get(images.dataId);\n  let castedData;\n  if (xData.dtype !== 'float32') {\n    castedData = cast({\n      backend,\n      inputs: { x: images },\n      attrs: { dtype: 'float32' },\n    });\n    xData = backend.dataIdMap.get(castedData.dataId);\n  }\n\n  const xId = xData.id;\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  wasmResizeNearestNeighbor(\n    xId,\n    batch,\n    oldHeight,\n    oldWidth,\n    numChannels,\n    newHeight,\n    newWidth,\n    alignCorners ? 1 : 0,\n    halfPixelCenters ? 1 : 0,\n    outId\n  );\n\n  if (castedData != null) {\n    backend.disposeData(castedData.dataId);\n  }\n\n  return out;\n}\n\nexport const resizeNearestNeighborConfig: KernelConfig = {\n  kernelName: ResizeNearestNeighbor,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: resizeNearestNeighbor as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Reverse, ReverseAttrs, ReverseInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {identity} from './Identity';\nimport {reshape} from './Reshape';\n\nlet wasmReverse: (\n    xId: number, axes: Uint8Array, axesLength: number, outShape: Uint8Array,\n    outShapeLength: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmReverse = backend.wasm.cwrap(Reverse, null, [\n    'number',  // x_id\n    'array',   // axes\n    'number',  // axes_length\n    'array',   // out_shape\n    'number',  // out_shape_length\n    'number'   // out_id\n  ]);\n}\n\nexport function reverse(\n    args: {inputs: ReverseInputs, backend: BackendWasm, attrs: ReverseAttrs}):\n    TensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {dims} = attrs;\n\n  const axes = util.parseAxisParam(dims, x.shape);\n\n  if (x.shape.length === 0) {\n    return identity({inputs: {x}, backend});\n  }\n\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const axesBytes = new Uint8Array(new Int32Array(axes).buffer);\n  const outShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n\n  wasmReverse(\n      xId, axesBytes, axes.length, outShapeBytes, x.shape.length, outId);\n\n  const reshaped =\n      reshape({inputs: {x: out}, attrs: {shape: x.shape}, backend});\n\n  backend.disposeData(out.dataId);\n  return reshaped;\n}\n\nexport const reverseConfig: KernelConfig = {\n  kernelName: Reverse,\n  backendName: 'wasm',\n  kernelFunc: reverse as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, RotateWithOffset, RotateWithOffsetAttrs, RotateWithOffsetInputs, TensorInfo} from '@tensorflow/tfjs-core';\nimport {backend_util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmRotate: (\n    xId: number, batch: number, imageHeight: number, imageWidth: number,\n    numChannels: number, radians: number, centerX: number, centerY: number,\n    fillBytes: Uint8Array, fillLength: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmRotate = backend.wasm.cwrap(RotateWithOffset, null /* void */, [\n    'number',  // xId\n    'number',  // batch\n    'number',  // imageHeight\n    'number',  // imageWidth\n    'number',  // numChannels\n    'number',  // radians\n    'number',  // centerX\n    'number',  // centerY\n    'array',   // fillBytes\n    'number',  // fillLength\n    'number',  // outId\n  ]);\n}\n\nexport function rotateWithOffset(args: {\n  inputs: RotateWithOffsetInputs,\n  backend: BackendWasm,\n  attrs: RotateWithOffsetAttrs\n}): TensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {image} = inputs;\n  const {radians, fillValue, center} = attrs;\n\n  const out = backend.makeOutput(image.shape, image.dtype);\n  const imageId = backend.dataIdMap.get(image.dataId).id;\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const [batch, imageHeight, imageWidth, numChannels] = image.shape;\n\n  const [centerX, centerY] =\n      backend_util.getImageCenter(center, imageHeight, imageWidth);\n\n  const fillIsBlack = fillValue === 0;\n  const fullOpacityValue = 255;\n\n  const fillValues = typeof fillValue === 'number' ?\n      [fillValue, fillValue, fillValue, fillIsBlack ? 0 : fullOpacityValue] :\n      [...fillValue, fullOpacityValue];\n  const fillBytes = new Uint8Array(new Int32Array(fillValues).buffer);\n\n  wasmRotate(\n      imageId, batch, imageHeight, imageWidth, numChannels, radians, centerX,\n      centerY, fillBytes, fillValues.length, outId);\n  return out;\n}\n\nexport const rotateWithOffsetConfig: KernelConfig = {\n  kernelName: RotateWithOffset,\n  backendName: 'wasm',\n  kernelFunc: rotateWithOffset as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, scatter_util, ScatterNd, ScatterNdAttrs, ScatterNdInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmScatterNd: (\n    indicesId: number, updatesId: number, dtype: CppDType, sliceRank: number,\n    numUpdates: number, sliceSize: number, strides: Uint8Array,\n    outputSize: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmScatterNd = backend.wasm.cwrap(ScatterNd, null /*void*/, [\n    'number',  // indicesId\n    'number',  // updatesId\n    'number',  // dtype\n    'number',  // sliceRank\n    'number',  // numUpdates\n    'number',  // sliceSize\n    'array',   // strides\n    'number',  // outputSize\n    'number'   // outId\n  ]);\n}\n\nfunction scatterNd(\n    args:\n        {backend: BackendWasm, inputs: ScatterNdInputs, attrs: ScatterNdAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {indices, updates} = inputs;\n  const {shape} = attrs;\n\n  const out = backend.makeOutput(shape, updates.dtype);\n  if (util.sizeFromShape(shape) === 0) {\n    return out;\n  }\n\n  const {sliceRank, numUpdates, sliceSize, strides, outputSize} =\n      scatter_util.calculateShapes(updates, indices, shape);\n\n  const indicesData = backend.dataIdMap.get(indices.dataId);\n  const indicesId = indicesData.id;\n\n  const updatesData = backend.dataIdMap.get(updates.dataId);\n  const updatesId = updatesData.id;\n\n  const stridesBytes = new Uint8Array(new Int32Array(strides).buffer);\n\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmScatterNd(\n      indicesId, updatesId, CppDType[updates.dtype], sliceRank, numUpdates,\n      sliceSize, stridesBytes, outputSize, outId);\n\n  return out;\n}\n\nexport const scatterNdConfig: KernelConfig = {\n  kernelName: ScatterNd,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: scatterNd as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Round} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\n\nexport const roundConfig: KernelConfig = createUnaryKernelConfig(Round);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Rsqrt} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const rsqrtConfig: KernelConfig = createUnaryKernelConfig(Rsqrt);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Select, SelectInputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmSelect: (\n    conditionId: number, tId: number, eId: number, offset: number,\n    outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmSelect = backend.wasm.cwrap('SelectV2', null, [\n    'number',  // conditionId\n    'number',  // tId\n    'number',  // eId\n    'number',  // offset\n    'number',  // outId\n  ]);\n}\n\nfunction select(args: {inputs: SelectInputs, backend: BackendWasm}) {\n  const {inputs, backend} = args;\n  const {condition, t, e} = inputs;\n\n  const conditionId = backend.dataIdMap.get(condition.dataId).id;\n  const tId = backend.dataIdMap.get(t.dataId).id;\n  const eId = backend.dataIdMap.get(e.dataId).id;\n  const out = backend.makeOutput(t.shape, t.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const cRank = condition.shape.length;\n  const tRank = t.shape.length;\n\n  const offset = cRank === 0 || cRank > 1 || tRank === 1 ?\n      1 :\n      util.sizeFromShape(t.shape.slice(1));\n\n  wasmSelect(conditionId, tId, eId, offset, outId);\n  return out;\n}\n\nexport const selectConfig: KernelConfig = {\n  kernelName: Select,\n  backendName: 'wasm',\n  kernelFunc: select as {} as KernelFunc,\n  setupFunc: setup\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Sigmoid, SigmoidInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmFunc: (xId: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(Sigmoid, null /* void */, ['number', 'number']);\n}\n\nfunction sigmoid(args: {backend: BackendWasm, inputs: SigmoidInputs}):\n    TensorInfo {\n  const {backend, inputs: {x}} = args;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  // Short-circuit zero-sized tensors.\n  if (util.sizeFromShape(out.shape) === 0) {\n    return out;\n  }\n\n  wasmFunc(xId, outId);\n  return out;\n}\n\nexport const sigmoidConfig: KernelConfig = {\n  kernelName: 'Sigmoid',\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sigmoid as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Softmax, SoftmaxAttrs, SoftmaxInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmFunc: (xId: number, outId: number, channels: number, batch: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmFunc = backend.wasm.cwrap(Softmax, null /* void */, [\n    'number',  // xId\n    'number',  // outId\n    'number',  // channels\n    'number'   // batch\n  ]);\n}\n\nfunction softmax(\n    args: {backend: BackendWasm, inputs: SoftmaxInputs, attrs: SoftmaxAttrs}):\n    TensorInfo {\n  const {backend, inputs: {logits}, attrs: {dim}} = args;\n  const xId = backend.dataIdMap.get(logits.dataId).id;\n  const out = backend.makeOutput(logits.shape, logits.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const channels = logits.shape[dim];\n  const batch = util.sizeFromShape(logits.shape) / channels;\n\n  // Short-circuit zero-sized tensors.\n  if (util.sizeFromShape(out.shape) === 0) {\n    return out;\n  }\n\n  wasmFunc(xId, outId, channels, batch);\n  return out;\n}\n\nexport const softmaxConfig: KernelConfig = {\n  kernelName: Softmax,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: softmax as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Sin} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const sinConfig: KernelConfig = createUnaryKernelConfig(Sin);\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, ReshapeAttrs, ReshapeInputs, SpaceToBatchND, SpaceToBatchNDAttrs, SpaceToBatchNDInputs, TensorInfo, TransposeAttrs, TransposeInputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {padV2Config} from './PadV2';\nimport {reshape} from './Reshape';\nimport {transpose} from './Transpose';\n\nfunction spaceToBatchND(args: {\n  inputs: SpaceToBatchNDInputs,\n  backend: BackendWasm,\n  attrs: SpaceToBatchNDAttrs\n}) {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const {blockShape, paddings} = attrs;\n\n  const prod = util.sizeFromShape(blockShape);\n\n  const completePaddings: Array<[number, number]> = [[0, 0]];\n  completePaddings.push(...(paddings as Array<[number, number]>));\n\n  for (let i = 1 + blockShape.length; i < x.shape.length; ++i) {\n    completePaddings.push([0, 0]);\n  }\n\n  const paddedX = padV2Config.kernelFunc({\n    inputs: {x},\n    backend,\n    attrs: {paddings: completePaddings, constantValue: 0}\n  }) as TensorInfo;\n\n  const reshapedPaddedShape =\n      backend_util.getReshaped(paddedX.shape, blockShape, prod, false);\n\n  const permutedReshapedPaddedPermutation = backend_util.getPermuted(\n      reshapedPaddedShape.length, blockShape.length, false);\n\n  const flattenShape =\n      backend_util.getReshapedPermuted(paddedX.shape, blockShape, prod, false);\n\n  const reshapeInputs: ReshapeInputs = {x: paddedX};\n  const reshapeAttrs: ReshapeAttrs = {shape: reshapedPaddedShape};\n  const paddedXReshaped =\n      reshape({inputs: reshapeInputs, backend, attrs: reshapeAttrs});\n\n  const transposeInputs: TransposeInputs = {x: paddedXReshaped};\n  const transposeAttrs:\n      TransposeAttrs = {perm: permutedReshapedPaddedPermutation};\n  const paddedXT =\n      transpose({inputs: transposeInputs, backend, attrs: transposeAttrs});\n\n  const resultReshapeInputs: ReshapeInputs = {x: paddedXT};\n  const resultReshapeAttrs: ReshapeAttrs = {shape: flattenShape};\n  const result = reshape(\n      {inputs: resultReshapeInputs, backend, attrs: resultReshapeAttrs});\n\n  backend.disposeData(paddedX.dataId);\n  backend.disposeData(paddedXReshaped.dataId);\n  backend.disposeData(paddedXT.dataId);\n\n  return result;\n}\n\nexport const spaceToBatchNDConfig: KernelConfig = {\n  kernelName: SpaceToBatchND,\n  backendName: 'wasm',\n  kernelFunc: spaceToBatchND as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, SparseFillEmptyRows, SparseFillEmptyRowsInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {slice} from './Slice';\n\nimport {CppDType} from './types';\n\nlet wasmSparseFillEmptyRows: (\n    indicesId: number, valuesId: number, valuesDType: number,\n    indicesCount: number, denseRows: number, rank: number,\n    defaultValueId: number, outputIndicesId: number, outputValuesId: number,\n    emptyRowIndicatorId: number, reverseIndexMapId: number,\n    exceptionValuesId: number) => number;\n\nexport function setup(backend: BackendWasm): void {\n  wasmSparseFillEmptyRows =\n      backend.wasm.cwrap('SparseFillEmptyRows', 'number', [\n        'number',  // indicesId\n        'number',  // valuesId\n        'number',  // valuesDType\n        'number',  // indicesCount\n        'number',  // denseRows\n        'number',  // rank\n        'number',  // defaultValueId\n        'number',  // outputIndicesId\n        'number',  // outputValuesId\n        'number',  // emptyRowIndicatorId\n        'number',  // reverseIndexMapId\n        'number',  // exceptionValuesId\n      ]);\n}\n\nexport function sparseFillEmptyRows(args: {\n  backend: BackendWasm,\n  inputs: SparseFillEmptyRowsInputs,\n}): [TensorInfo, TensorInfo, TensorInfo, TensorInfo] {\n  const {backend, inputs} = args;\n  const {indices, values, denseShape, defaultValue} = inputs;\n\n  const indicesCount = indices.shape[0];\n  const rank = indices.shape[1];\n  const denseRows = backend.readSync(denseShape.dataId)[0] as number;\n\n  // Set output size to maximum possible and resize later (actual result\n  // might be smaller).\n  const maxOutputIndicesShape = [indicesCount + denseRows, rank];\n\n  const indicesId = backend.dataIdMap.get(indices.dataId).id;\n  const valuesId = backend.dataIdMap.get(values.dataId).id;\n  const defaultValueId = backend.dataIdMap.get(defaultValue.dataId).id;\n\n  const outputIndices =\n      backend.makeOutput(maxOutputIndicesShape, indices.dtype);\n  const outputIndicesId = backend.dataIdMap.get(outputIndices.dataId).id;\n\n  const outputValues =\n      backend.makeOutput(maxOutputIndicesShape.slice(0, 1), values.dtype);\n  const outputValuesId = backend.dataIdMap.get(outputValues.dataId).id;\n\n  const emptyRowIndicator = backend.makeOutput([denseRows], 'bool');\n  const emptyRowIndicatorId =\n      backend.dataIdMap.get(emptyRowIndicator.dataId).id;\n\n  const reverseIndexMap = backend.makeOutput([indicesCount], indices.dtype);\n  const reverseIndexMapId = backend.dataIdMap.get(reverseIndexMap.dataId).id;\n\n  const exceptionValues = backend.makeOutput([4], 'int32');\n  const exceptionValuesId = backend.dataIdMap.get(exceptionValues.dataId).id;\n\n  const outputRows = wasmSparseFillEmptyRows(\n      indicesId, valuesId, CppDType[values.dtype], indicesCount, denseRows,\n      rank, defaultValueId, outputIndicesId, outputValuesId,\n      emptyRowIndicatorId, reverseIndexMapId, exceptionValuesId);\n\n  const exceptionValuesArray =\n      backend.readSync(exceptionValues.dataId) as Int32Array;\n\n  let exceptionMessage: string;\n  switch (exceptionValuesArray[0]) {\n    case 1: {\n      exceptionMessage =\n          backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(\n              exceptionValuesArray[1]);\n      break;\n    }\n    case 2: {\n      exceptionMessage =\n          backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2]);\n      break;\n    }\n    case 3:\n      exceptionMessage =\n          backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2],\n              exceptionValuesArray[3]);\n      break;\n    default:\n      exceptionMessage = '';\n  }\n\n  backend.disposeData(exceptionValues.dataId);\n  if (exceptionMessage) {\n    backend.disposeData(outputIndices.dataId);\n    backend.disposeData(outputValues.dataId);\n    backend.disposeData(emptyRowIndicator.dataId);\n    backend.disposeData(reverseIndexMap.dataId);\n    throw new Error(exceptionMessage);\n  }\n\n  let resizedIndices = outputIndices;\n  let resizedValues = outputValues;\n  // Overestimated output size.\n  if (outputRows !== maxOutputIndicesShape[0]) {\n    resizedIndices = slice({\n      inputs: {x: outputIndices},\n      attrs: {begin: 0, size: [outputRows, rank]},\n      backend\n    });\n    resizedValues = slice({\n      inputs: {x: outputValues},\n      attrs: {begin: 0, size: outputRows},\n      backend\n    });\n    backend.disposeData(outputIndices.dataId);\n    backend.disposeData(outputValues.dataId);\n  }\n\n  return [resizedIndices, resizedValues, emptyRowIndicator, reverseIndexMap];\n}\n\nexport const sparseFillEmptyRowsConfig: KernelConfig = {\n  kernelName: SparseFillEmptyRows,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sparseFillEmptyRows as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, SparseReshape, SparseReshapeInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmSparseReshape: (\n    inputIndicesId: number, inputShapeId: number, newShapeId: number,\n    nnz: number, newIndicesId: number, outputShapeId: number,\n    exceptionValuesId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmSparseReshape = backend.wasm.cwrap(SparseReshape, null /*void*/, [\n    'number',  // inputIndicesId\n    'number',  // inputShapeId\n    'number',  // newShapeId\n    'number',  // nnz\n    'number',  // newIndicesId\n    'number',  // outputShapeId\n    'number',  // exceptionValuesId\n  ]);\n}\n\nfunction sparseReshape(args: {\n  backend: BackendWasm,\n  inputs: SparseReshapeInputs,\n}): [TensorInfo, TensorInfo] {\n  const {backend, inputs} = args;\n  const {inputIndices, inputShape, newShape} = inputs;\n\n  if (inputIndices.shape.length !== 2) {\n    throw new Error(`Input indices should be a matrix but received shape\n        ${inputIndices.shape}`);\n  }\n  if (inputShape.shape.length !== 1) {\n    throw new Error(`Input shape should be a vector but received shape\n        ${inputShape.shape}`);\n  }\n  if (newShape.shape.length !== 1) {\n    throw new Error(\n        `Target shape should be a vector but received shape ${newShape.shape}`);\n  }\n\n  const inputIndicesId = backend.dataIdMap.get(inputIndices.dataId).id;\n  const inputShapeId = backend.dataIdMap.get(inputShape.dataId).id;\n  const newShapeId = backend.dataIdMap.get(newShape.dataId).id;\n\n  const nnz = inputIndices.shape[0];\n  const outputRank = util.sizeFromShape(newShape.shape);\n\n  const newIndices = backend.makeOutput([nnz, outputRank], inputIndices.dtype);\n  const newIndicesId = backend.dataIdMap.get(newIndices.dataId).id;\n\n  const outputShape = backend.makeOutput([outputRank], newShape.dtype);\n  const outputShapeId = backend.dataIdMap.get(outputShape.dataId).id;\n\n  const exceptionValues = backend.makeOutput([3], 'int32');\n  const exceptionValuesId = backend.dataIdMap.get(exceptionValues.dataId).id;\n\n  wasmSparseReshape(\n      inputIndicesId, inputShapeId, newShapeId, nnz, newIndicesId,\n      outputShapeId, exceptionValuesId);\n\n  const exceptionValuesArray =\n      backend.readSync(exceptionValues.dataId) as Int32Array;\n\n  let exceptionMessage: string;\n  switch (exceptionValuesArray[0]) {\n    case 0: {\n      exceptionMessage =\n          backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2]);\n      break;\n    }\n    case 1: {\n      exceptionMessage =\n          backend_util.getSparseReshapeNegativeOutputDimErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2]);\n      break;\n    }\n    case 2:\n      exceptionMessage =\n          backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();\n      break;\n    case 3: {\n      const inputShapeValues =\n          Array.from(backend.readSync(inputShape.dataId) as Int32Array),\n            outputShapeValues =\n                Array.from(backend.readSync(outputShape.dataId) as Int32Array);\n      exceptionMessage =\n          backend_util.getSparseReshapeInputOutputMultipleErrorMessage(\n              inputShapeValues, outputShapeValues);\n      break;\n    }\n    case 4: {\n      const inputShapeValues =\n          Array.from(backend.readSync(inputShape.dataId) as Int32Array),\n            outputShapeValues =\n                Array.from(backend.readSync(outputShape.dataId) as Int32Array);\n      exceptionMessage =\n          backend_util.getSparseReshapeInputOutputMismatchErrorMessage(\n              inputShapeValues, outputShapeValues);\n      break;\n    }\n    default:\n      exceptionMessage = '';\n  }\n\n  backend.disposeData(exceptionValues.dataId);\n  if (exceptionMessage) {\n    backend.disposeData(newIndices.dataId);\n    backend.disposeData(outputShape.dataId);\n    throw new Error(exceptionMessage);\n  }\n\n  return [newIndices, outputShape];\n}\n\nexport const sparseReshapeConfig: KernelConfig = {\n  kernelName: SparseReshape,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sparseReshape as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, SparseSegmentMeanInputs, SparseSegmentSumInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmSparseSegmentReduction: (\n    dataId: number, dtype: number, numRow: number, indicesId: number,\n    segmentIdsId: number, outputId: number, exceptionValuesId: number,\n    isMean: boolean, defaultValue: number) => void;\n\nexport function setup(backend: BackendWasm): void {\n  wasmSparseSegmentReduction =\n      backend.wasm.cwrap('SparseSegmentReduction', null /*void*/, [\n        'number',  // dataId\n        'number',  // dtype\n        'number',  // numRow\n        'number',  // indicesId\n        'number',  // segmentIdsId\n        'number',  // outputId\n        'number',  // exceptionValuesId,\n        'number',  // isMean\n        'number',  // defaultValue\n      ]);\n}\n\nexport function sparseSegmentReduction(\n    args: {\n      backend: BackendWasm,\n      inputs: SparseSegmentSumInputs|SparseSegmentMeanInputs,\n    },\n    isMean: boolean): TensorInfo {\n  const {backend, inputs} = args;\n  const {data, indices, segmentIds} = inputs;\n\n  const numIndices = indices.shape[0];\n  const segmentIdsBack =\n      (backend.readSync(segmentIds.dataId, numIndices - 1, numIndices) as\n       Int32Array)[0];\n  const lastSegmentIdPlusOne = numIndices > 0 ? segmentIdsBack + 1 : 0;\n  const outputRows = lastSegmentIdPlusOne;\n\n  if (outputRows < 0) {\n    throw (new Error(\n        backend_util\n            .getSparseSegmentReductionNegativeSegmentIdsErrorMessage()));\n  }\n\n  const outputShape = data.shape.slice();\n  outputShape[0] = outputRows;\n\n  const dataId = backend.dataIdMap.get(data.dataId).id;\n  const indicesId = backend.dataIdMap.get(indices.dataId).id;\n  const segmentIdsId = backend.dataIdMap.get(segmentIds.dataId).id;\n\n  const output = backend.makeOutput(outputShape, data.dtype);\n  const outputId = backend.dataIdMap.get(output.dataId).id;\n\n  const exceptionValues = backend.makeOutput([4], 'int32');\n  const exceptionValuesId = backend.dataIdMap.get(exceptionValues.dataId).id;\n\n  wasmSparseSegmentReduction(\n      dataId, CppDType[data.dtype], data.shape[0], indicesId, segmentIdsId,\n      outputId, exceptionValuesId, isMean, 0);\n\n  const exceptionValuesArray =\n      backend.readSync(exceptionValues.dataId) as Int32Array;\n\n  let exceptionMessage: string;\n  switch (exceptionValuesArray[0]) {\n    case 0: {\n      exceptionMessage =\n          backend_util\n              .getSparseSegmentReductionNegativeSegmentIdsErrorMessage();\n      break;\n    }\n    case 1: {\n      exceptionMessage =\n          backend_util\n              .getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();\n      break;\n    }\n    case 2:\n      exceptionMessage =\n          backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2]);\n      break;\n    case 3:\n      exceptionMessage =\n          backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(\n              exceptionValuesArray[1], exceptionValuesArray[2],\n              exceptionValuesArray[3]);\n      break;\n    default:\n      exceptionMessage = '';\n  }\n\n  backend.disposeData(exceptionValues.dataId);\n  if (exceptionMessage) {\n    backend.disposeData(output.dataId);\n    throw new Error(exceptionMessage);\n  }\n\n  return output;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, SparseSegmentMean, SparseSegmentMeanInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {setup, sparseSegmentReduction} from './SparseSegmentReduction';\n\nfunction sparseSegmentMean(args: {\n  backend: BackendWasm,\n  inputs: SparseSegmentMeanInputs,\n}): TensorInfo {\n  return sparseSegmentReduction(args, true);\n}\n\nexport const sparseSegmentMeanConfig: KernelConfig = {\n  kernelName: SparseSegmentMean,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sparseSegmentMean as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, SparseSegmentSum, SparseSegmentSumInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {setup, sparseSegmentReduction} from './SparseSegmentReduction';\n\nfunction sparseSegmentSum(args: {\n  backend: BackendWasm,\n  inputs: SparseSegmentSumInputs,\n}): TensorInfo {\n  return sparseSegmentReduction(args, false);\n}\n\nexport const sparseSegmentSumConfig: KernelConfig = {\n  kernelName: SparseSegmentSum,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sparseSegmentSum as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, SplitV, SplitVAttrs, SplitVInputs, util} from '@tensorflow/tfjs-core';\nimport {backend_util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {slice} from './Slice';\n\nexport function splitV(\n    args: {inputs: SplitVInputs, attrs: SplitVAttrs, backend: BackendWasm}) {\n  const {inputs, attrs, backend} = args;\n  const {x} = inputs;\n  const {numOrSizeSplits, axis} = attrs;\n\n  const $axis = util.parseAxisParam(axis, x.shape)[0];\n\n  const splitSizes = backend_util.prepareSplitSize(x, numOrSizeSplits, $axis);\n  const begin = new Array(x.shape.length).fill(0);\n  const size = x.shape.slice();\n  return splitSizes.map(s => {\n    const xSliceSize = [...size];\n    xSliceSize[$axis] = s;\n    const xSlice =\n        slice({inputs: {x}, attrs: {begin, size: xSliceSize}, backend});\n    begin[$axis] += s;\n    return xSlice;\n  });\n}\n\nexport const splitVConfig: KernelConfig = {\n  kernelName: SplitV,\n  backendName: 'wasm',\n  kernelFunc: splitV as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Step, StepAttrs, StepInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmStep: (xId: number, alpha: number, dtype: number, outId: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmStep = backend.wasm.cwrap(Step, null /*void*/, [\n    'number',  // x_id\n    'number',  // alpha\n    'number',  // dtype\n    'number',  // out_id\n  ]);\n}\n\nfunction step(\n    args: {backend: BackendWasm, inputs: StepInputs, attrs: StepAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {alpha} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmStep(xId, alpha, CppDType[x.dtype], outId);\n  return out;\n}\n\nexport const stepConfig: KernelConfig = {\n  kernelName: Step,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: step as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, Sqrt} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const sqrtConfig: KernelConfig = createUnaryKernelConfig(Sqrt);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Square} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const squareConfig: KernelConfig = createUnaryKernelConfig(Square);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, SquaredDifference} from '@tensorflow/tfjs-core';\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = true;\nexport const squaredDifferenceConfig: KernelConfig =\n    createBinaryKernelConfig(SquaredDifference, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, slice_util, StridedSlice, StridedSliceAttrs, StridedSliceInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {reshape} from './Reshape';\nimport {slice} from './Slice';\n\nlet wasmStridedSlice: (\n    xId: number, xStridesBytes: Uint8Array, xRank: number,\n    beginBytes: Uint8Array, endBytes: Uint8Array, stridesBytes: Uint8Array,\n    outShapeBytes: Uint8Array, outStridesBytes: Uint8Array,\n    outShapeLength: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmStridedSlice = backend.wasm.cwrap(StridedSlice, null /*void*/, [\n    'number',  // xId\n    'array',   // xStrides\n    'number',  // xRank\n    'array',   // beginBytes\n    'array',   // endBytes\n    'array',   // stridesBytes\n    'array',   // outShapeBytes\n    'array',   // outStridesBytes\n    'number',  // outShapeLength\n    'number',  // outId\n  ]);\n}\n\nexport function stridedSlice(args: {\n  backend: BackendWasm,\n  inputs: StridedSliceInputs,\n  attrs: StridedSliceAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {x} = inputs;\n\n  const {\n    begin,\n    end,\n    strides,\n    beginMask,\n    endMask,\n    ellipsisMask,\n    newAxisMask,\n    shrinkAxisMask\n  } = attrs;\n\n  const {\n    finalShapeSparse,\n    finalShape,\n    isIdentity,\n    sliceDim0,\n    isSimpleSlice,\n    begin: $begin,\n    end: $end,\n    strides: $strides\n  } =\n      slice_util.sliceInfo(\n          x.shape, begin, end, strides, beginMask, endMask, ellipsisMask,\n          newAxisMask, shrinkAxisMask);\n\n  let result;\n\n  if (isIdentity) {\n    // Optimization #1, slice is a no-op plus reshape\n    result = reshape({inputs: {x}, backend, attrs: {shape: finalShape}});\n  } else if (sliceDim0 || isSimpleSlice) {\n    // Optimization #2, slice is memory contiguous (only occurs in dim 0)\n    util.assert(\n        x.shape.length >= 1,\n        () => `Input must have rank at least 1, got: ${x.shape.length}`);\n\n    const size = slice_util.computeOutShape($begin, $end, $strides);\n    // To tolerate begin[0] > end[0] (a 0-output slice), we min(begin, end).\n    const sliced = slice({inputs: {x}, backend, attrs: {begin: $begin, size}});\n    result =\n        reshape({inputs: {x: sliced}, backend, attrs: {shape: finalShape}});\n    backend.disposeData(sliced.dataId);\n  } else {\n    const out = backend.makeOutput(finalShapeSparse, 'float32');\n\n    const xId = backend.dataIdMap.get(x.dataId).id;\n    const xStridesBytes =\n        new Uint8Array(new Int32Array(util.computeStrides(x.shape)).buffer);\n    const beginBytes = new Uint8Array(new Int32Array($begin).buffer);\n    const endBytes = new Uint8Array(new Int32Array($end).buffer);\n    const stridesBytes = new Uint8Array(new Int32Array($strides).buffer);\n\n    const outputShapeBytes =\n        new Uint8Array(new Int32Array(finalShapeSparse).buffer);\n    const outStridesBytes = new Uint8Array(\n        new Int32Array(util.computeStrides(finalShapeSparse)).buffer);\n    const outId = backend.dataIdMap.get(out.dataId).id;\n\n    wasmStridedSlice(\n        xId, xStridesBytes, x.shape.length, beginBytes, endBytes, stridesBytes,\n        outputShapeBytes, outStridesBytes, finalShapeSparse.length, outId);\n\n    result = reshape({inputs: {x: out}, backend, attrs: {shape: finalShape}});\n\n    backend.disposeData(out.dataId);\n  }\n\n  return result;\n}\n\nexport const stridedSliceConfig: KernelConfig = {\n  kernelName: StridedSlice,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: stridedSlice as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, StringNGrams, StringNGramsAttrs, StringNGramsInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {stringNGramsImplCPU} from '../kernel_utils/shared';\n\nfunction stringNGrams(args: {\n  backend: BackendWasm,\n  inputs: StringNGramsInputs,\n  attrs: StringNGramsAttrs\n}): [TensorInfo, TensorInfo] {\n  const {backend, inputs, attrs} = args;\n  const {data, dataSplits} = inputs;\n  const {\n    separator,\n    nGramWidths,\n    leftPad,\n    rightPad,\n    padWidth,\n    preserveShortSequences,\n  } = attrs;\n\n  const $data = backend.readSync(data.dataId) as Uint8Array[];\n  const $dataSplits = backend.readSync(dataSplits.dataId) as Int32Array;\n\n  const [nGrams, nGramsSplits] = stringNGramsImplCPU(\n      $data, $dataSplits, separator, nGramWidths, leftPad, rightPad, padWidth,\n      preserveShortSequences);\n\n  const nGramsOut = backend.makeOutput([nGrams.length], 'string');\n  const nGramsOutData = backend.dataIdMap.get(nGramsOut.dataId);\n  nGramsOutData.stringBytes = nGrams;\n\n  const nGramsSplitsOut = backend.makeOutput(dataSplits.shape, 'int32');\n  const nGramsSplitsOutVals = backend.typedArrayFromHeap(nGramsSplitsOut);\n  nGramsSplitsOutVals.set(nGramsSplits);\n\n  return [nGramsOut, nGramsSplitsOut];\n}\n\nexport const stringNGramsConfig: KernelConfig = {\n  kernelName: StringNGrams,\n  backendName: 'wasm',\n  kernelFunc: stringNGrams as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, StringSplit, StringSplitAttrs, StringSplitInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {stringSplitImplCPU} from '../kernel_utils/shared';\n\nfunction stringSplit(args: {\n  backend: BackendWasm,\n  inputs: StringSplitInputs,\n  attrs: StringSplitAttrs\n}): [TensorInfo, TensorInfo, TensorInfo] {\n  const {backend, inputs, attrs} = args;\n  const {input, delimiter} = inputs;\n  const {skipEmpty} = attrs;\n\n  const inputVals = backend.readSync(input.dataId) as Uint8Array[];\n  const delimiterVals = backend.readSync(delimiter.dataId) as Uint8Array[];\n\n  const [indices, values, shape] =\n      stringSplitImplCPU(inputVals, delimiterVals[0], skipEmpty);\n  const outputSize = values.length;\n\n  const indicesOut = backend.makeOutput([outputSize, 2], 'int32');\n  const indicesOutVals = backend.typedArrayFromHeap(indicesOut);\n  indicesOutVals.set(indices);\n\n  const valuesOut = backend.makeOutput([outputSize], 'string');\n  const valuesOutData = backend.dataIdMap.get(valuesOut.dataId);\n  valuesOutData.stringBytes = values;\n\n  const shapeOut = backend.makeOutput([2], 'int32');\n  const shapeOutVals = backend.typedArrayFromHeap(shapeOut);\n  shapeOutVals.set(shape);\n\n  return [indicesOut, valuesOut, shapeOut];\n}\n\nexport const stringSplitConfig: KernelConfig = {\n  kernelName: StringSplit,\n  backendName: 'wasm',\n  kernelFunc: stringSplit as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, StringToHashBucketFast, StringToHashBucketFastAttrs, StringToHashBucketFastInputs, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {stringToHashBucketFastImplCPU} from '../kernel_utils/shared';\n\nfunction stringToHashBucketFast(args: {\n  backend: BackendWasm,\n  inputs: StringToHashBucketFastInputs,\n  attrs: StringToHashBucketFastAttrs\n}): TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {input} = inputs;\n  const {numBuckets} = attrs;\n\n  const inputVals = backend.readSync(input.dataId) as Uint8Array[];\n\n  const values = stringToHashBucketFastImplCPU(inputVals, numBuckets);\n\n  const out = backend.makeOutput(input.shape, 'int32');\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.set(values);\n  return out;\n}\n\nexport const stringToHashBucketFastConfig: KernelConfig = {\n  kernelName: StringToHashBucketFast,\n  backendName: 'wasm',\n  kernelFunc: stringToHashBucketFast as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, KernelConfig, KernelFunc, Sum, SumAttrs, SumInputs, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {permuteAxesAndTranspose} from './kernel_utils';\nimport {CppDType} from './types';\n\nlet wasmSum: (xId: number, reduceSize: number, dtype: number, outId: number) =>\n    void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmSum = backend.wasm.cwrap(Sum, null /*void*/, [\n    'number',  // input_id\n    'number',  // reduce_size\n    'number',  // dtype\n    'number',  // out_id\n  ]);\n}\n\nfunction sum(args: {backend: BackendWasm, inputs: SumInputs, attrs: SumAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {axis, keepDims} = attrs;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  let inputId = xId;\n  let input = x;\n\n  const {transposed, axes, originalAxes, inputWasTransposed} =\n      permuteAxesAndTranspose(x, axis, backend);\n\n  let reductionAxes = axes;\n  if (inputWasTransposed) {\n    const transposedId = backend.dataIdMap.get(transposed.dataId).id;\n    if (transposedId !== xId) {\n      // transpose was not a no-op. We will need to dispose of this\n      // once we are done.\n      input = transposed;\n      inputId = transposedId;\n      reductionAxes = backend_util.getInnerMostAxes(\n          reductionAxes.length, input.shape.length);\n    }\n  }\n\n  backend_util.assertAxesAreInnerMostDims(\n      'sum', reductionAxes, input.shape.length);\n  const [outShape, reduceShape] =\n      backend_util.computeOutAndReduceShapes(input.shape, reductionAxes);\n  const reduceSize = util.sizeFromShape(reduceShape);\n\n  const out = backend.makeOutput(outShape, input.dtype);\n  if (util.sizeFromShape(input.shape) !== 0) {\n    const outId = backend.dataIdMap.get(out.dataId).id;\n    wasmSum(inputId, reduceSize, CppDType[out.dtype], outId);\n  }\n\n  if (inputWasTransposed) {\n    // dispose of the transposed tensor.\n    backend.disposeData(transposed.dataId);\n  }\n\n  if (keepDims) {\n    // reshape\n    const newShape = backend_util.expandShapeToKeepDim(out.shape, originalAxes);\n    out.shape = newShape;\n  }\n\n  return out;\n}\n\nexport const sumConfig: KernelConfig = {\n  kernelName: Sum,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: sum as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {TypedArray, util} from '@tensorflow/tfjs-core';\n\nexport function stringToHashBucketFastImpl(\n    input: Uint8Array[], numBuckets: number): TypedArray {\n  const output = util.getArrayFromDType('int32', input.length) as TypedArray;\n\n  for (let i = 0; i < input.length; ++i) {\n    output[i] =\n        util.fingerPrint64(input[i]).modulo(numBuckets).getLowBitsUnsigned();\n  }\n\n  return output;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Sub} from '@tensorflow/tfjs-core';\nimport {createBinaryKernelConfig} from './binary_kernel';\nconst supportsFullBroadcast = true;\nexport const subConfig: KernelConfig =\n    createBinaryKernelConfig(Sub, supportsFullBroadcast);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, Tile, TileAttrs, TileInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {CppDType} from './types';\n\nlet wasmTile: (\n    xId: number, xShape: Uint8Array, xShapeSize: number, newShape: Uint8Array,\n    newShapeSize: number, dtype: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmTile = backend.wasm.cwrap(Tile, null /* void */, [\n    'number',  // x_id\n    'array',   // x_shape\n    'number',  // x_shape.length\n    'array',   // new_shape\n    'number',  // new_shape.length\n    'number'   // out_id\n  ]);\n}\n\nfunction tile(\n    args: {inputs: TileInputs, backend: BackendWasm, attrs: TileAttrs}) {\n  const {inputs, backend, attrs} = args;\n  const {x} = inputs;\n  const xId = backend.dataIdMap.get(x.dataId).id;\n  const {reps} = attrs;\n\n  const newShape: number[] = new Array(x.shape.length);\n  for (let i = 0; i < newShape.length; i++) {\n    newShape[i] = x.shape[i] * reps[i];\n  }\n  const xShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n  const newShapeBytes = new Uint8Array(new Int32Array(newShape).buffer);\n\n  const out = backend.makeOutput(newShape, x.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n  wasmTile(\n      xId, xShapeBytes, x.shape.length, newShapeBytes, newShape.length,\n      CppDType[out.dtype], outId);\n  return out;\n}\n\nexport const tileConfig: KernelConfig = {\n  kernelName: Tile,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: tile as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Tan} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const tanConfig: KernelConfig = createUnaryKernelConfig(Tan);\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {KernelConfig, Tanh} from '@tensorflow/tfjs-core';\n\nimport {createUnaryKernelConfig} from './unary_kernel';\nexport const tanhConfig: KernelConfig = createUnaryKernelConfig(Tanh);\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, TensorInfo, TopK, TopKAttrs, TopKInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\nimport {CppDType} from './types';\n\nlet wasmTopK: (\n    xId: number, xShapeBytes: Uint8Array, xShapeLength: number,\n    xDtype: CppDType, k: number, sorted: boolean, outValuesId: number,\n    outIndicesId: number) => void;\n\nfunction setup(backend: BackendWasm) {\n  wasmTopK = backend.wasm.cwrap(TopK, null /* void */, [\n    'number',  // xId\n    'array',   // x.shape\n    'number',  // x.shape.length\n    'number',  // x.dtype\n    'number',  // k\n    'bool',    // sorted\n    'number',  // outValuesId\n    'number',  // outIndicesId\n  ]);\n}\n\nexport const topk:\n    (args: {inputs: TopKInputs, backend: BackendWasm, attrs: TopKAttrs}) =>\n        TensorInfo[] | TensorInfo = ({inputs, backend, attrs}) => {\n          const {x} = inputs;\n          const {k, sorted} = attrs;\n\n          const xId = backend.dataIdMap.get(x.dataId).id;\n          const xShapeBytes = new Uint8Array(new Int32Array(x.shape).buffer);\n          const outputShape = x.shape.slice();\n          outputShape[outputShape.length - 1] = k;\n          const outValues = backend.makeOutput(outputShape, x.dtype);\n          const outValuesId = backend.dataIdMap.get(outValues.dataId).id;\n          const outIndices = backend.makeOutput(outputShape, 'int32');\n          const outIndicesId = backend.dataIdMap.get(outIndices.dataId).id;\n\n          wasmTopK(\n              xId, xShapeBytes, x.shape.length, CppDType[x.dtype], k, sorted,\n              outValuesId, outIndicesId);\n\n          return [outValues, outIndices];\n        };\n\nexport const topKConfig: KernelConfig = {\n  kernelName: TopK,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: topk as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, TensorInfo, Transform, TransformAttrs, TransformInputs, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nlet wasmTransform: (\n    imageId: number, transformsId: number, isBatchTransform: boolean,\n    batch: number, outHeight: number, outWidth: number, numChannels: number,\n    imageWidth: number, imageHeight: number, inputStrides: Uint8Array,\n    inputStridesLength: number, outputStrides: Uint8Array,\n    outputStridesLength: number, interpolationModeId: number,\n    fillModeId: number, fillValue: number, outId: number) => void;\n\nfunction setup(backend: BackendWasm): void {\n  wasmTransform = backend.wasm.cwrap(Transform, null /*void*/, [\n    'number',  // imageId\n    'number',  // transformsId\n    'bool',    // isBatchTransform\n    'number',  // batch\n    'number',  // outHeight\n    'number',  // outWidth\n    'number',  // numChannels\n    'number',  // imageWidth\n    'number',  // imageHeight\n    'array',   // inputStrides\n    'number',  // inputStridesLength\n    'array',   // outputStrides\n    'number',  // outputStridesLength\n    'number',  // interpolationModeId\n    'number',  // fillModeId\n    'number',  // fillValue\n    'number'   // outId\n  ]);\n}\n\nfunction transform(\n    args:\n        {backend: BackendWasm, inputs: TransformInputs, attrs: TransformAttrs}):\n    TensorInfo {\n  const {backend, inputs, attrs} = args;\n  const {image, transforms} = inputs;\n  const {interpolation, fillMode, fillValue, outputShape} = attrs;\n\n  const [batch, imageHeight, imageWidth, numChannels] = image.shape;\n  const [outHeight, outWidth] =\n      outputShape != null ? outputShape : [imageHeight, imageWidth];\n  const outShape =\n      [batch, outHeight, outWidth,\n       numChannels] as [number, number, number, number];\n  const inputStrides =\n      new Uint8Array(new Int32Array(util.computeStrides(image.shape)).buffer);\n\n  const outputStrides =\n      new Uint8Array(new Int32Array(util.computeStrides(outShape)).buffer);\n\n  const out = backend.makeOutput(outShape, image.dtype);\n  const outId = backend.dataIdMap.get(out.dataId).id;\n\n  const imageData = backend.dataIdMap.get(image.dataId);\n  const imageId = imageData.id;\n\n  const transformsData = backend.dataIdMap.get(transforms.dataId);\n  const transformsId = transformsData.id;\n\n  const interpolationModeId = interpolation === 'nearest' ? 1 : 2;\n  let fillModeId;\n  switch (fillMode) {\n    case 'constant':\n      fillModeId = 1;\n      break;\n    case 'reflect':\n      fillModeId = 2;\n      break;\n    case 'wrap':\n      fillModeId = 3;\n      break;\n    case 'nearest':\n      fillModeId = 4;\n      break;\n    default:\n      fillModeId = 1;\n      break;\n  }\n\n  wasmTransform(\n      imageId, transformsId, (transforms.shape[0] > 1), batch, outHeight,\n      outWidth, numChannels, imageWidth, imageHeight, inputStrides,\n      image.shape.length - 1, outputStrides, outShape.length - 1,\n      interpolationModeId, fillModeId, fillValue, outId);\n\n  return out;\n}\n\nexport const transformConfig: KernelConfig = {\n  kernelName: Transform,\n  backendName: 'wasm',\n  setupFunc: setup,\n  kernelFunc: transform as {} as KernelFunc\n};\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, TensorInfo, Unpack, UnpackAttrs, UnpackInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nimport {slice} from './Slice';\n\nfunction unpack(\n    args: {inputs: UnpackInputs, backend: BackendWasm, attrs: UnpackAttrs}):\n    TensorInfo[] {\n  const {inputs, backend, attrs} = args;\n  const {value} = inputs;\n  let {axis} = attrs;\n\n  if (axis < 0) {\n    axis += value.shape.length;\n  }\n\n  const numOutputs = value.shape[axis];\n  const rank = value.shape.length;\n  const outShape: number[] = new Array(rank - 1);\n  let outIndex = 0;\n  for (let i = 0; i < rank; i++) {\n    if (i !== axis) {\n      outShape[outIndex++] = value.shape[i];\n    }\n  }\n  const outs: TensorInfo[] = new Array(numOutputs);\n  const begin = new Array(rank).fill(0);\n  const size = value.shape.slice();\n  size[axis] = 1;\n  for (let i = 0; i < outs.length; i++) {\n    begin[axis] = i;\n    outs[i] = slice({inputs: {x: value}, attrs: {begin, size}, backend});\n  }\n  return outs.map(({dataId, dtype}) => ({dataId, dtype, shape: outShape}));\n}\n\nexport const unpackConfig: KernelConfig = {\n  kernelName: Unpack,\n  backendName: 'wasm',\n  kernelFunc: unpack as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {KernelConfig, KernelFunc, ZerosLike, ZerosLikeInputs} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm} from '../backend_wasm';\n\nfunction zerosLike(args: {inputs: ZerosLikeInputs, backend: BackendWasm}) {\n  const {inputs: {x}, backend} = args;\n  const out = backend.makeOutput(x.shape, x.dtype);\n  const outVals = backend.typedArrayFromHeap(out);\n  outVals.fill(0);\n  return out;\n}\n\nexport const zerosLikeConfig: KernelConfig = {\n  kernelName: ZerosLike,\n  backendName: 'wasm',\n  kernelFunc: zerosLike as {} as KernelFunc,\n};\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n// We explicitly import the modular kernels so they get registered in the\n// global registry when we compile the library. A modular build would replace\n// the contents of this file and import only the kernels that are needed.\nimport {KernelConfig, registerKernel} from '@tensorflow/tfjs-core';\n\nimport {_fusedMatMulConfig} from './kernels/_FusedMatMul';\nimport {absConfig} from './kernels/Abs';\nimport {addConfig} from './kernels/Add';\nimport {addNConfig} from './kernels/AddN';\nimport {allConfig} from './kernels/All';\nimport {anyConfig} from './kernels/Any';\nimport {argMaxConfig} from './kernels/ArgMax';\nimport {avgPoolConfig} from './kernels/AvgPool';\nimport {batchMatMulConfig} from './kernels/BatchMatMul';\nimport {batchToSpaceNDConfig} from './kernels/BatchToSpaceND';\nimport {castConfig} from './kernels/Cast';\nimport {ceilConfig} from './kernels/Ceil';\nimport {clipByValueConfig} from './kernels/ClipByValue';\nimport {concatConfig} from './kernels/Concat';\nimport {conv2DConfig} from './kernels/Conv2D';\nimport {conv2DBackpropInputConfig} from './kernels/Conv2DBackpropInput';\nimport {cosConfig} from './kernels/Cos';\nimport {coshConfig} from './kernels/Cosh';\nimport {cropAndResizeConfig} from './kernels/CropAndResize';\nimport {cumprodConfig} from './kernels/Cumprod';\nimport {cumsumConfig} from './kernels/Cumsum';\nimport {depthToSpaceConfig} from './kernels/DepthToSpace';\nimport {depthwiseConv2dNativeConfig} from './kernels/DepthwiseConv2dNative';\nimport {eluConfig} from './kernels/Elu';\nimport {equalConfig} from './kernels/Equal';\nimport {expConfig} from './kernels/Exp';\nimport {expandDimsConfig} from './kernels/ExpandDims';\nimport {fillConfig} from './kernels/Fill';\nimport {flipLeftRightConfig} from './kernels/FlipLeftRight';\nimport {floorConfig} from './kernels/Floor';\nimport {floorDivConfig} from './kernels/FloorDiv';\nimport {fusedBatchNormConfig} from './kernels/FusedBatchNorm';\nimport {fusedConv2DConfig} from './kernels/FusedConv2D';\nimport {fusedDepthwiseConv2DConfig} from './kernels/FusedDepthwiseConv2D';\nimport {gatherNdConfig} from './kernels/GatherNd';\nimport {gatherV2Config} from './kernels/GatherV2';\nimport {greaterConfig} from './kernels/Greater';\nimport {greaterEqualConfig} from './kernels/GreaterEqual';\nimport {identityConfig} from './kernels/Identity';\nimport {leakyReluConfig} from './kernels/LeakyRelu';\nimport {lessConfig} from './kernels/Less';\nimport {lessEqualConfig} from './kernels/LessEqual';\nimport {logConfig} from './kernels/Log';\nimport {logicalAndConfig} from './kernels/LogicalAnd';\nimport {logicalNotConfig} from './kernels/LogicalNot';\nimport {logicalOrConfig} from './kernels/LogicalOr';\nimport {logicalXorConfig} from './kernels/LogicalXor';\nimport {maxConfig} from './kernels/Max';\nimport {maximumConfig} from './kernels/Maximum';\nimport {maxPoolConfig} from './kernels/MaxPool';\nimport {meanConfig} from './kernels/Mean';\nimport {minConfig} from './kernels/Min';\nimport {minimumConfig} from './kernels/Minimum';\nimport {mirrorPadConfig} from './kernels/MirrorPad';\nimport {multiplyConfig} from './kernels/Multiply';\nimport {negConfig} from './kernels/Neg';\nimport {nonMaxSuppressionV3Config} from './kernels/NonMaxSuppressionV3';\nimport {nonMaxSuppressionV4Config} from './kernels/NonMaxSuppressionV4';\nimport {nonMaxSuppressionV5Config} from './kernels/NonMaxSuppressionV5';\nimport {notEqualConfig} from './kernels/NotEqual';\nimport {oneHotConfig} from './kernels/OneHot';\nimport {onesLikeConfig} from './kernels/OnesLike';\nimport {packConfig} from './kernels/Pack';\nimport {padV2Config} from './kernels/PadV2';\nimport {powConfig} from './kernels/Pow';\nimport {preluConfig} from './kernels/Prelu';\nimport {prodConfig} from './kernels/Prod';\nimport {rangeConfig} from './kernels/Range';\nimport {realDivConfig} from './kernels/RealDiv';\nimport {reluConfig} from './kernels/Relu';\nimport {relu6Config} from './kernels/Relu6';\nimport {reshapeConfig} from './kernels/Reshape';\nimport {resizeBilinearConfig} from './kernels/ResizeBilinear';\nimport {resizeNearestNeighborConfig} from './kernels/ResizeNearestNeighbor';\nimport {reverseConfig} from './kernels/Reverse';\nimport {rotateWithOffsetConfig} from './kernels/RotateWithOffset';\nimport {roundConfig} from './kernels/Round';\nimport {rsqrtConfig} from './kernels/Rsqrt';\nimport {scatterNdConfig} from './kernels/ScatterNd';\nimport {selectConfig} from './kernels/Select';\nimport {sigmoidConfig} from './kernels/Sigmoid';\nimport {sinConfig} from './kernels/Sin';\nimport {sliceConfig} from './kernels/Slice';\nimport {softmaxConfig} from './kernels/Softmax';\nimport {spaceToBatchNDConfig} from './kernels/SpaceToBatchND';\nimport {sparseFillEmptyRowsConfig} from './kernels/SparseFillEmptyRows';\nimport {sparseReshapeConfig} from './kernels/SparseReshape';\nimport {sparseSegmentMeanConfig} from './kernels/SparseSegmentMean';\nimport {sparseSegmentSumConfig} from './kernels/SparseSegmentSum';\nimport {splitVConfig} from './kernels/SplitV';\nimport {sqrtConfig} from './kernels/Sqrt';\nimport {squareConfig} from './kernels/Square';\nimport {squaredDifferenceConfig} from './kernels/SquaredDifference';\nimport {stepConfig} from './kernels/Step';\nimport {stridedSliceConfig} from './kernels/StridedSlice';\nimport {stringNGramsConfig} from './kernels/StringNGrams';\nimport {stringSplitConfig} from './kernels/StringSplit';\nimport {stringToHashBucketFastConfig} from './kernels/StringToHashBucketFast';\nimport {subConfig} from './kernels/Sub';\nimport {sumConfig} from './kernels/Sum';\nimport {tanConfig} from './kernels/Tan';\nimport {tanhConfig} from './kernels/Tanh';\nimport {tileConfig} from './kernels/Tile';\nimport {topKConfig} from './kernels/TopK';\nimport {transformConfig} from './kernels/Transform';\nimport {transposeConfig} from './kernels/Transpose';\nimport {unpackConfig} from './kernels/Unpack';\nimport {zerosLikeConfig} from './kernels/ZerosLike';\n\n// List all kernel configs here\nconst kernelConfigs: KernelConfig[] = [\n  _fusedMatMulConfig,\n  absConfig,\n  addConfig,\n  addNConfig,\n  allConfig,\n  anyConfig,\n  argMaxConfig,\n  avgPoolConfig,\n  batchMatMulConfig,\n  batchToSpaceNDConfig,\n  castConfig,\n  ceilConfig,\n  clipByValueConfig,\n  concatConfig,\n  conv2DConfig,\n  conv2DBackpropInputConfig,\n  cosConfig,\n  coshConfig,\n  cropAndResizeConfig,\n  cumprodConfig,\n  cumsumConfig,\n  depthToSpaceConfig,\n  depthwiseConv2dNativeConfig,\n  eluConfig,\n  equalConfig,\n  expConfig,\n  expandDimsConfig,\n  fillConfig,\n  flipLeftRightConfig,\n  floorConfig,\n  floorDivConfig,\n  fusedBatchNormConfig,\n  fusedConv2DConfig,\n  fusedDepthwiseConv2DConfig,\n  gatherNdConfig,\n  gatherV2Config,\n  greaterConfig,\n  greaterEqualConfig,\n  identityConfig,\n  leakyReluConfig,\n  lessConfig,\n  lessEqualConfig,\n  logConfig,\n  logicalAndConfig,\n  logicalNotConfig,\n  logicalOrConfig,\n  logicalXorConfig,\n  maxConfig,\n  maximumConfig,\n  maxPoolConfig,\n  meanConfig,\n  minConfig,\n  minimumConfig,\n  mirrorPadConfig,\n  multiplyConfig,\n  negConfig,\n  nonMaxSuppressionV3Config,\n  nonMaxSuppressionV4Config,\n  nonMaxSuppressionV5Config,\n  notEqualConfig,\n  oneHotConfig,\n  onesLikeConfig,\n  packConfig,\n  padV2Config,\n  powConfig,\n  preluConfig,\n  prodConfig,\n  rangeConfig,\n  realDivConfig,\n  reluConfig,\n  relu6Config,\n  reshapeConfig,\n  resizeBilinearConfig,\n  resizeNearestNeighborConfig,\n  reverseConfig,\n  rotateWithOffsetConfig,\n  roundConfig,\n  rsqrtConfig,\n  scatterNdConfig,\n  selectConfig,\n  sigmoidConfig,\n  sinConfig,\n  sliceConfig,\n  softmaxConfig,\n  spaceToBatchNDConfig,\n  sparseFillEmptyRowsConfig,\n  sparseReshapeConfig,\n  sparseSegmentMeanConfig,\n  sparseSegmentSumConfig,\n  splitVConfig,\n  sqrtConfig,\n  squareConfig,\n  squaredDifferenceConfig,\n  stepConfig,\n  stridedSliceConfig,\n  stringNGramsConfig,\n  stringSplitConfig,\n  stringToHashBucketFastConfig,\n  subConfig,\n  sumConfig,\n  tanConfig,\n  tanhConfig,\n  tileConfig,\n  topKConfig,\n  transformConfig,\n  transposeConfig,\n  unpackConfig,\n  zerosLikeConfig\n];\n\nfor (const kernelConfig of kernelConfigs) {\n  registerKernel(kernelConfig);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {env} from '@tensorflow/tfjs-core';\n\nconst ENV = env();\n\n/**\n * True if SIMD is supported.\n */\n// From: https://github.com/GoogleChromeLabs/wasm-feature-detect\nENV.registerFlag('WASM_HAS_SIMD_SUPPORT', async () => {\n  try {\n    // This typed array passed in to WebAssembly.validate is WebAssembly binary\n    // code. In this case it is a small program that contains SIMD\n    // instructions.\n    return WebAssembly.validate(new Uint8Array([\n      0, 97, 115, 109, 1, 0, 0, 0, 1,  4, 1,   96, 0,  0, 3,\n      2, 1,  0,   10,  9, 1, 7, 0, 65, 0, 253, 15, 26, 11\n    ]));\n  } catch (e) {\n    return false;\n  }\n});\n\n/**\n * True if threads are supported.\n */\n// From: https://github.com/GoogleChromeLabs/wasm-feature-detect\nENV.registerFlag('WASM_HAS_MULTITHREAD_SUPPORT', async () => {\n  // TODO(annxingyuan): Enable node support once this is resolved:\n  // https://github.com/tensorflow/tfjs/issues/3830\n  if (ENV.get('IS_NODE')) {\n    return false;\n  }\n\n  try {\n    // Test for transferability of SABs (needed for Firefox)\n    // https://groups.google.com/forum/#!msg/mozilla.dev.platform/IHkBZlHETpA/dwsMNchWEQAJ\n    new MessageChannel().port1.postMessage(new SharedArrayBuffer(1));\n    // This typed array is a WebAssembly program containing threaded\n    // instructions.\n    return WebAssembly.validate(new Uint8Array([\n      0, 97, 115, 109, 1, 0,  0,  0, 1, 4, 1,  96, 0,   0,  3, 2, 1,  0, 5,\n      4, 1,  3,   1,   1, 10, 11, 1, 9, 0, 65, 0,  254, 16, 2, 0, 26, 11\n    ]));\n  } catch (e) {\n    return false;\n  }\n});\n","\nvar WasmBackendModuleThreadedSimd = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(WasmBackendModuleThreadedSimd) {\n  WasmBackendModuleThreadedSimd = WasmBackendModuleThreadedSimd || {};\n\nfunction GROWABLE_HEAP_I8(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAP8}function GROWABLE_HEAP_U8(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAPU8}function GROWABLE_HEAP_I16(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAP16}function GROWABLE_HEAP_I32(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAP32}function GROWABLE_HEAP_U32(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAPU32}function GROWABLE_HEAP_F32(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAPF32}function GROWABLE_HEAP_F64(){if(wasmMemory.buffer!=buffer){updateGlobalBufferAndViews(wasmMemory.buffer)}return HEAPF64}var Module=typeof WasmBackendModuleThreadedSimd!=\"undefined\"?WasmBackendModuleThreadedSimd:{};var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});var beforeListeners;if(typeof process!==\"undefined\"&&process.listeners){beforeListeners={uncaughtException:process.listeners(\"uncaughtException\"),unhandledRejection:process.listeners(\"unhandledRejection\")}}var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var ENVIRONMENT_IS_PTHREAD=Module[\"ENVIRONMENT_IS_PTHREAD\"]||false;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;function logExceptionOnExit(e){if(e instanceof ExitStatus)return;let toLog=e;err(\"exiting due to exception: \"+toLog)}if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require(\"path\").dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}var fs,nodePath;if(typeof require===\"function\"){fs=require(\"fs\");nodePath=require(\"path\")}read_=(filename,binary)=>{filename=nodePath[\"normalize\"](filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror)=>{filename=nodePath[\"normalize\"](filename);fs.readFile(filename,function(err,data){if(err)onerror(err);else onload(data.buffer)})};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"uncaughtException\",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process[\"on\"](\"unhandledRejection\",function(reason){throw reason});quit_=(status,toThrow)=>{if(keepRuntimeAlive()){process[\"exitCode\"]=status;throw toThrow}logExceptionOnExit(toThrow);process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"};let nodeWorkerThreads;try{nodeWorkerThreads=require(\"worker_threads\")}catch(e){console.error('The \"worker_threads\" module is not supported in this node.js build - perhaps a newer version is needed?');throw e}global.Worker=nodeWorkerThreads.Worker}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(typeof _scriptDir !== \"undefined\" && _scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}if(!ENVIRONMENT_IS_NODE){read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}if(ENVIRONMENT_IS_NODE){if(typeof performance==\"undefined\"){global.performance=require(\"perf_hooks\").performance}}var defaultPrint=console.log.bind(console);var defaultPrintErr=console.warn.bind(console);if(ENVIRONMENT_IS_NODE){defaultPrint=str=>fs.writeSync(1,str+\"\\n\");defaultPrintErr=str=>fs.writeSync(2,str+\"\\n\")}var out=Module[\"print\"]||defaultPrint;var err=Module[\"printErr\"]||defaultPrintErr;Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var POINTER_SIZE=4;var Atomics_load=Atomics.load;var Atomics_store=Atomics.store;var Atomics_compareExchange=Atomics.compareExchange;var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var wasmModule;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.buffer instanceof SharedArrayBuffer?heapOrArray.slice(idx,endPtr):heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(GROWABLE_HEAP_U8(),ptr,maxBytesToRead):\"\"}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,GROWABLE_HEAP_U8(),outPtr,maxBytesToWrite)}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;if(ENVIRONMENT_IS_PTHREAD){buffer=Module[\"buffer\"]}function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module[\"INITIAL_MEMORY\"]||16777216;if(ENVIRONMENT_IS_PTHREAD){wasmMemory=Module[\"wasmMemory\"];buffer=Module[\"buffer\"]}else{if(Module[\"wasmMemory\"]){wasmMemory=Module[\"wasmMemory\"]}else{wasmMemory=new WebAssembly.Memory({\"initial\":INITIAL_MEMORY/65536,\"maximum\":2147483648/65536,\"shared\":true});if(!(wasmMemory.buffer instanceof SharedArrayBuffer)){err(\"requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag\");if(ENVIRONMENT_IS_NODE){console.log(\"(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)\")}throw Error(\"bad memory\")}}}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(ENVIRONMENT_IS_PTHREAD)return;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(ENVIRONMENT_IS_PTHREAD)return;if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(ENVIRONMENT_IS_PTHREAD){postMessage({\"cmd\":\"onAbort\",\"arg\":what})}else{if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;wasmBinaryFile=\"tfjs-backend-wasm-threaded-simd.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={\"env\":asmLibraryArg,\"wasi_snapshot_preview1\":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module[\"asm\"]=exports;registerTLSInit(Module[\"asm\"][\"_emscripten_tls_init\"]);wasmTable=Module[\"asm\"][\"__indirect_function_table\"];addOnInit(Module[\"asm\"][\"__wasm_call_ctors\"]);wasmModule=module;if(!ENVIRONMENT_IS_PTHREAD){var numWorkersToLoad=PThread.unusedWorkers.length;PThread.unusedWorkers.forEach(function(w){PThread.loadWasmModuleToWorker(w,function(){if(!--numWorkersToLoad)removeRunDependency(\"wasm-instantiate\")})})}}if(!ENVIRONMENT_IS_PTHREAD){addRunDependency(\"wasm-instantiate\")}function receiveInstantiationResult(result){receiveInstance(result[\"instance\"],result[\"module\"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(function(instance){return instance}).then(receiver,function(reason){err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiationResult,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(receiveInstantiationResult)})})}else{return instantiateArrayBuffer(receiveInstantiationResult)}}if(Module[\"instantiateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);readyPromiseReject(e)}}instantiateAsync().catch(readyPromiseReject);return{}}var tempDouble;var tempI64;var ASM_CONSTS={};function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}function killThread(pthread_ptr){var worker=PThread.pthreads[pthread_ptr];delete PThread.pthreads[pthread_ptr];worker.terminate();__emscripten_thread_free_data(pthread_ptr);PThread.runningWorkers.splice(PThread.runningWorkers.indexOf(worker),1);worker.pthread_ptr=0}function cancelThread(pthread_ptr){var worker=PThread.pthreads[pthread_ptr];worker.postMessage({\"cmd\":\"cancel\"})}function cleanupThread(pthread_ptr){var worker=PThread.pthreads[pthread_ptr];assert(worker);PThread.returnWorkerToPool(worker)}function spawnThread(threadParams){var worker=PThread.getNewWorker();if(!worker){return 6}PThread.runningWorkers.push(worker);PThread.pthreads[threadParams.pthread_ptr]=worker;worker.pthread_ptr=threadParams.pthread_ptr;var msg={\"cmd\":\"run\",\"start_routine\":threadParams.startRoutine,\"arg\":threadParams.arg,\"pthread_ptr\":threadParams.pthread_ptr};worker.runPthread=()=>{msg.time=performance.now();worker.postMessage(msg,threadParams.transferList)};if(worker.loaded){worker.runPthread();delete worker.runPthread}return 0}var SYSCALLS={varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=GROWABLE_HEAP_I32()[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret}};function _proc_exit(code){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(1,1,code);EXITSTATUS=code;if(!keepRuntimeAlive()){PThread.terminateAllThreads();if(Module[\"onExit\"])Module[\"onExit\"](code);ABORT=true}quit_(code,new ExitStatus(code))}function exitJS(status,implicit){EXITSTATUS=status;if(!implicit){if(ENVIRONMENT_IS_PTHREAD){exitOnMainThread(status);throw\"unwind\"}else{}}_proc_exit(status)}var _exit=exitJS;function handleException(e){if(e instanceof ExitStatus||e==\"unwind\"){return EXITSTATUS}quit_(1,e)}var PThread={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){if(ENVIRONMENT_IS_PTHREAD){PThread.initWorker()}else{PThread.initMainThread()}},initMainThread:function(){var pthreadPoolSize=8;while(pthreadPoolSize--){PThread.allocateUnusedWorker()}},initWorker:function(){noExitRuntime=false},setExitStatus:function(status){EXITSTATUS=status},terminateAllThreads:function(){for(var worker of Object.values(PThread.pthreads)){PThread.returnWorkerToPool(worker)}for(var worker of PThread.unusedWorkers){worker.terminate()}PThread.unusedWorkers=[]},returnWorkerToPool:function(worker){var pthread_ptr=worker.pthread_ptr;delete PThread.pthreads[pthread_ptr];PThread.unusedWorkers.push(worker);PThread.runningWorkers.splice(PThread.runningWorkers.indexOf(worker),1);worker.pthread_ptr=0;__emscripten_thread_free_data(pthread_ptr)},receiveObjectTransfer:function(data){},threadInitTLS:function(){PThread.tlsInitFunctions.forEach(f=>f())},loadWasmModuleToWorker:function(worker,onFinishedLoading){worker.onmessage=e=>{var d=e[\"data\"];var cmd=d[\"cmd\"];if(worker.pthread_ptr)PThread.currentProxiedOperationCallerThread=worker.pthread_ptr;if(d[\"targetThread\"]&&d[\"targetThread\"]!=_pthread_self()){var targetWorker=PThread.pthreads[d.targetThread];if(targetWorker){targetWorker.postMessage(d,d[\"transferList\"])}else{err('Internal error! Worker sent a message \"'+cmd+'\" to target pthread '+d[\"targetThread\"]+\", but that thread no longer exists!\")}PThread.currentProxiedOperationCallerThread=undefined;return}if(cmd===\"processProxyingQueue\"){executeNotifiedProxyingQueue(d[\"queue\"])}else if(cmd===\"spawnThread\"){spawnThread(d)}else if(cmd===\"cleanupThread\"){cleanupThread(d[\"thread\"])}else if(cmd===\"killThread\"){killThread(d[\"thread\"])}else if(cmd===\"cancelThread\"){cancelThread(d[\"thread\"])}else if(cmd===\"loaded\"){worker.loaded=true;if(onFinishedLoading)onFinishedLoading(worker);if(worker.runPthread){worker.runPthread();delete worker.runPthread}}else if(cmd===\"print\"){out(\"Thread \"+d[\"threadId\"]+\": \"+d[\"text\"])}else if(cmd===\"printErr\"){err(\"Thread \"+d[\"threadId\"]+\": \"+d[\"text\"])}else if(cmd===\"alert\"){alert(\"Thread \"+d[\"threadId\"]+\": \"+d[\"text\"])}else if(d.target===\"setimmediate\"){worker.postMessage(d)}else if(cmd===\"onAbort\"){if(Module[\"onAbort\"]){Module[\"onAbort\"](d[\"arg\"])}}else if(cmd){err(\"worker sent an unknown command \"+cmd)}PThread.currentProxiedOperationCallerThread=undefined};worker.onerror=e=>{var message=\"worker sent an error!\";err(message+\" \"+e.filename+\":\"+e.lineno+\": \"+e.message);throw e};if(ENVIRONMENT_IS_NODE){worker.on(\"message\",function(data){worker.onmessage({data:data})});worker.on(\"error\",function(e){worker.onerror(e)});worker.on(\"detachedExit\",function(){})}worker.postMessage({\"cmd\":\"load\",\"urlOrBlob\":Module[\"mainScriptUrlOrBlob\"]||_scriptDir,\"wasmMemory\":wasmMemory,\"wasmModule\":wasmModule})},allocateUnusedWorker:function(){var pthreadMainJs=locateFile(\"tfjs-backend-wasm-threaded-simd.worker.js\");PThread.unusedWorkers.push(new Worker(pthreadMainJs))},getNewWorker:function(){if(PThread.unusedWorkers.length==0){PThread.allocateUnusedWorker();PThread.loadWasmModuleToWorker(PThread.unusedWorkers[0])}return PThread.unusedWorkers.pop()}};Module[\"PThread\"]=PThread;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module)}}function withStackSave(f){var stack=stackSave();var ret=f();stackRestore(stack);return ret}function demangle(func){return func}function demangleAll(text){var regex=/\\b_Z[\\w\\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:y+\" [\"+x+\"]\"})}function establishStackSpace(){var pthread_ptr=_pthread_self();var stackTop=GROWABLE_HEAP_I32()[pthread_ptr+44>>2];var stackSize=GROWABLE_HEAP_I32()[pthread_ptr+48>>2];var stackMax=stackTop-stackSize;_emscripten_stack_set_limits(stackTop,stackMax);stackRestore(stackTop)}Module[\"establishStackSpace\"]=establishStackSpace;function exitOnMainThread(returnCode){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(2,0,returnCode);try{_exit(returnCode)}catch(e){handleException(e)}}var wasmTableMirror=[];function getWasmTableEntry(funcPtr){var func=wasmTableMirror[funcPtr];if(!func){if(funcPtr>=wasmTableMirror.length)wasmTableMirror.length=funcPtr+1;wasmTableMirror[funcPtr]=func=wasmTable.get(funcPtr)}return func}function invokeEntryPoint(ptr,arg){var result=getWasmTableEntry(ptr)(arg);if(keepRuntimeAlive()){PThread.setExitStatus(result)}else{__emscripten_thread_exit(result)}}Module[\"invokeEntryPoint\"]=invokeEntryPoint;function jsStackTrace(){var error=new Error;if(!error.stack){try{throw new Error}catch(e){error=e}if(!error.stack){return\"(no stack trace available)\"}}return error.stack.toString()}function registerTLSInit(tlsInitFunc){PThread.tlsInitFunctions.push(tlsInitFunc)}function writeArrayToMemory(array,buffer){GROWABLE_HEAP_I8().set(array,buffer)}function ___emscripten_init_main_thread_js(tb){__emscripten_thread_init(tb,!ENVIRONMENT_IS_WORKER,1,!ENVIRONMENT_IS_WEB);PThread.threadInitTLS()}function ___emscripten_thread_cleanup(thread){if(!ENVIRONMENT_IS_PTHREAD)cleanupThread(thread);else postMessage({\"cmd\":\"cleanupThread\",\"thread\":thread})}function pthreadCreateProxied(pthread_ptr,attr,startRoutine,arg){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(3,1,pthread_ptr,attr,startRoutine,arg);return ___pthread_create_js(pthread_ptr,attr,startRoutine,arg)}function ___pthread_create_js(pthread_ptr,attr,startRoutine,arg){if(typeof SharedArrayBuffer==\"undefined\"){err(\"Current environment does not support SharedArrayBuffer, pthreads are not available!\");return 6}var transferList=[];var error=0;if(ENVIRONMENT_IS_PTHREAD&&(transferList.length===0||error)){return pthreadCreateProxied(pthread_ptr,attr,startRoutine,arg)}if(error)return error;var threadParams={startRoutine:startRoutine,pthread_ptr:pthread_ptr,arg:arg,transferList:transferList};if(ENVIRONMENT_IS_PTHREAD){threadParams.cmd=\"spawnThread\";postMessage(threadParams,transferList);return 0}return spawnThread(threadParams)}function __emscripten_default_pthread_stack_size(){return 2097152}var nowIsMonotonic=true;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function executeNotifiedProxyingQueue(queue){Atomics.store(GROWABLE_HEAP_I32(),queue>>2,1);if(_pthread_self()){__emscripten_proxy_execute_task_queue(queue)}Atomics.compareExchange(GROWABLE_HEAP_I32(),queue>>2,1,0)}Module[\"executeNotifiedProxyingQueue\"]=executeNotifiedProxyingQueue;function __emscripten_notify_task_queue(targetThreadId,currThreadId,mainThreadId,queue){if(targetThreadId==currThreadId){setTimeout(()=>executeNotifiedProxyingQueue(queue))}else if(ENVIRONMENT_IS_PTHREAD){postMessage({\"targetThread\":targetThreadId,\"cmd\":\"processProxyingQueue\",\"queue\":queue})}else{var worker=PThread.pthreads[targetThreadId];if(!worker){return}worker.postMessage({\"cmd\":\"processProxyingQueue\",\"queue\":queue})}return 1}function __emscripten_set_offscreencanvas_size(target,width,height){return-1}function _abort(){abort(\"\")}function warnOnce(text){if(!warnOnce.shown)warnOnce.shown={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;if(ENVIRONMENT_IS_NODE)text=\"warning: \"+text;err(text)}}function _emscripten_check_blocking_allowed(){if(ENVIRONMENT_IS_NODE)return;if(ENVIRONMENT_IS_WORKER)return;warnOnce(\"Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread\")}function _emscripten_date_now(){return Date.now()}function getHeapMax(){return 2147483648}function _emscripten_get_heap_max(){return getHeapMax()}var _emscripten_get_now;if(ENVIRONMENT_IS_NODE){_emscripten_get_now=()=>{var t=process[\"hrtime\"]();return t[0]*1e3+t[1]/1e6}}else if(ENVIRONMENT_IS_PTHREAD){_emscripten_get_now=()=>performance.now()-Module[\"__performance_now_clock_drift\"]}else _emscripten_get_now=()=>performance.now();function _emscripten_memcpy_big(dest,src,num){GROWABLE_HEAP_U8().copyWithin(dest,src,src+num)}function _emscripten_num_logical_cores(){if(ENVIRONMENT_IS_NODE)return require(\"os\").cpus().length;return navigator[\"hardwareConcurrency\"]}function _emscripten_proxy_to_main_thread_js(index,sync){var numCallArgs=arguments.length-2;var outerArgs=arguments;return withStackSave(()=>{var serializedNumCallArgs=numCallArgs;var args=stackAlloc(serializedNumCallArgs*8);var b=args>>3;for(var i=0;i<numCallArgs;i++){var arg=outerArgs[2+i];GROWABLE_HEAP_F64()[b+i]=arg}return _emscripten_run_in_main_runtime_thread_js(index,serializedNumCallArgs,args,sync)})}var _emscripten_receive_on_main_thread_js_callArgs=[];function _emscripten_receive_on_main_thread_js(index,numCallArgs,args){_emscripten_receive_on_main_thread_js_callArgs.length=numCallArgs;var b=args>>3;for(var i=0;i<numCallArgs;i++){_emscripten_receive_on_main_thread_js_callArgs[i]=GROWABLE_HEAP_F64()[b+i]}var isEmAsmConst=index<0;var func=!isEmAsmConst?proxiedFunctionTable[index]:ASM_CONSTS[-index-1];return func.apply(null,_emscripten_receive_on_main_thread_js_callArgs)}function emscripten_realloc_buffer(size){try{wasmMemory.grow(size-buffer.byteLength+65535>>>16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=GROWABLE_HEAP_U8().length;requestedSize=requestedSize>>>0;if(requestedSize<=oldSize){return false}var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}let alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=emscripten_realloc_buffer(newSize);if(replacement){return true}}return false}function _emscripten_unwind_to_js_event_loop(){throw\"unwind\"}function _fd_close(fd){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(4,1,fd);return 52}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(5,1,fd,offset_low,offset_high,whence,newOffset);return 70}var printCharBuffers=[null,[],[]];function printChar(stream,curr){var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}}function _fd_write(fd,iov,iovcnt,pnum){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(6,1,fd,iov,iovcnt,pnum);var num=0;for(var i=0;i<iovcnt;i++){var ptr=GROWABLE_HEAP_U32()[iov>>2];var len=GROWABLE_HEAP_U32()[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,GROWABLE_HEAP_U8()[ptr+j])}num+=len}GROWABLE_HEAP_U32()[pnum>>2]=num;return 0}function getCFunc(ident){var func=Module[\"_\"+ident];return func}function ccall(ident,returnType,argTypes,args,opts){var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret}function cwrap(ident,returnType,argTypes,opts){argTypes=argTypes||[];var numericArgs=argTypes.every(type=>type===\"number\"||type===\"boolean\");var numericRet=returnType!==\"string\";if(numericRet&&numericArgs&&!opts){return getCFunc(ident)}return function(){return ccall(ident,returnType,argTypes,arguments,opts)}}PThread.init();var proxiedFunctionTable=[null,_proc_exit,exitOnMainThread,pthreadCreateProxied,_fd_close,_fd_seek,_fd_write];var asmLibraryArg={\"__emscripten_init_main_thread_js\":___emscripten_init_main_thread_js,\"__emscripten_thread_cleanup\":___emscripten_thread_cleanup,\"__pthread_create_js\":___pthread_create_js,\"_emscripten_default_pthread_stack_size\":__emscripten_default_pthread_stack_size,\"_emscripten_get_now_is_monotonic\":__emscripten_get_now_is_monotonic,\"_emscripten_notify_task_queue\":__emscripten_notify_task_queue,\"_emscripten_set_offscreencanvas_size\":__emscripten_set_offscreencanvas_size,\"abort\":_abort,\"emscripten_check_blocking_allowed\":_emscripten_check_blocking_allowed,\"emscripten_date_now\":_emscripten_date_now,\"emscripten_get_heap_max\":_emscripten_get_heap_max,\"emscripten_get_now\":_emscripten_get_now,\"emscripten_memcpy_big\":_emscripten_memcpy_big,\"emscripten_num_logical_cores\":_emscripten_num_logical_cores,\"emscripten_receive_on_main_thread_js\":_emscripten_receive_on_main_thread_js,\"emscripten_resize_heap\":_emscripten_resize_heap,\"emscripten_unwind_to_js_event_loop\":_emscripten_unwind_to_js_event_loop,\"exit\":_exit,\"fd_close\":_fd_close,\"fd_seek\":_fd_seek,\"fd_write\":_fd_write,\"memory\":wasmMemory||Module[\"wasmMemory\"]};var asm=createWasm();var ___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=function(){return(___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=Module[\"asm\"][\"__wasm_call_ctors\"]).apply(null,arguments)};var _init=Module[\"_init\"]=function(){return(_init=Module[\"_init\"]=Module[\"asm\"][\"init\"]).apply(null,arguments)};var _init_with_threads_count=Module[\"_init_with_threads_count\"]=function(){return(_init_with_threads_count=Module[\"_init_with_threads_count\"]=Module[\"asm\"][\"init_with_threads_count\"]).apply(null,arguments)};var _get_threads_count=Module[\"_get_threads_count\"]=function(){return(_get_threads_count=Module[\"_get_threads_count\"]=Module[\"asm\"][\"get_threads_count\"]).apply(null,arguments)};var _register_tensor=Module[\"_register_tensor\"]=function(){return(_register_tensor=Module[\"_register_tensor\"]=Module[\"asm\"][\"register_tensor\"]).apply(null,arguments)};var _dispose_data=Module[\"_dispose_data\"]=function(){return(_dispose_data=Module[\"_dispose_data\"]=Module[\"asm\"][\"dispose_data\"]).apply(null,arguments)};var _dispose=Module[\"_dispose\"]=function(){return(_dispose=Module[\"_dispose\"]=Module[\"asm\"][\"dispose\"]).apply(null,arguments)};var _Abs=Module[\"_Abs\"]=function(){return(_Abs=Module[\"_Abs\"]=Module[\"asm\"][\"Abs\"]).apply(null,arguments)};var _Add=Module[\"_Add\"]=function(){return(_Add=Module[\"_Add\"]=Module[\"asm\"][\"Add\"]).apply(null,arguments)};var _AddN=Module[\"_AddN\"]=function(){return(_AddN=Module[\"_AddN\"]=Module[\"asm\"][\"AddN\"]).apply(null,arguments)};var _All=Module[\"_All\"]=function(){return(_All=Module[\"_All\"]=Module[\"asm\"][\"All\"]).apply(null,arguments)};var _Any=Module[\"_Any\"]=function(){return(_Any=Module[\"_Any\"]=Module[\"asm\"][\"Any\"]).apply(null,arguments)};var _ArgMax=Module[\"_ArgMax\"]=function(){return(_ArgMax=Module[\"_ArgMax\"]=Module[\"asm\"][\"ArgMax\"]).apply(null,arguments)};var _AvgPool=Module[\"_AvgPool\"]=function(){return(_AvgPool=Module[\"_AvgPool\"]=Module[\"asm\"][\"AvgPool\"]).apply(null,arguments)};var _BatchMatMul=Module[\"_BatchMatMul\"]=function(){return(_BatchMatMul=Module[\"_BatchMatMul\"]=Module[\"asm\"][\"BatchMatMul\"]).apply(null,arguments)};var _Ceil=Module[\"_Ceil\"]=function(){return(_Ceil=Module[\"_Ceil\"]=Module[\"asm\"][\"Ceil\"]).apply(null,arguments)};var _ClipByValue=Module[\"_ClipByValue\"]=function(){return(_ClipByValue=Module[\"_ClipByValue\"]=Module[\"asm\"][\"ClipByValue\"]).apply(null,arguments)};var _Conv2D=Module[\"_Conv2D\"]=function(){return(_Conv2D=Module[\"_Conv2D\"]=Module[\"asm\"][\"Conv2D\"]).apply(null,arguments)};var _Conv2DBackpropInput=Module[\"_Conv2DBackpropInput\"]=function(){return(_Conv2DBackpropInput=Module[\"_Conv2DBackpropInput\"]=Module[\"asm\"][\"Conv2DBackpropInput\"]).apply(null,arguments)};var _Cos=Module[\"_Cos\"]=function(){return(_Cos=Module[\"_Cos\"]=Module[\"asm\"][\"Cos\"]).apply(null,arguments)};var _Cosh=Module[\"_Cosh\"]=function(){return(_Cosh=Module[\"_Cosh\"]=Module[\"asm\"][\"Cosh\"]).apply(null,arguments)};var _CropAndResize=Module[\"_CropAndResize\"]=function(){return(_CropAndResize=Module[\"_CropAndResize\"]=Module[\"asm\"][\"CropAndResize\"]).apply(null,arguments)};var _Cumprod=Module[\"_Cumprod\"]=function(){return(_Cumprod=Module[\"_Cumprod\"]=Module[\"asm\"][\"Cumprod\"]).apply(null,arguments)};var _Cumsum=Module[\"_Cumsum\"]=function(){return(_Cumsum=Module[\"_Cumsum\"]=Module[\"asm\"][\"Cumsum\"]).apply(null,arguments)};var _DepthToSpace=Module[\"_DepthToSpace\"]=function(){return(_DepthToSpace=Module[\"_DepthToSpace\"]=Module[\"asm\"][\"DepthToSpace\"]).apply(null,arguments)};var _DepthwiseConv2dNative=Module[\"_DepthwiseConv2dNative\"]=function(){return(_DepthwiseConv2dNative=Module[\"_DepthwiseConv2dNative\"]=Module[\"asm\"][\"DepthwiseConv2dNative\"]).apply(null,arguments)};var _Elu=Module[\"_Elu\"]=function(){return(_Elu=Module[\"_Elu\"]=Module[\"asm\"][\"Elu\"]).apply(null,arguments)};var _Equal=Module[\"_Equal\"]=function(){return(_Equal=Module[\"_Equal\"]=Module[\"asm\"][\"Equal\"]).apply(null,arguments)};var _Exp=Module[\"_Exp\"]=function(){return(_Exp=Module[\"_Exp\"]=Module[\"asm\"][\"Exp\"]).apply(null,arguments)};var _FlipLeftRight=Module[\"_FlipLeftRight\"]=function(){return(_FlipLeftRight=Module[\"_FlipLeftRight\"]=Module[\"asm\"][\"FlipLeftRight\"]).apply(null,arguments)};var _Floor=Module[\"_Floor\"]=function(){return(_Floor=Module[\"_Floor\"]=Module[\"asm\"][\"Floor\"]).apply(null,arguments)};var _FloorDiv=Module[\"_FloorDiv\"]=function(){return(_FloorDiv=Module[\"_FloorDiv\"]=Module[\"asm\"][\"FloorDiv\"]).apply(null,arguments)};var _FusedBatchNorm=Module[\"_FusedBatchNorm\"]=function(){return(_FusedBatchNorm=Module[\"_FusedBatchNorm\"]=Module[\"asm\"][\"FusedBatchNorm\"]).apply(null,arguments)};var _FusedConv2D=Module[\"_FusedConv2D\"]=function(){return(_FusedConv2D=Module[\"_FusedConv2D\"]=Module[\"asm\"][\"FusedConv2D\"]).apply(null,arguments)};var _FusedDepthwiseConv2D=Module[\"_FusedDepthwiseConv2D\"]=function(){return(_FusedDepthwiseConv2D=Module[\"_FusedDepthwiseConv2D\"]=Module[\"asm\"][\"FusedDepthwiseConv2D\"]).apply(null,arguments)};var _Gather=Module[\"_Gather\"]=function(){return(_Gather=Module[\"_Gather\"]=Module[\"asm\"][\"Gather\"]).apply(null,arguments)};var _GatherNd=Module[\"_GatherNd\"]=function(){return(_GatherNd=Module[\"_GatherNd\"]=Module[\"asm\"][\"GatherNd\"]).apply(null,arguments)};var _Greater=Module[\"_Greater\"]=function(){return(_Greater=Module[\"_Greater\"]=Module[\"asm\"][\"Greater\"]).apply(null,arguments)};var _GreaterEqual=Module[\"_GreaterEqual\"]=function(){return(_GreaterEqual=Module[\"_GreaterEqual\"]=Module[\"asm\"][\"GreaterEqual\"]).apply(null,arguments)};var _LeakyRelu=Module[\"_LeakyRelu\"]=function(){return(_LeakyRelu=Module[\"_LeakyRelu\"]=Module[\"asm\"][\"LeakyRelu\"]).apply(null,arguments)};var _Less=Module[\"_Less\"]=function(){return(_Less=Module[\"_Less\"]=Module[\"asm\"][\"Less\"]).apply(null,arguments)};var _LessEqual=Module[\"_LessEqual\"]=function(){return(_LessEqual=Module[\"_LessEqual\"]=Module[\"asm\"][\"LessEqual\"]).apply(null,arguments)};var _Log=Module[\"_Log\"]=function(){return(_Log=Module[\"_Log\"]=Module[\"asm\"][\"Log\"]).apply(null,arguments)};var _LogicalAnd=Module[\"_LogicalAnd\"]=function(){return(_LogicalAnd=Module[\"_LogicalAnd\"]=Module[\"asm\"][\"LogicalAnd\"]).apply(null,arguments)};var _LogicalNot=Module[\"_LogicalNot\"]=function(){return(_LogicalNot=Module[\"_LogicalNot\"]=Module[\"asm\"][\"LogicalNot\"]).apply(null,arguments)};var _LogicalOr=Module[\"_LogicalOr\"]=function(){return(_LogicalOr=Module[\"_LogicalOr\"]=Module[\"asm\"][\"LogicalOr\"]).apply(null,arguments)};var _LogicalXor=Module[\"_LogicalXor\"]=function(){return(_LogicalXor=Module[\"_LogicalXor\"]=Module[\"asm\"][\"LogicalXor\"]).apply(null,arguments)};var _Max=Module[\"_Max\"]=function(){return(_Max=Module[\"_Max\"]=Module[\"asm\"][\"Max\"]).apply(null,arguments)};var _MaxPool=Module[\"_MaxPool\"]=function(){return(_MaxPool=Module[\"_MaxPool\"]=Module[\"asm\"][\"MaxPool\"]).apply(null,arguments)};var _Maximum=Module[\"_Maximum\"]=function(){return(_Maximum=Module[\"_Maximum\"]=Module[\"asm\"][\"Maximum\"]).apply(null,arguments)};var _Mean=Module[\"_Mean\"]=function(){return(_Mean=Module[\"_Mean\"]=Module[\"asm\"][\"Mean\"]).apply(null,arguments)};var _Min=Module[\"_Min\"]=function(){return(_Min=Module[\"_Min\"]=Module[\"asm\"][\"Min\"]).apply(null,arguments)};var _Minimum=Module[\"_Minimum\"]=function(){return(_Minimum=Module[\"_Minimum\"]=Module[\"asm\"][\"Minimum\"]).apply(null,arguments)};var _MirrorPad=Module[\"_MirrorPad\"]=function(){return(_MirrorPad=Module[\"_MirrorPad\"]=Module[\"asm\"][\"MirrorPad\"]).apply(null,arguments)};var _Multiply=Module[\"_Multiply\"]=function(){return(_Multiply=Module[\"_Multiply\"]=Module[\"asm\"][\"Multiply\"]).apply(null,arguments)};var _Neg=Module[\"_Neg\"]=function(){return(_Neg=Module[\"_Neg\"]=Module[\"asm\"][\"Neg\"]).apply(null,arguments)};var _NonMaxSuppressionV3=Module[\"_NonMaxSuppressionV3\"]=function(){return(_NonMaxSuppressionV3=Module[\"_NonMaxSuppressionV3\"]=Module[\"asm\"][\"NonMaxSuppressionV3\"]).apply(null,arguments)};var _NonMaxSuppressionV4=Module[\"_NonMaxSuppressionV4\"]=function(){return(_NonMaxSuppressionV4=Module[\"_NonMaxSuppressionV4\"]=Module[\"asm\"][\"NonMaxSuppressionV4\"]).apply(null,arguments)};var _NonMaxSuppressionV5=Module[\"_NonMaxSuppressionV5\"]=function(){return(_NonMaxSuppressionV5=Module[\"_NonMaxSuppressionV5\"]=Module[\"asm\"][\"NonMaxSuppressionV5\"]).apply(null,arguments)};var _NotEqual=Module[\"_NotEqual\"]=function(){return(_NotEqual=Module[\"_NotEqual\"]=Module[\"asm\"][\"NotEqual\"]).apply(null,arguments)};var _OneHot=Module[\"_OneHot\"]=function(){return(_OneHot=Module[\"_OneHot\"]=Module[\"asm\"][\"OneHot\"]).apply(null,arguments)};var _PadV2=Module[\"_PadV2\"]=function(){return(_PadV2=Module[\"_PadV2\"]=Module[\"asm\"][\"PadV2\"]).apply(null,arguments)};var _Pow=Module[\"_Pow\"]=function(){return(_Pow=Module[\"_Pow\"]=Module[\"asm\"][\"Pow\"]).apply(null,arguments)};var _Prelu=Module[\"_Prelu\"]=function(){return(_Prelu=Module[\"_Prelu\"]=Module[\"asm\"][\"Prelu\"]).apply(null,arguments)};var _Prod=Module[\"_Prod\"]=function(){return(_Prod=Module[\"_Prod\"]=Module[\"asm\"][\"Prod\"]).apply(null,arguments)};var _RealDiv=Module[\"_RealDiv\"]=function(){return(_RealDiv=Module[\"_RealDiv\"]=Module[\"asm\"][\"RealDiv\"]).apply(null,arguments)};var _Relu=Module[\"_Relu\"]=function(){return(_Relu=Module[\"_Relu\"]=Module[\"asm\"][\"Relu\"]).apply(null,arguments)};var _Relu6=Module[\"_Relu6\"]=function(){return(_Relu6=Module[\"_Relu6\"]=Module[\"asm\"][\"Relu6\"]).apply(null,arguments)};var _ResizeBilinear=Module[\"_ResizeBilinear\"]=function(){return(_ResizeBilinear=Module[\"_ResizeBilinear\"]=Module[\"asm\"][\"ResizeBilinear\"]).apply(null,arguments)};var _ResizeNearestNeighbor=Module[\"_ResizeNearestNeighbor\"]=function(){return(_ResizeNearestNeighbor=Module[\"_ResizeNearestNeighbor\"]=Module[\"asm\"][\"ResizeNearestNeighbor\"]).apply(null,arguments)};var _Reverse=Module[\"_Reverse\"]=function(){return(_Reverse=Module[\"_Reverse\"]=Module[\"asm\"][\"Reverse\"]).apply(null,arguments)};var _RotateWithOffset=Module[\"_RotateWithOffset\"]=function(){return(_RotateWithOffset=Module[\"_RotateWithOffset\"]=Module[\"asm\"][\"RotateWithOffset\"]).apply(null,arguments)};var _Round=Module[\"_Round\"]=function(){return(_Round=Module[\"_Round\"]=Module[\"asm\"][\"Round\"]).apply(null,arguments)};var _Rsqrt=Module[\"_Rsqrt\"]=function(){return(_Rsqrt=Module[\"_Rsqrt\"]=Module[\"asm\"][\"Rsqrt\"]).apply(null,arguments)};var _ScatterNd=Module[\"_ScatterNd\"]=function(){return(_ScatterNd=Module[\"_ScatterNd\"]=Module[\"asm\"][\"ScatterNd\"]).apply(null,arguments)};var _SelectV2=Module[\"_SelectV2\"]=function(){return(_SelectV2=Module[\"_SelectV2\"]=Module[\"asm\"][\"SelectV2\"]).apply(null,arguments)};var _Sigmoid=Module[\"_Sigmoid\"]=function(){return(_Sigmoid=Module[\"_Sigmoid\"]=Module[\"asm\"][\"Sigmoid\"]).apply(null,arguments)};var _Sin=Module[\"_Sin\"]=function(){return(_Sin=Module[\"_Sin\"]=Module[\"asm\"][\"Sin\"]).apply(null,arguments)};var _Softmax=Module[\"_Softmax\"]=function(){return(_Softmax=Module[\"_Softmax\"]=Module[\"asm\"][\"Softmax\"]).apply(null,arguments)};var _SparseFillEmptyRows=Module[\"_SparseFillEmptyRows\"]=function(){return(_SparseFillEmptyRows=Module[\"_SparseFillEmptyRows\"]=Module[\"asm\"][\"SparseFillEmptyRows\"]).apply(null,arguments)};var _SparseReshape=Module[\"_SparseReshape\"]=function(){return(_SparseReshape=Module[\"_SparseReshape\"]=Module[\"asm\"][\"SparseReshape\"]).apply(null,arguments)};var _SparseSegmentReduction=Module[\"_SparseSegmentReduction\"]=function(){return(_SparseSegmentReduction=Module[\"_SparseSegmentReduction\"]=Module[\"asm\"][\"SparseSegmentReduction\"]).apply(null,arguments)};var _Sqrt=Module[\"_Sqrt\"]=function(){return(_Sqrt=Module[\"_Sqrt\"]=Module[\"asm\"][\"Sqrt\"]).apply(null,arguments)};var _Square=Module[\"_Square\"]=function(){return(_Square=Module[\"_Square\"]=Module[\"asm\"][\"Square\"]).apply(null,arguments)};var _SquaredDifference=Module[\"_SquaredDifference\"]=function(){return(_SquaredDifference=Module[\"_SquaredDifference\"]=Module[\"asm\"][\"SquaredDifference\"]).apply(null,arguments)};var _Step=Module[\"_Step\"]=function(){return(_Step=Module[\"_Step\"]=Module[\"asm\"][\"Step\"]).apply(null,arguments)};var _StridedSlice=Module[\"_StridedSlice\"]=function(){return(_StridedSlice=Module[\"_StridedSlice\"]=Module[\"asm\"][\"StridedSlice\"]).apply(null,arguments)};var _Sub=Module[\"_Sub\"]=function(){return(_Sub=Module[\"_Sub\"]=Module[\"asm\"][\"Sub\"]).apply(null,arguments)};var _Sum=Module[\"_Sum\"]=function(){return(_Sum=Module[\"_Sum\"]=Module[\"asm\"][\"Sum\"]).apply(null,arguments)};var _Tan=Module[\"_Tan\"]=function(){return(_Tan=Module[\"_Tan\"]=Module[\"asm\"][\"Tan\"]).apply(null,arguments)};var _Tanh=Module[\"_Tanh\"]=function(){return(_Tanh=Module[\"_Tanh\"]=Module[\"asm\"][\"Tanh\"]).apply(null,arguments)};var _Tile=Module[\"_Tile\"]=function(){return(_Tile=Module[\"_Tile\"]=Module[\"asm\"][\"Tile\"]).apply(null,arguments)};var _TopK=Module[\"_TopK\"]=function(){return(_TopK=Module[\"_TopK\"]=Module[\"asm\"][\"TopK\"]).apply(null,arguments)};var _Transform=Module[\"_Transform\"]=function(){return(_Transform=Module[\"_Transform\"]=Module[\"asm\"][\"Transform\"]).apply(null,arguments)};var _Transpose=Module[\"_Transpose\"]=function(){return(_Transpose=Module[\"_Transpose\"]=Module[\"asm\"][\"Transpose\"]).apply(null,arguments)};var __FusedMatMul=Module[\"__FusedMatMul\"]=function(){return(__FusedMatMul=Module[\"__FusedMatMul\"]=Module[\"asm\"][\"_FusedMatMul\"]).apply(null,arguments)};var _malloc=Module[\"_malloc\"]=function(){return(_malloc=Module[\"_malloc\"]=Module[\"asm\"][\"malloc\"]).apply(null,arguments)};var _free=Module[\"_free\"]=function(){return(_free=Module[\"_free\"]=Module[\"asm\"][\"free\"]).apply(null,arguments)};var __emscripten_tls_init=Module[\"__emscripten_tls_init\"]=function(){return(__emscripten_tls_init=Module[\"__emscripten_tls_init\"]=Module[\"asm\"][\"_emscripten_tls_init\"]).apply(null,arguments)};var _pthread_self=Module[\"_pthread_self\"]=function(){return(_pthread_self=Module[\"_pthread_self\"]=Module[\"asm\"][\"pthread_self\"]).apply(null,arguments)};var ___errno_location=Module[\"___errno_location\"]=function(){return(___errno_location=Module[\"___errno_location\"]=Module[\"asm\"][\"__errno_location\"]).apply(null,arguments)};var __emscripten_thread_init=Module[\"__emscripten_thread_init\"]=function(){return(__emscripten_thread_init=Module[\"__emscripten_thread_init\"]=Module[\"asm\"][\"_emscripten_thread_init\"]).apply(null,arguments)};var __emscripten_thread_crashed=Module[\"__emscripten_thread_crashed\"]=function(){return(__emscripten_thread_crashed=Module[\"__emscripten_thread_crashed\"]=Module[\"asm\"][\"_emscripten_thread_crashed\"]).apply(null,arguments)};var _emscripten_main_thread_process_queued_calls=Module[\"_emscripten_main_thread_process_queued_calls\"]=function(){return(_emscripten_main_thread_process_queued_calls=Module[\"_emscripten_main_thread_process_queued_calls\"]=Module[\"asm\"][\"emscripten_main_thread_process_queued_calls\"]).apply(null,arguments)};var _emscripten_main_browser_thread_id=Module[\"_emscripten_main_browser_thread_id\"]=function(){return(_emscripten_main_browser_thread_id=Module[\"_emscripten_main_browser_thread_id\"]=Module[\"asm\"][\"emscripten_main_browser_thread_id\"]).apply(null,arguments)};var _emscripten_run_in_main_runtime_thread_js=Module[\"_emscripten_run_in_main_runtime_thread_js\"]=function(){return(_emscripten_run_in_main_runtime_thread_js=Module[\"_emscripten_run_in_main_runtime_thread_js\"]=Module[\"asm\"][\"emscripten_run_in_main_runtime_thread_js\"]).apply(null,arguments)};var _emscripten_dispatch_to_thread_=Module[\"_emscripten_dispatch_to_thread_\"]=function(){return(_emscripten_dispatch_to_thread_=Module[\"_emscripten_dispatch_to_thread_\"]=Module[\"asm\"][\"emscripten_dispatch_to_thread_\"]).apply(null,arguments)};var __emscripten_proxy_execute_task_queue=Module[\"__emscripten_proxy_execute_task_queue\"]=function(){return(__emscripten_proxy_execute_task_queue=Module[\"__emscripten_proxy_execute_task_queue\"]=Module[\"asm\"][\"_emscripten_proxy_execute_task_queue\"]).apply(null,arguments)};var __emscripten_thread_free_data=Module[\"__emscripten_thread_free_data\"]=function(){return(__emscripten_thread_free_data=Module[\"__emscripten_thread_free_data\"]=Module[\"asm\"][\"_emscripten_thread_free_data\"]).apply(null,arguments)};var __emscripten_thread_exit=Module[\"__emscripten_thread_exit\"]=function(){return(__emscripten_thread_exit=Module[\"__emscripten_thread_exit\"]=Module[\"asm\"][\"_emscripten_thread_exit\"]).apply(null,arguments)};var _emscripten_stack_set_limits=Module[\"_emscripten_stack_set_limits\"]=function(){return(_emscripten_stack_set_limits=Module[\"_emscripten_stack_set_limits\"]=Module[\"asm\"][\"emscripten_stack_set_limits\"]).apply(null,arguments)};var stackSave=Module[\"stackSave\"]=function(){return(stackSave=Module[\"stackSave\"]=Module[\"asm\"][\"stackSave\"]).apply(null,arguments)};var stackRestore=Module[\"stackRestore\"]=function(){return(stackRestore=Module[\"stackRestore\"]=Module[\"asm\"][\"stackRestore\"]).apply(null,arguments)};var stackAlloc=Module[\"stackAlloc\"]=function(){return(stackAlloc=Module[\"stackAlloc\"]=Module[\"asm\"][\"stackAlloc\"]).apply(null,arguments)};var dynCall_iijjiiii=Module[\"dynCall_iijjiiii\"]=function(){return(dynCall_iijjiiii=Module[\"dynCall_iijjiiii\"]=Module[\"asm\"][\"dynCall_iijjiiii\"]).apply(null,arguments)};var dynCall_jiji=Module[\"dynCall_jiji\"]=function(){return(dynCall_jiji=Module[\"dynCall_jiji\"]=Module[\"asm\"][\"dynCall_jiji\"]).apply(null,arguments)};Module[\"keepRuntimeAlive\"]=keepRuntimeAlive;Module[\"wasmMemory\"]=wasmMemory;Module[\"cwrap\"]=cwrap;Module[\"ExitStatus\"]=ExitStatus;Module[\"PThread\"]=PThread;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}if(ENVIRONMENT_IS_PTHREAD){readyPromiseResolve(Module);initRuntime();postMessage({\"cmd\":\"loaded\"});return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();var listenersAdded;if(beforeListeners){listenersAdded={uncaughtException:process.listeners(\"uncaughtException\").filter(function(listener){return!beforeListeners.uncaughtException.indexOf(listener)>-1}),unhandledRejection:process.listeners(\"unhandledRejection\").filter(function(listener){return!beforeListeners.unhandledRejection.indexOf(listener)>-1})}}var actualModule;if(typeof WasmBackendModule!==\"undefined\"){actualModule=WasmBackendModule}else if(typeof WasmBackendModuleThreadedSimd!==\"undefined\"){actualModule=WasmBackendModuleThreadedSimd}else{throw new Error(\"Could not find wasm module in post.js\")}if(listenersAdded){var tmpDispose=actualModule[\"_dispose\"];actualModule[\"_dispose\"]=function(){tmpDispose();listenersAdded.uncaughtException.forEach(function(listener){process.removeListener(\"uncaughtException\",listener)});listenersAdded.unhandledRejection.forEach(function(listener){process.removeListener(\"unhandledRejection\",listener)})}}\n\n\n  return WasmBackendModuleThreadedSimd.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = WasmBackendModuleThreadedSimd;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return WasmBackendModuleThreadedSimd; });\nelse if (typeof exports === 'object')\n  exports[\"WasmBackendModuleThreadedSimd\"] = WasmBackendModuleThreadedSimd;\n","\nvar WasmBackendModule = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(WasmBackendModule) {\n  WasmBackendModule = WasmBackendModule || {};\n\nvar Module=typeof WasmBackendModule!=\"undefined\"?WasmBackendModule:{};var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});var beforeListeners;if(typeof process!==\"undefined\"&&process.listeners){beforeListeners={uncaughtException:process.listeners(\"uncaughtException\"),unhandledRejection:process.listeners(\"unhandledRejection\")}}var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;function logExceptionOnExit(e){if(e instanceof ExitStatus)return;let toLog=e;err(\"exiting due to exception: \"+toLog)}if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require(\"path\").dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}var fs,nodePath;if(typeof require===\"function\"){fs=require(\"fs\");nodePath=require(\"path\")}read_=(filename,binary)=>{filename=nodePath[\"normalize\"](filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror)=>{filename=nodePath[\"normalize\"](filename);fs.readFile(filename,function(err,data){if(err)onerror(err);else onload(data.buffer)})};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"uncaughtException\",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process[\"on\"](\"unhandledRejection\",function(reason){throw reason});quit_=(status,toThrow)=>{if(keepRuntimeAlive()){process[\"exitCode\"]=status;throw toThrow}logExceptionOnExit(toThrow);process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.warn.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var POINTER_SIZE=4;var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module[\"INITIAL_MEMORY\"]||16777216;var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){{if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;wasmBinaryFile=\"tfjs-backend-wasm.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={\"env\":asmLibraryArg,\"wasi_snapshot_preview1\":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module[\"asm\"]=exports;wasmMemory=Module[\"asm\"][\"memory\"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmTable=Module[\"asm\"][\"__indirect_function_table\"];addOnInit(Module[\"asm\"][\"__wasm_call_ctors\"]);removeRunDependency(\"wasm-instantiate\")}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(function(instance){return instance}).then(receiver,function(reason){err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiationResult,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(receiveInstantiationResult)})})}else{return instantiateArrayBuffer(receiveInstantiationResult)}}if(Module[\"instantiateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);readyPromiseReject(e)}}instantiateAsync().catch(readyPromiseReject);return{}}var tempDouble;var tempI64;function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module)}}function demangle(func){return func}function demangleAll(text){var regex=/\\b_Z[\\w\\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:y+\" [\"+x+\"]\"})}function jsStackTrace(){var error=new Error;if(!error.stack){try{throw new Error}catch(e){error=e}if(!error.stack){return\"(no stack trace available)\"}}return error.stack.toString()}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function _abort(){abort(\"\")}function getHeapMax(){return 2147483648}function _emscripten_get_heap_max(){return getHeapMax()}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function emscripten_realloc_buffer(size){try{wasmMemory.grow(size-buffer.byteLength+65535>>>16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize=requestedSize>>>0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}let alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=emscripten_realloc_buffer(newSize);if(replacement){return true}}return false}var SYSCALLS={varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret}};function _fd_close(fd){return 52}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){return 70}var printCharBuffers=[null,[],[]];function printChar(stream,curr){var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}}function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j])}num+=len}HEAPU32[pnum>>2]=num;return 0}function getCFunc(ident){var func=Module[\"_\"+ident];return func}function ccall(ident,returnType,argTypes,args,opts){var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret}function cwrap(ident,returnType,argTypes,opts){argTypes=argTypes||[];var numericArgs=argTypes.every(type=>type===\"number\"||type===\"boolean\");var numericRet=returnType!==\"string\";if(numericRet&&numericArgs&&!opts){return getCFunc(ident)}return function(){return ccall(ident,returnType,argTypes,arguments,opts)}}var asmLibraryArg={\"abort\":_abort,\"emscripten_get_heap_max\":_emscripten_get_heap_max,\"emscripten_memcpy_big\":_emscripten_memcpy_big,\"emscripten_resize_heap\":_emscripten_resize_heap,\"fd_close\":_fd_close,\"fd_seek\":_fd_seek,\"fd_write\":_fd_write};var asm=createWasm();var ___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=function(){return(___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=Module[\"asm\"][\"__wasm_call_ctors\"]).apply(null,arguments)};var _init=Module[\"_init\"]=function(){return(_init=Module[\"_init\"]=Module[\"asm\"][\"init\"]).apply(null,arguments)};var _init_with_threads_count=Module[\"_init_with_threads_count\"]=function(){return(_init_with_threads_count=Module[\"_init_with_threads_count\"]=Module[\"asm\"][\"init_with_threads_count\"]).apply(null,arguments)};var _get_threads_count=Module[\"_get_threads_count\"]=function(){return(_get_threads_count=Module[\"_get_threads_count\"]=Module[\"asm\"][\"get_threads_count\"]).apply(null,arguments)};var _register_tensor=Module[\"_register_tensor\"]=function(){return(_register_tensor=Module[\"_register_tensor\"]=Module[\"asm\"][\"register_tensor\"]).apply(null,arguments)};var _dispose_data=Module[\"_dispose_data\"]=function(){return(_dispose_data=Module[\"_dispose_data\"]=Module[\"asm\"][\"dispose_data\"]).apply(null,arguments)};var _dispose=Module[\"_dispose\"]=function(){return(_dispose=Module[\"_dispose\"]=Module[\"asm\"][\"dispose\"]).apply(null,arguments)};var _Abs=Module[\"_Abs\"]=function(){return(_Abs=Module[\"_Abs\"]=Module[\"asm\"][\"Abs\"]).apply(null,arguments)};var _Add=Module[\"_Add\"]=function(){return(_Add=Module[\"_Add\"]=Module[\"asm\"][\"Add\"]).apply(null,arguments)};var _AddN=Module[\"_AddN\"]=function(){return(_AddN=Module[\"_AddN\"]=Module[\"asm\"][\"AddN\"]).apply(null,arguments)};var _All=Module[\"_All\"]=function(){return(_All=Module[\"_All\"]=Module[\"asm\"][\"All\"]).apply(null,arguments)};var _Any=Module[\"_Any\"]=function(){return(_Any=Module[\"_Any\"]=Module[\"asm\"][\"Any\"]).apply(null,arguments)};var _ArgMax=Module[\"_ArgMax\"]=function(){return(_ArgMax=Module[\"_ArgMax\"]=Module[\"asm\"][\"ArgMax\"]).apply(null,arguments)};var _AvgPool=Module[\"_AvgPool\"]=function(){return(_AvgPool=Module[\"_AvgPool\"]=Module[\"asm\"][\"AvgPool\"]).apply(null,arguments)};var _BatchMatMul=Module[\"_BatchMatMul\"]=function(){return(_BatchMatMul=Module[\"_BatchMatMul\"]=Module[\"asm\"][\"BatchMatMul\"]).apply(null,arguments)};var _Ceil=Module[\"_Ceil\"]=function(){return(_Ceil=Module[\"_Ceil\"]=Module[\"asm\"][\"Ceil\"]).apply(null,arguments)};var _ClipByValue=Module[\"_ClipByValue\"]=function(){return(_ClipByValue=Module[\"_ClipByValue\"]=Module[\"asm\"][\"ClipByValue\"]).apply(null,arguments)};var _Conv2D=Module[\"_Conv2D\"]=function(){return(_Conv2D=Module[\"_Conv2D\"]=Module[\"asm\"][\"Conv2D\"]).apply(null,arguments)};var _Conv2DBackpropInput=Module[\"_Conv2DBackpropInput\"]=function(){return(_Conv2DBackpropInput=Module[\"_Conv2DBackpropInput\"]=Module[\"asm\"][\"Conv2DBackpropInput\"]).apply(null,arguments)};var _Cos=Module[\"_Cos\"]=function(){return(_Cos=Module[\"_Cos\"]=Module[\"asm\"][\"Cos\"]).apply(null,arguments)};var _Cosh=Module[\"_Cosh\"]=function(){return(_Cosh=Module[\"_Cosh\"]=Module[\"asm\"][\"Cosh\"]).apply(null,arguments)};var _CropAndResize=Module[\"_CropAndResize\"]=function(){return(_CropAndResize=Module[\"_CropAndResize\"]=Module[\"asm\"][\"CropAndResize\"]).apply(null,arguments)};var _Cumprod=Module[\"_Cumprod\"]=function(){return(_Cumprod=Module[\"_Cumprod\"]=Module[\"asm\"][\"Cumprod\"]).apply(null,arguments)};var _Cumsum=Module[\"_Cumsum\"]=function(){return(_Cumsum=Module[\"_Cumsum\"]=Module[\"asm\"][\"Cumsum\"]).apply(null,arguments)};var _DepthToSpace=Module[\"_DepthToSpace\"]=function(){return(_DepthToSpace=Module[\"_DepthToSpace\"]=Module[\"asm\"][\"DepthToSpace\"]).apply(null,arguments)};var _DepthwiseConv2dNative=Module[\"_DepthwiseConv2dNative\"]=function(){return(_DepthwiseConv2dNative=Module[\"_DepthwiseConv2dNative\"]=Module[\"asm\"][\"DepthwiseConv2dNative\"]).apply(null,arguments)};var _Elu=Module[\"_Elu\"]=function(){return(_Elu=Module[\"_Elu\"]=Module[\"asm\"][\"Elu\"]).apply(null,arguments)};var _Equal=Module[\"_Equal\"]=function(){return(_Equal=Module[\"_Equal\"]=Module[\"asm\"][\"Equal\"]).apply(null,arguments)};var _Exp=Module[\"_Exp\"]=function(){return(_Exp=Module[\"_Exp\"]=Module[\"asm\"][\"Exp\"]).apply(null,arguments)};var _FlipLeftRight=Module[\"_FlipLeftRight\"]=function(){return(_FlipLeftRight=Module[\"_FlipLeftRight\"]=Module[\"asm\"][\"FlipLeftRight\"]).apply(null,arguments)};var _Floor=Module[\"_Floor\"]=function(){return(_Floor=Module[\"_Floor\"]=Module[\"asm\"][\"Floor\"]).apply(null,arguments)};var _FloorDiv=Module[\"_FloorDiv\"]=function(){return(_FloorDiv=Module[\"_FloorDiv\"]=Module[\"asm\"][\"FloorDiv\"]).apply(null,arguments)};var _FusedBatchNorm=Module[\"_FusedBatchNorm\"]=function(){return(_FusedBatchNorm=Module[\"_FusedBatchNorm\"]=Module[\"asm\"][\"FusedBatchNorm\"]).apply(null,arguments)};var _FusedConv2D=Module[\"_FusedConv2D\"]=function(){return(_FusedConv2D=Module[\"_FusedConv2D\"]=Module[\"asm\"][\"FusedConv2D\"]).apply(null,arguments)};var _FusedDepthwiseConv2D=Module[\"_FusedDepthwiseConv2D\"]=function(){return(_FusedDepthwiseConv2D=Module[\"_FusedDepthwiseConv2D\"]=Module[\"asm\"][\"FusedDepthwiseConv2D\"]).apply(null,arguments)};var _Gather=Module[\"_Gather\"]=function(){return(_Gather=Module[\"_Gather\"]=Module[\"asm\"][\"Gather\"]).apply(null,arguments)};var _GatherNd=Module[\"_GatherNd\"]=function(){return(_GatherNd=Module[\"_GatherNd\"]=Module[\"asm\"][\"GatherNd\"]).apply(null,arguments)};var _Greater=Module[\"_Greater\"]=function(){return(_Greater=Module[\"_Greater\"]=Module[\"asm\"][\"Greater\"]).apply(null,arguments)};var _GreaterEqual=Module[\"_GreaterEqual\"]=function(){return(_GreaterEqual=Module[\"_GreaterEqual\"]=Module[\"asm\"][\"GreaterEqual\"]).apply(null,arguments)};var _LeakyRelu=Module[\"_LeakyRelu\"]=function(){return(_LeakyRelu=Module[\"_LeakyRelu\"]=Module[\"asm\"][\"LeakyRelu\"]).apply(null,arguments)};var _Less=Module[\"_Less\"]=function(){return(_Less=Module[\"_Less\"]=Module[\"asm\"][\"Less\"]).apply(null,arguments)};var _LessEqual=Module[\"_LessEqual\"]=function(){return(_LessEqual=Module[\"_LessEqual\"]=Module[\"asm\"][\"LessEqual\"]).apply(null,arguments)};var _Log=Module[\"_Log\"]=function(){return(_Log=Module[\"_Log\"]=Module[\"asm\"][\"Log\"]).apply(null,arguments)};var _LogicalAnd=Module[\"_LogicalAnd\"]=function(){return(_LogicalAnd=Module[\"_LogicalAnd\"]=Module[\"asm\"][\"LogicalAnd\"]).apply(null,arguments)};var _LogicalNot=Module[\"_LogicalNot\"]=function(){return(_LogicalNot=Module[\"_LogicalNot\"]=Module[\"asm\"][\"LogicalNot\"]).apply(null,arguments)};var _LogicalOr=Module[\"_LogicalOr\"]=function(){return(_LogicalOr=Module[\"_LogicalOr\"]=Module[\"asm\"][\"LogicalOr\"]).apply(null,arguments)};var _LogicalXor=Module[\"_LogicalXor\"]=function(){return(_LogicalXor=Module[\"_LogicalXor\"]=Module[\"asm\"][\"LogicalXor\"]).apply(null,arguments)};var _Max=Module[\"_Max\"]=function(){return(_Max=Module[\"_Max\"]=Module[\"asm\"][\"Max\"]).apply(null,arguments)};var _MaxPool=Module[\"_MaxPool\"]=function(){return(_MaxPool=Module[\"_MaxPool\"]=Module[\"asm\"][\"MaxPool\"]).apply(null,arguments)};var _Maximum=Module[\"_Maximum\"]=function(){return(_Maximum=Module[\"_Maximum\"]=Module[\"asm\"][\"Maximum\"]).apply(null,arguments)};var _Mean=Module[\"_Mean\"]=function(){return(_Mean=Module[\"_Mean\"]=Module[\"asm\"][\"Mean\"]).apply(null,arguments)};var _Min=Module[\"_Min\"]=function(){return(_Min=Module[\"_Min\"]=Module[\"asm\"][\"Min\"]).apply(null,arguments)};var _Minimum=Module[\"_Minimum\"]=function(){return(_Minimum=Module[\"_Minimum\"]=Module[\"asm\"][\"Minimum\"]).apply(null,arguments)};var _MirrorPad=Module[\"_MirrorPad\"]=function(){return(_MirrorPad=Module[\"_MirrorPad\"]=Module[\"asm\"][\"MirrorPad\"]).apply(null,arguments)};var _Multiply=Module[\"_Multiply\"]=function(){return(_Multiply=Module[\"_Multiply\"]=Module[\"asm\"][\"Multiply\"]).apply(null,arguments)};var _Neg=Module[\"_Neg\"]=function(){return(_Neg=Module[\"_Neg\"]=Module[\"asm\"][\"Neg\"]).apply(null,arguments)};var _NonMaxSuppressionV3=Module[\"_NonMaxSuppressionV3\"]=function(){return(_NonMaxSuppressionV3=Module[\"_NonMaxSuppressionV3\"]=Module[\"asm\"][\"NonMaxSuppressionV3\"]).apply(null,arguments)};var _NonMaxSuppressionV4=Module[\"_NonMaxSuppressionV4\"]=function(){return(_NonMaxSuppressionV4=Module[\"_NonMaxSuppressionV4\"]=Module[\"asm\"][\"NonMaxSuppressionV4\"]).apply(null,arguments)};var _NonMaxSuppressionV5=Module[\"_NonMaxSuppressionV5\"]=function(){return(_NonMaxSuppressionV5=Module[\"_NonMaxSuppressionV5\"]=Module[\"asm\"][\"NonMaxSuppressionV5\"]).apply(null,arguments)};var _NotEqual=Module[\"_NotEqual\"]=function(){return(_NotEqual=Module[\"_NotEqual\"]=Module[\"asm\"][\"NotEqual\"]).apply(null,arguments)};var _OneHot=Module[\"_OneHot\"]=function(){return(_OneHot=Module[\"_OneHot\"]=Module[\"asm\"][\"OneHot\"]).apply(null,arguments)};var _PadV2=Module[\"_PadV2\"]=function(){return(_PadV2=Module[\"_PadV2\"]=Module[\"asm\"][\"PadV2\"]).apply(null,arguments)};var _Pow=Module[\"_Pow\"]=function(){return(_Pow=Module[\"_Pow\"]=Module[\"asm\"][\"Pow\"]).apply(null,arguments)};var _Prelu=Module[\"_Prelu\"]=function(){return(_Prelu=Module[\"_Prelu\"]=Module[\"asm\"][\"Prelu\"]).apply(null,arguments)};var _Prod=Module[\"_Prod\"]=function(){return(_Prod=Module[\"_Prod\"]=Module[\"asm\"][\"Prod\"]).apply(null,arguments)};var _RealDiv=Module[\"_RealDiv\"]=function(){return(_RealDiv=Module[\"_RealDiv\"]=Module[\"asm\"][\"RealDiv\"]).apply(null,arguments)};var _Relu=Module[\"_Relu\"]=function(){return(_Relu=Module[\"_Relu\"]=Module[\"asm\"][\"Relu\"]).apply(null,arguments)};var _Relu6=Module[\"_Relu6\"]=function(){return(_Relu6=Module[\"_Relu6\"]=Module[\"asm\"][\"Relu6\"]).apply(null,arguments)};var _ResizeBilinear=Module[\"_ResizeBilinear\"]=function(){return(_ResizeBilinear=Module[\"_ResizeBilinear\"]=Module[\"asm\"][\"ResizeBilinear\"]).apply(null,arguments)};var _ResizeNearestNeighbor=Module[\"_ResizeNearestNeighbor\"]=function(){return(_ResizeNearestNeighbor=Module[\"_ResizeNearestNeighbor\"]=Module[\"asm\"][\"ResizeNearestNeighbor\"]).apply(null,arguments)};var _Reverse=Module[\"_Reverse\"]=function(){return(_Reverse=Module[\"_Reverse\"]=Module[\"asm\"][\"Reverse\"]).apply(null,arguments)};var _RotateWithOffset=Module[\"_RotateWithOffset\"]=function(){return(_RotateWithOffset=Module[\"_RotateWithOffset\"]=Module[\"asm\"][\"RotateWithOffset\"]).apply(null,arguments)};var _Round=Module[\"_Round\"]=function(){return(_Round=Module[\"_Round\"]=Module[\"asm\"][\"Round\"]).apply(null,arguments)};var _Rsqrt=Module[\"_Rsqrt\"]=function(){return(_Rsqrt=Module[\"_Rsqrt\"]=Module[\"asm\"][\"Rsqrt\"]).apply(null,arguments)};var _ScatterNd=Module[\"_ScatterNd\"]=function(){return(_ScatterNd=Module[\"_ScatterNd\"]=Module[\"asm\"][\"ScatterNd\"]).apply(null,arguments)};var _SelectV2=Module[\"_SelectV2\"]=function(){return(_SelectV2=Module[\"_SelectV2\"]=Module[\"asm\"][\"SelectV2\"]).apply(null,arguments)};var _Sigmoid=Module[\"_Sigmoid\"]=function(){return(_Sigmoid=Module[\"_Sigmoid\"]=Module[\"asm\"][\"Sigmoid\"]).apply(null,arguments)};var _Sin=Module[\"_Sin\"]=function(){return(_Sin=Module[\"_Sin\"]=Module[\"asm\"][\"Sin\"]).apply(null,arguments)};var _Softmax=Module[\"_Softmax\"]=function(){return(_Softmax=Module[\"_Softmax\"]=Module[\"asm\"][\"Softmax\"]).apply(null,arguments)};var _SparseFillEmptyRows=Module[\"_SparseFillEmptyRows\"]=function(){return(_SparseFillEmptyRows=Module[\"_SparseFillEmptyRows\"]=Module[\"asm\"][\"SparseFillEmptyRows\"]).apply(null,arguments)};var _SparseReshape=Module[\"_SparseReshape\"]=function(){return(_SparseReshape=Module[\"_SparseReshape\"]=Module[\"asm\"][\"SparseReshape\"]).apply(null,arguments)};var _SparseSegmentReduction=Module[\"_SparseSegmentReduction\"]=function(){return(_SparseSegmentReduction=Module[\"_SparseSegmentReduction\"]=Module[\"asm\"][\"SparseSegmentReduction\"]).apply(null,arguments)};var _Sqrt=Module[\"_Sqrt\"]=function(){return(_Sqrt=Module[\"_Sqrt\"]=Module[\"asm\"][\"Sqrt\"]).apply(null,arguments)};var _Square=Module[\"_Square\"]=function(){return(_Square=Module[\"_Square\"]=Module[\"asm\"][\"Square\"]).apply(null,arguments)};var _SquaredDifference=Module[\"_SquaredDifference\"]=function(){return(_SquaredDifference=Module[\"_SquaredDifference\"]=Module[\"asm\"][\"SquaredDifference\"]).apply(null,arguments)};var _Step=Module[\"_Step\"]=function(){return(_Step=Module[\"_Step\"]=Module[\"asm\"][\"Step\"]).apply(null,arguments)};var _StridedSlice=Module[\"_StridedSlice\"]=function(){return(_StridedSlice=Module[\"_StridedSlice\"]=Module[\"asm\"][\"StridedSlice\"]).apply(null,arguments)};var _Sub=Module[\"_Sub\"]=function(){return(_Sub=Module[\"_Sub\"]=Module[\"asm\"][\"Sub\"]).apply(null,arguments)};var _Sum=Module[\"_Sum\"]=function(){return(_Sum=Module[\"_Sum\"]=Module[\"asm\"][\"Sum\"]).apply(null,arguments)};var _Tan=Module[\"_Tan\"]=function(){return(_Tan=Module[\"_Tan\"]=Module[\"asm\"][\"Tan\"]).apply(null,arguments)};var _Tanh=Module[\"_Tanh\"]=function(){return(_Tanh=Module[\"_Tanh\"]=Module[\"asm\"][\"Tanh\"]).apply(null,arguments)};var _Tile=Module[\"_Tile\"]=function(){return(_Tile=Module[\"_Tile\"]=Module[\"asm\"][\"Tile\"]).apply(null,arguments)};var _TopK=Module[\"_TopK\"]=function(){return(_TopK=Module[\"_TopK\"]=Module[\"asm\"][\"TopK\"]).apply(null,arguments)};var _Transform=Module[\"_Transform\"]=function(){return(_Transform=Module[\"_Transform\"]=Module[\"asm\"][\"Transform\"]).apply(null,arguments)};var _Transpose=Module[\"_Transpose\"]=function(){return(_Transpose=Module[\"_Transpose\"]=Module[\"asm\"][\"Transpose\"]).apply(null,arguments)};var __FusedMatMul=Module[\"__FusedMatMul\"]=function(){return(__FusedMatMul=Module[\"__FusedMatMul\"]=Module[\"asm\"][\"_FusedMatMul\"]).apply(null,arguments)};var _malloc=Module[\"_malloc\"]=function(){return(_malloc=Module[\"_malloc\"]=Module[\"asm\"][\"malloc\"]).apply(null,arguments)};var _free=Module[\"_free\"]=function(){return(_free=Module[\"_free\"]=Module[\"asm\"][\"free\"]).apply(null,arguments)};var ___errno_location=Module[\"___errno_location\"]=function(){return(___errno_location=Module[\"___errno_location\"]=Module[\"asm\"][\"__errno_location\"]).apply(null,arguments)};var stackSave=Module[\"stackSave\"]=function(){return(stackSave=Module[\"stackSave\"]=Module[\"asm\"][\"stackSave\"]).apply(null,arguments)};var stackRestore=Module[\"stackRestore\"]=function(){return(stackRestore=Module[\"stackRestore\"]=Module[\"asm\"][\"stackRestore\"]).apply(null,arguments)};var stackAlloc=Module[\"stackAlloc\"]=function(){return(stackAlloc=Module[\"stackAlloc\"]=Module[\"asm\"][\"stackAlloc\"]).apply(null,arguments)};var dynCall_iijjiiii=Module[\"dynCall_iijjiiii\"]=function(){return(dynCall_iijjiiii=Module[\"dynCall_iijjiiii\"]=Module[\"asm\"][\"dynCall_iijjiiii\"]).apply(null,arguments)};var dynCall_jiji=Module[\"dynCall_jiji\"]=function(){return(dynCall_jiji=Module[\"dynCall_jiji\"]=Module[\"asm\"][\"dynCall_jiji\"]).apply(null,arguments)};Module[\"cwrap\"]=cwrap;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();var listenersAdded;if(beforeListeners){listenersAdded={uncaughtException:process.listeners(\"uncaughtException\").filter(function(listener){return!beforeListeners.uncaughtException.indexOf(listener)>-1}),unhandledRejection:process.listeners(\"unhandledRejection\").filter(function(listener){return!beforeListeners.unhandledRejection.indexOf(listener)>-1})}}var actualModule;if(typeof WasmBackendModule!==\"undefined\"){actualModule=WasmBackendModule}else if(typeof WasmBackendModuleThreadedSimd!==\"undefined\"){actualModule=WasmBackendModuleThreadedSimd}else{throw new Error(\"Could not find wasm module in post.js\")}if(listenersAdded){var tmpDispose=actualModule[\"_dispose\"];actualModule[\"_dispose\"]=function(){tmpDispose();listenersAdded.uncaughtException.forEach(function(listener){process.removeListener(\"uncaughtException\",listener)});listenersAdded.unhandledRejection.forEach(function(listener){process.removeListener(\"unhandledRejection\",listener)})}}\n\n\n  return WasmBackendModule.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = WasmBackendModule;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return WasmBackendModule; });\nelse if (typeof exports === 'object')\n  exports[\"WasmBackendModule\"] = WasmBackendModule;\n","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport './flags_wasm';\n\nimport {backend_util, BackendTimingInfo, DataStorage, DataType, deprecationWarn, engine, env, KernelBackend, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {BackendWasmModule, WasmFactoryConfig} from '../wasm-out/tfjs-backend-wasm';\nimport {BackendWasmThreadedSimdModule} from '../wasm-out/tfjs-backend-wasm-threaded-simd';\nimport  * as wasmFactoryThreadedSimd_import from '../wasm-out/tfjs-backend-wasm-threaded-simd.js';\n// @ts-ignore\nimport {wasmWorkerContents} from '../wasm-out/tfjs-backend-wasm-threaded-simd.worker.js';\nimport * as wasmFactory_import from '../wasm-out/tfjs-backend-wasm.js';\n\n// This workaround is required for importing in Node.js without using\n// the node bundle (for testing). This would not be necessary if we\n// flipped esModuleInterop to true, but we likely can't do that since\n// google3 does not use it.\nconst wasmFactoryThreadedSimd = (wasmFactoryThreadedSimd_import.default\n  || wasmFactoryThreadedSimd_import) as\ntypeof wasmFactoryThreadedSimd_import.default;\nconst wasmFactory = (wasmFactory_import.default\n  || wasmFactory_import) as typeof wasmFactory_import.default;\n\ninterface TensorData {\n  id: number;\n  memoryOffset: number;\n  shape: number[];\n  dtype: DataType;\n  refCount: number;\n  /** Only used for string tensors, storing encoded bytes. */\n  stringBytes?: Uint8Array[];\n}\n\nexport type DataId = object;  // object instead of {} to force non-primitive.\n\nexport class BackendWasm extends KernelBackend {\n  // 0 is reserved for null data ids.\n  private dataIdNextNumber = 1;\n  dataIdMap: DataStorage<TensorData>;\n\n  constructor(public wasm: BackendWasmModule|BackendWasmThreadedSimdModule) {\n    super();\n    this.wasm.tfjs.initWithThreadsCount(threadsCount);\n    actualThreadsCount = this.wasm.tfjs.getThreadsCount();\n    this.dataIdMap = new DataStorage(this, engine());\n  }\n\n  write(values: backend_util.BackendValues, shape: number[], dtype: DataType):\n      DataId {\n    const dataId = {id: this.dataIdNextNumber++};\n    this.move(dataId, values, shape, dtype, 1);\n    return dataId;\n  }\n\n  numDataIds(): number {\n    return this.dataIdMap.numDataIds();\n  }\n\n  async time(f: () => void): Promise<BackendTimingInfo> {\n    const start = util.now();\n    f();\n    const kernelMs = util.now() - start;\n    return {kernelMs};\n  }\n\n  move(\n      dataId: DataId, values: backend_util.BackendValues, shape: number[],\n      dtype: DataType, refCount: number): void {\n    const id = this.dataIdNextNumber++;\n    if (dtype === 'string') {\n      const stringBytes = values as Uint8Array[];\n      this.dataIdMap.set(\n          dataId,\n          {id, stringBytes, shape, dtype, memoryOffset: null, refCount});\n      return;\n    }\n\n    const size = util.sizeFromShape(shape);\n    const numBytes = size * util.bytesPerElement(dtype);\n    const memoryOffset = this.wasm._malloc(numBytes);\n\n    this.dataIdMap.set(dataId, {id, memoryOffset, shape, dtype, refCount});\n\n    this.wasm.tfjs.registerTensor(id, size, memoryOffset);\n\n    if (values != null) {\n      this.wasm.HEAPU8.set(\n          new Uint8Array(\n              (values as backend_util.TypedArray).buffer,\n              (values as backend_util.TypedArray).byteOffset, numBytes),\n          memoryOffset);\n    }\n  }\n\n  async read(dataId: DataId): Promise<backend_util.BackendValues> {\n    return this.readSync(dataId);\n  }\n\n  readSync(dataId: DataId, start?: number, end?: number):\n      backend_util.BackendValues {\n    const {memoryOffset, dtype, shape, stringBytes} =\n        this.dataIdMap.get(dataId);\n    if (dtype === 'string') {\n      // Slice all elements.\n      if ((start == null || start === 0) &&\n          (end == null || end >= stringBytes.length)) {\n        return stringBytes;\n      }\n      return stringBytes.slice(start, end);\n    }\n    start = start || 0;\n    end = end || util.sizeFromShape(shape);\n    const bytesPerElement = util.bytesPerElement(dtype);\n    const bytes = this.wasm.HEAPU8.slice(\n        memoryOffset + start * bytesPerElement,\n        memoryOffset + end * bytesPerElement);\n    return typedArrayFromBuffer(bytes.buffer, dtype);\n  }\n\n  /**\n   * Dispose the memory if the dataId has 0 refCount. Return true if the memory\n   * is released, false otherwise.\n   * @param dataId\n   * @oaram force Optional, remove the data regardless of refCount\n   */\n  disposeData(dataId: DataId, force = false): boolean {\n    if (this.dataIdMap.has(dataId)) {\n      const data = this.dataIdMap.get(dataId);\n      data.refCount--;\n      if (!force && data.refCount > 0) {\n        return false;\n      }\n\n      this.wasm._free(data.memoryOffset);\n      this.wasm.tfjs.disposeData(data.id);\n      this.dataIdMap.delete(dataId);\n    }\n    return true;\n  }\n\n  /** Return refCount of a `TensorData`. */\n  refCount(dataId: DataId): number {\n    if (this.dataIdMap.has(dataId)) {\n      const tensorData = this.dataIdMap.get(dataId);\n      return tensorData.refCount;\n    }\n    return 0;\n  }\n\n  incRef(dataId: DataId) {\n    const data = this.dataIdMap.get(dataId);\n    if (data != null) {\n      data.refCount++;\n    }\n  }\n\n  floatPrecision(): 32 {\n    return 32;\n  }\n\n  // Returns the memory offset of a tensor. Useful for debugging and unit\n  // testing.\n  getMemoryOffset(dataId: DataId): number {\n    return this.dataIdMap.get(dataId).memoryOffset;\n  }\n\n  dispose() {\n    this.wasm.tfjs.dispose();\n    if ('PThread' in this.wasm) {\n      this.wasm.PThread.terminateAllThreads();\n    }\n    this.wasm = null;\n  }\n\n  memory() {\n    return {unreliable: false};\n  }\n\n  /**\n   * Make a tensor info for the output of an op. If `memoryOffset` is not\n   * present, this method allocates memory on the WASM heap. If `memoryOffset`\n   * is present, the memory was allocated elsewhere (in c++) and we just record\n   * the pointer where that memory lives.\n   */\n  makeOutput(shape: number[], dtype: DataType, memoryOffset?: number):\n      TensorInfo {\n    let dataId: {};\n    if (memoryOffset == null) {\n      dataId = this.write(null /* values */, shape, dtype);\n    } else {\n      const id = this.dataIdNextNumber++;\n      dataId = {id};\n      this.dataIdMap.set(dataId, {id, memoryOffset, shape, dtype, refCount: 1});\n      const size = util.sizeFromShape(shape);\n      this.wasm.tfjs.registerTensor(id, size, memoryOffset);\n    }\n    return {dataId, shape, dtype};\n  }\n\n  typedArrayFromHeap({shape, dtype, dataId}: TensorInfo):\n      backend_util.TypedArray {\n    const buffer = this.wasm.HEAPU8.buffer;\n    const {memoryOffset} = this.dataIdMap.get(dataId);\n    const size = util.sizeFromShape(shape);\n    switch (dtype) {\n      case 'float32':\n        return new Float32Array(buffer, memoryOffset, size);\n      case 'int32':\n        return new Int32Array(buffer, memoryOffset, size);\n      case 'bool':\n        return new Uint8Array(buffer, memoryOffset, size);\n      default:\n        throw new Error(`Unknown dtype ${dtype}`);\n    }\n  }\n}\n\nfunction createInstantiateWasmFunc(path: string) {\n  // this will be replace by rollup plugin patchWechatWebAssembly in\n  // minprogram's output.\n  // tslint:disable-next-line:no-any\n  return (imports: any, callback: any) => {\n    util.fetch(path, {credentials: 'same-origin'}).then((response) => {\n      if (!response['ok']) {\n        imports.env.a(`failed to load wasm binary file at '${path}'`);\n      }\n      response.arrayBuffer().then(binary => {\n        WebAssembly.instantiate(binary, imports).then(output => {\n          callback(output.instance, output.module);\n        });\n      });\n    });\n    return {};\n  };\n}\n\n/**\n * Returns the path of the WASM binary.\n * @param simdSupported whether SIMD is supported\n * @param threadsSupported whether multithreading is supported\n * @param wasmModuleFolder the directory containing the WASM binaries.\n */\nfunction getPathToWasmBinary(\n    simdSupported: boolean, threadsSupported: boolean,\n    wasmModuleFolder: string) {\n  if (wasmPath != null) {\n    // If wasmPath is defined, the user has supplied a full path to\n    // the vanilla .wasm binary.\n    return wasmPath;\n  }\n\n  let path: WasmBinaryName = 'tfjs-backend-wasm.wasm';\n  if (simdSupported && threadsSupported) {\n    path = 'tfjs-backend-wasm-threaded-simd.wasm';\n  } else if (simdSupported) {\n    path = 'tfjs-backend-wasm-simd.wasm';\n  }\n\n  if (wasmFileMap != null) {\n    if (wasmFileMap[path] != null) {\n      return wasmFileMap[path];\n    }\n  }\n\n  return wasmModuleFolder + path;\n}\n\n/**\n * Initializes the wasm module and creates the js <--> wasm bridge.\n *\n * NOTE: We wrap the wasm module in a object with property 'wasm' instead of\n * returning Promise<BackendWasmModule> to avoid freezing Chrome (last tested\n * in Chrome 76).\n */\nexport async function init(): Promise<{wasm: BackendWasmModule}> {\n  const [simdSupported, threadsSupported] = await Promise.all([\n    env().getAsync('WASM_HAS_SIMD_SUPPORT'),\n    env().getAsync('WASM_HAS_MULTITHREAD_SUPPORT')\n  ]);\n\n  return new Promise((resolve, reject) => {\n    const factoryConfig: WasmFactoryConfig = {};\n\n    /**\n     * This function overrides the Emscripten module locateFile utility.\n     * @param path The relative path to the file that needs to be loaded.\n     * @param prefix The path to the main JavaScript file's directory.\n     */\n    factoryConfig.locateFile = (path, prefix) => {\n      if (path.endsWith('.worker.js')) {\n        // Escape '\\n' because Blob will turn it into a newline.\n        // There should be a setting for this, but 'endings: \"native\"' does\n        // not seem to work.\n        const response = (wasmWorkerContents as string).replace(/\\n/g, '\\\\n');\n        const blob = new Blob([response], {type: 'application/javascript'});\n        return URL.createObjectURL(blob);\n      }\n\n      if (path.endsWith('.wasm')) {\n        return getPathToWasmBinary(\n            simdSupported as boolean, threadsSupported as boolean,\n            wasmPathPrefix != null ? wasmPathPrefix : prefix);\n      }\n      return prefix + path;\n    };\n\n    // Use the instantiateWasm override when system fetch is not available.\n    // Reference:\n    // https://github.com/emscripten-core/emscripten/blob/2bca083cbbd5a4133db61fbd74d04f7feecfa907/tests/manual_wasm_instantiate.html#L170\n    if (customFetch) {\n      factoryConfig.instantiateWasm =\n          createInstantiateWasmFunc(getPathToWasmBinary(\n              simdSupported as boolean, threadsSupported as boolean,\n              wasmPathPrefix != null ? wasmPathPrefix : ''));\n    }\n\n    let initialized = false;\n    factoryConfig.onAbort = () => {\n      if (initialized) {\n        // Emscripten already called console.warn so no need to double log.\n        return;\n      }\n      if (initAborted) {\n        // Emscripten calls `onAbort` twice, resulting in double error\n        // messages.\n        return;\n      }\n      initAborted = true;\n      const rejectMsg =\n          'Make sure the server can serve the `.wasm` file relative to the ' +\n          'bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers';\n      reject({message: rejectMsg});\n    };\n\n    let wasm: Promise<BackendWasmModule>;\n    // If `wasmPath` has been defined we must initialize the vanilla module.\n    if (threadsSupported && simdSupported && wasmPath == null) {\n      factoryConfig.mainScriptUrlOrBlob = new Blob(\n          [`var WasmBackendModuleThreadedSimd = ` +\n           wasmFactoryThreadedSimd.toString()],\n          {type: 'text/javascript'});\n      wasm = wasmFactoryThreadedSimd(factoryConfig);\n    } else {\n      // The wasmFactory works for both vanilla and SIMD binaries.\n      wasm = wasmFactory(factoryConfig);\n    }\n\n    // The `wasm` promise will resolve to the WASM module created by\n    // the factory, but it might have had errors during creation. Most\n    // errors are caught by the onAbort callback defined above.\n    // However, some errors, such as those occurring from a\n    // failed fetch, result in this promise being rejected. These are\n    // caught and re-rejected below.\n    wasm.then((module) => {\n      initialized = true;\n      initAborted = false;\n\n      const voidReturnType: string = null;\n      // Using the tfjs namespace to avoid conflict with emscripten's API.\n      module.tfjs = {\n        init: module.cwrap('init', null, []),\n        initWithThreadsCount:\n            module.cwrap('init_with_threads_count', null, ['number']),\n        getThreadsCount: module.cwrap('get_threads_count', 'number', []),\n        registerTensor: module.cwrap(\n            'register_tensor', null,\n            [\n              'number',  // id\n              'number',  // size\n              'number',  // memoryOffset\n            ]),\n        disposeData: module.cwrap('dispose_data', voidReturnType, ['number']),\n        dispose: module.cwrap('dispose', voidReturnType, []),\n      };\n\n      resolve({wasm: module});\n    }).catch(reject);\n  });\n}\n\nfunction typedArrayFromBuffer(\n    buffer: ArrayBuffer, dtype: DataType): backend_util.TypedArray {\n  switch (dtype) {\n    case 'float32':\n      return new Float32Array(buffer);\n    case 'int32':\n      return new Int32Array(buffer);\n    case 'bool':\n      return new Uint8Array(buffer);\n    default:\n      throw new Error(`Unknown dtype ${dtype}`);\n  }\n}\n\nconst wasmBinaryNames = [\n  'tfjs-backend-wasm.wasm', 'tfjs-backend-wasm-simd.wasm',\n  'tfjs-backend-wasm-threaded-simd.wasm'\n] as const ;\ntype WasmBinaryName = typeof wasmBinaryNames[number];\n\nlet wasmPath: string = null;\nlet wasmPathPrefix: string = null;\nlet wasmFileMap: {[key in WasmBinaryName]?: string} = {};\nlet initAborted = false;\nlet customFetch = false;\n\n/**\n * @deprecated Use `setWasmPaths` instead.\n * Sets the path to the `.wasm` file which will be fetched when the wasm\n * backend is initialized. See\n * https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers\n * for more details.\n * @param path wasm file path or url\n * @param usePlatformFetch optional boolean to use platform fetch to download\n *     the wasm file, default to false.\n *\n * @doc {heading: 'Environment', namespace: 'wasm'}\n */\nexport function setWasmPath(path: string, usePlatformFetch = false): void {\n  deprecationWarn(\n      'setWasmPath has been deprecated in favor of setWasmPaths and' +\n      ' will be removed in a future release.');\n  if (initAborted) {\n    throw new Error(\n        'The WASM backend was already initialized. Make sure you call ' +\n        '`setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`');\n  }\n  wasmPath = path;\n  customFetch = usePlatformFetch;\n}\n\n/**\n * Configures the locations of the WASM binaries.\n *\n * ```js\n * setWasmPaths({\n *  'tfjs-backend-wasm.wasm': 'renamed.wasm',\n *  'tfjs-backend-wasm-simd.wasm': 'renamed-simd.wasm',\n *  'tfjs-backend-wasm-threaded-simd.wasm': 'renamed-threaded-simd.wasm'\n * });\n * tf.setBackend('wasm');\n * ```\n *\n * @param prefixOrFileMap This can be either a string or object:\n *  - (string) The path to the directory where the WASM binaries are located.\n *     Note that this prefix will be used to load each binary (vanilla,\n *     SIMD-enabled, threading-enabled, etc.).\n *  - (object) Mapping from names of WASM binaries to custom\n *     full paths specifying the locations of those binaries. This is useful if\n *     your WASM binaries are not all located in the same directory, or if your\n *     WASM binaries have been renamed.\n * @param usePlatformFetch optional boolean to use platform fetch to download\n *     the wasm file, default to false.\n *\n * @doc {heading: 'Environment', namespace: 'wasm'}\n */\nexport function setWasmPaths(\n    prefixOrFileMap: string|{[key in WasmBinaryName]?: string},\n    usePlatformFetch = false): void {\n  if (initAborted) {\n    throw new Error(\n        'The WASM backend was already initialized. Make sure you call ' +\n        '`setWasmPaths()` before you call `tf.setBackend()` or ' +\n        '`tf.ready()`');\n  }\n\n  if (typeof prefixOrFileMap === 'string') {\n    wasmPathPrefix = prefixOrFileMap;\n  } else {\n    wasmFileMap = prefixOrFileMap;\n    const missingPaths =\n        wasmBinaryNames.filter(name => wasmFileMap[name] == null);\n    if (missingPaths.length > 0) {\n      throw new Error(\n          `There were no entries found for the following binaries: ` +\n          `${missingPaths.join(',')}. Please either call setWasmPaths with a ` +\n          `map providing a path for each binary, or with a string indicating ` +\n          `the directory where all the binaries can be found.`);\n    }\n  }\n\n  customFetch = usePlatformFetch;\n}\n\n/** Used in unit tests. */\nexport function resetWasmPath(): void {\n  wasmPath = null;\n  wasmPathPrefix = null;\n  wasmFileMap = {};\n  customFetch = false;\n  initAborted = false;\n}\n\nlet threadsCount = -1;\nlet actualThreadsCount = -1;\n\n/**\n * Sets the number of threads that will be used by XNNPACK to create\n * threadpool (default to the number of logical CPU cores).\n *\n * This must be called before calling `tf.setBackend('wasm')`.\n */\nexport function setThreadsCount(numThreads: number) {\n  threadsCount = numThreads;\n}\n\n/**\n * Gets the actual threads count that is used by XNNPACK.\n *\n * It is set after the backend is intialized.\n */\nexport function getThreadsCount(): number {\n  if (actualThreadsCount === -1) {\n    throw new Error(`WASM backend not initialized.`);\n  }\n  return actualThreadsCount;\n}\n","module.exports.wasmWorkerContents = `\"use strict\";var Module={};var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require(\"worker_threads\");var parentPort=nodeWorkerThreads.parentPort;parentPort.on(\"message\",data=>onmessage({data:data}));var fs=require(\"fs\");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,\"utf8\"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(\" \");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+\"\\n\");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(\" \");postMessage({cmd:\"alert\",text:text,threadId:Module[\"_pthread_self\"]()})}var err=threadPrintErr;self.alert=threadAlert;Module[\"instantiateWasm\"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module[\"wasmModule\"],info);receiveInstance(instance);Module[\"wasmModule\"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.onmessage=e=>{try{if(e.data.cmd===\"load\"){Module[\"wasmModule\"]=e.data.wasmModule;Module[\"wasmMemory\"]=e.data.wasmMemory;Module[\"buffer\"]=Module[\"wasmMemory\"].buffer;Module[\"ENVIRONMENT_IS_PTHREAD\"]=true;if(typeof e.data.urlOrBlob==\"string\"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd===\"run\"){Module[\"__performance_now_clock_drift\"]=performance.now()-e.data.time;Module[\"__emscripten_thread_init\"](e.data.pthread_ptr,0,0,1);Module[\"establishStackSpace\"]();Module[\"PThread\"].receiveObjectTransfer(e.data);Module[\"PThread\"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module[\"executeNotifiedProxyingQueue\"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module[\"invokeEntryPoint\"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!=\"unwind\"){if(ex instanceof Module[\"ExitStatus\"]){if(Module[\"keepRuntimeAlive\"]()){}else{Module[\"__emscripten_thread_exit\"](ex.status)}}else{throw ex}}}}else if(e.data.cmd===\"cancel\"){if(Module[\"_pthread_self\"]()){Module[\"__emscripten_thread_exit\"](-1)}}else if(e.data.target===\"setimmediate\"){}else if(e.data.cmd===\"processProxyingQueue\"){if(initializedJS){Module[\"executeNotifiedProxyingQueue\"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err(\"worker.js received unknown command \"+e.data.cmd);err(e.data)}}catch(ex){if(Module[\"__emscripten_thread_crashed\"]){Module[\"__emscripten_thread_crashed\"]()}throw ex}};`;","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport './flags_wasm';\n\nimport {registerBackend} from '@tensorflow/tfjs-core';\n\nimport {BackendWasm, init} from './backend_wasm';\n\nexport {BackendWasm, getThreadsCount, setThreadsCount, setWasmPath, setWasmPaths} from './backend_wasm';\nexport {version as version_wasm} from './version';\n\nconst WASM_PRIORITY = 2;\nregisterBackend('wasm', async () => {\n  const {wasm} = await init();\n  return new BackendWasm(wasm);\n}, WASM_PRIORITY);\n","/** @license See the LICENSE file. */\n\n// This code is auto-generated, do not modify this file!\nconst version = '3.21.0';\nexport {version};\n"],"names":["CppDType","FusableActivation","wasmFusedMatMul","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","pop","length","push","__values","o","s","m","i","__read","r","ar","error","__spread","arguments","concat","_fusedMatMulConfig","kernelName","_FusedMatMul","backendName","setupFunc","backend","wasm","cwrap","kernelFunc","args","inputs","attrs","a","bias","preluActivationWeights","dtype","Error","transposeA","transposeB","activation","leakyreluAlpha","aId","dataIdMap","get","dataId","id","bId","biasId","biasData","shape","preluActivationWeightsId","fusedActivation","leftDim","rightDim","batchDims","broadcast_util","assertAndGetBroadcastShape","slice","out","makeOutput","outId","aShapeBytes","Uint8Array","Int32Array","buffer","bShapeBytes","createUnaryKernelConfig","outType","wasmFunc","x","xId","util","sizeFromShape","absConfig","Abs","createBinaryKernelConfig","supportsFullBroadcast","outputType","newShape","backend_util","addConfig","Add","addNConfig","AddN","inputIds","map","inputIdsBytes","identity","inVals","typedArrayFromHeap","set","wasmTranspose","identityConfig","Identity","transpose","_a","perm","newPerm","minValIdx","j","reducedShape","permIsNoOp","outShape","inShape","computeOutShape","cloned","permBytes","xShapeBytes","wasmAll","transposeConfig","Transpose","permuteAxesAndTranspose","axis","xShape","xRank","originalAxes","parseAxisParam","axes","permutedAxes","getAxesPermutation","xTransposed","inputWasTransposed","getInnerMostAxes","transposed","wasmAny","allConfig","All","keepDims","inputId","input","inputRank","assertAxesAreInnerMostDims","_b","reduceShape","reduceSize","disposeData","expandShapeToKeepDim","anyConfig","Any","wasmAvgPool","argMaxConfig","ArgMax","transposedId","outerSize","innerSize","avgPoolConfig","AvgPool","filterSize","strides","pad","dimRoundingMode","convInfo","computePool2DInfo","filterHeight","filterWidth","padTop","padInfo","top","padRight","right","padBottom","bottom","padLeft","left","strideHeight","strideWidth","channels","inChannels","dataFormat","dilationWidth","dilationHeight","reshape","xSize","$shape","inferFromImplicitShape","assert","incRef","wasmBatchMatMul","reshapeConfig","Reshape","batchMatMulConfig","BatchMatMul","aRank","bRank","innerShapeA","innerShapeB","outerShapeA","outerShapeB","outerDimsA","outerDimsB","batchDimA","batchDimB","b3dShape","a3d","b3d","a3dId","b3dId","batchDim","Math","max","sliceImpl","vals","begin","size","isContinous","slice_util","isSliceContinous","xStrides","computeStrides","flatOffset","computeFlatOffset","subarray","decodedData","fromUint8ToStringArray","inBuf","outBuf","outLoc","indexToLoc","inLoc","idx","fromStringArrayToUint8","values","RowPartitionType","separator","nGramWidths","leftPad","rightPad","padWidth","preserveShortSequences","encodeString","preserveShort","StringNGramsOp","nGramWidth","min","getPadWidth","data","splitIndex","output","outputStartIndex","numNGrams","nGramIndex","this_1","leftPadding","rightPadding","numTokens","dataStartIndex","nGramSize","nGram","nextNGramIndex","appendToNGram","str","forEach","splits","inputDataSize","splitsSize","prevSplit","validSplits","numBatchItems","nGramsSplits","getArrayFromDType","empty","this_2","_this","getNumNGrams","nGrams","outputStartIdx","this_3","createNGrams","dataLength","split","delimiters","skipEmpty","tokenStart","indexOf","token","delimiter","begin_","size_","xVals","readSync","outData","stringBytes","res","sliceImplCPU","outVals","rank","xStride","outOffset","beginI","beginJ","endI","xOffset","slice2d","xStride1","xStride2","beginK","endJ","slice3d","xStride3","endK","beginL","k","slice4d","sliceConfig","Slice","batchToSpaceNDConfig","BatchToSpaceND","blockShape","crops","prod","reduce","reshaped","getReshaped","permuted","getPermuted","reshapedPermuted","getReshapedPermuted","sliceBeginCoords","getSliceBeginCoords","sliceSize","getSliceSize","xReshaped","cast","wasmClip","castConfig","Cast","ceilConfig","Ceil","clipByValueConfig","ClipByValue","clipValueMin","clipValueMax","shapes","assertParamsConsistent","$inputs","filter","inputs2D","inputsValShapes","simplyConcat","outVals_1","offset_1","colOffset_1","tIdx","row","resIdx","col","concatImplCPU","finalOutShape","sumInnerDims","innerDims","innerDim","inOffset","wasmConv2d","concatConfig","Concat","wasmConv2DBackpropInput","conv2DConfig","Conv2D","filterId","dilations","$dataFormat","convertConv2DDataFormat","computeConv2DInfo","inputChannels","outputChannels","outChannels","isSamePad","type","InterpolationMethod","wasmCropAndResize","conv2DBackpropInputConfig","Conv2DBackpropInput","dy","inputShape","batchSize","inHeight","inWidth","outHeight","outWidth","topPad","isChannelsLast","dxStrides","dyStrides","fltS0","fltS1","fltS2","xBatchStride","xRowStride","xColStride","xChannelStride","yBatchStride","yRowStride","yColStride","yChannelStride","dyId","cosConfig","Cos","coshConfig","Cosh","wasmCumprod","cropAndResizeConfig","CropAndResize","castedData","method","extrapolationValue","cropSize","image","boxes","boxInd","numBoxes","cropHeight","cropWidth","imagesData","imagesId","boxesId","boxIndId","imagesShapeBytes","wasmCumsum","cumprodConfig","Cumprod","exclusive","reverse","permutation","permutedX","permutedAxis","permutedOut","finalDim","permutedXId","permutedOutId","getUndoAxesPermutation","wasmDepthToSpace","cumsumConfig","Cumsum","wasmDepthwiseConv2d","depthToSpaceConfig","DepthToSpace","blockSize","outputHeight","outputWidth","outputDepth","outputShape","xStridesBytes","outputShapeBytes","outStridesBytes","depthwiseConv2dNativeConfig","DepthwiseConv2dNative","$dilations","eluConfig","Elu","equalConfig","Equal","expConfig","Exp","expandDims","dim","$dim","splice","expandDimsConfig","ExpandDims","fill","wasmFlipLeftRight","fillConfig","Fill","wasmBatchNorm","flipLeftRightConfig","FlipLeftRight","imageId","batch","imageHeight","imageWidth","numChannels","floorConfig","Floor","floorDivConfig","FloorDiv","wasmFusedConv2d","fusedBatchNormConfig","FusedBatchNorm","varianceEpsilon","mean","variance","offset","scale","meanId","varianceId","offsetId","scaleId","wasmFusedDepthwiseConv2d","fusedConv2DConfig","FusedConv2D","wasmGatherNd","fusedDepthwiseConv2DConfig","FusedDepthwiseConv2D","wasmGather","gatherNdConfig","GatherNd","params","indices","resultShape","numSlices","indicesShape","sliceRank","indicesId","stridesBytes","gatherV2Config","GatherV2","parsedAxis","indicesVals","axisDim","index","shapeInfo","segment_util","collectGatherOpShapeInfo","flattenX","dimSize","indicesSize","flattenIndex","flattenOutputShape","stridesSize","greaterConfig","Greater","greaterEqualConfig","GreaterEqual","wasmMax","leakyReluConfig","LeakyRelu","alpha","lessConfig","Less","lessEqualConfig","LessEqual","logConfig","Log","logicalAndConfig","LogicalAnd","logicalNotConfig","LogicalNot","logicalOrConfig","LogicalOr","logicalXorConfig","LogicalXor","wasmMaxPool","maxConfig","Max","maximumConfig","Maximum","wasmMean","maxPoolConfig","MaxPool","wasmMin","meanConfig","Mean","reductionAxes","castedInput","MirrorPaddingMode","wasmMirrorPad","minConfig","Min","minimumConfig","Minimum","mirrorPadConfig","MirrorPad","paddings","mode","prePaddingsFlat","padTuple","postPaddingsFlat","prePaddingsBytes","postPaddingsBytes","multiplyConfig","Multiply","negConfig","Neg","parseResultStruct","resOffset","HEAPU8","pSelectedIndices","selectedSize","pSelectedScores","pValidOutputs","_free","nonMaxSuppressionV3Config","NonMaxSuppressionV3","iouThreshold","maxOutputSize","scoreThreshold","scores","scoresId","nonMaxSuppressionV4Config","NonMaxSuppressionV4","padToMaxOutputSize","wasmOneHot","nonMaxSuppressionV5Config","NonMaxSuppressionV5","softNmsSigma","notEqualConfig","NotEqual","oneHotConfig","OneHot","depth","onValue","offValue","onesLikeConfig","OnesLike","wasmPadV2","packConfig","Pack","assertShapesMatch","intermediateTensorInfos","expandedT","wasmPrelu","padV2Config","PadV2","constantValue","powConfig","Pow","wasmProd","preluConfig","Prelu","weightsId","wasmResizeBilinear","prodConfig","Prod","rangeConfig","Range","start","stop","makeZerosTypedArray","numElements","abs","ceil","rangeImplCPU","realDivConfig","RealDiv","reluConfig","Relu","relu6Config","Relu6","wasmResizeNearestNeighbor","resizeBilinearConfig","ResizeBilinear","images","alignCorners","halfPixelCenters","newHeight","newWidth","oldHeight","oldWidth","xData","wasmReverse","resizeNearestNeighborConfig","ResizeNearestNeighbor","wasmRotate","reverseConfig","Reverse","dims","axesBytes","outShapeBytes","wasmScatterNd","rotateWithOffsetConfig","RotateWithOffset","radians","fillValue","center","centerX","centerY","fillValues","fillBytes","roundConfig","Round","rsqrtConfig","Rsqrt","wasmSelect","scatterNdConfig","ScatterNd","updates","numUpdates","outputSize","updatesId","selectConfig","Select","condition","conditionId","tId","eId","cRank","tRank","sigmoidConfig","Sigmoid","sinConfig","Sin","softmaxConfig","Softmax","logits","wasmSparseFillEmptyRows","spaceToBatchNDConfig","SpaceToBatchND","completePaddings","paddedX","reshapedPaddedShape","permutedReshapedPaddedPermutation","flattenShape","paddedXReshaped","paddedXT","wasmSparseReshape","sparseFillEmptyRowsConfig","SparseFillEmptyRows","exceptionMessage","denseShape","defaultValue","indicesCount","denseRows","maxOutputIndicesShape","valuesId","defaultValueId","outputIndices","outputIndicesId","outputValues","outputValuesId","emptyRowIndicator","emptyRowIndicatorId","reverseIndexMap","reverseIndexMapId","exceptionValues","exceptionValuesId","outputRows","exceptionValuesArray","getSparseFillEmptyRowsIndicesDenseShapeMismatch","getSparseFillEmptyRowsNegativeIndexErrorMessage","getSparseFillEmptyRowsOutOfRangeIndexErrorMessage","resizedIndices","resizedValues","wasmSparseSegmentReduction","sparseReshapeConfig","SparseReshape","inputIndices","inputIndicesId","inputShapeId","newShapeId","nnz","outputRank","newIndices","newIndicesId","outputShapeId","getSparseReshapeMultipleNegativeOneOutputDimErrorMessage","getSparseReshapeNegativeOutputDimErrorMessage","getSparseReshapeEmptyTensorZeroOutputDimErrorMessage","inputShapeValues","from","outputShapeValues","getSparseReshapeInputOutputMultipleErrorMessage","getSparseReshapeInputOutputMismatchErrorMessage","setup","sparseSegmentReduction","isMean","segmentIds","numIndices","segmentIdsBack","getSparseSegmentReductionNegativeSegmentIdsErrorMessage","segmentIdsId","outputId","getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage","getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage","getSparseSegmentReductionIndicesOutOfRangeErrorMessage","sparseSegmentMeanConfig","SparseSegmentMean","sparseSegmentSumConfig","SparseSegmentSum","wasmStep","splitVConfig","SplitV","numOrSizeSplits","$axis","splitSizes","prepareSplitSize","xSliceSize","xSlice","sqrtConfig","Sqrt","squareConfig","Square","squaredDifferenceConfig","SquaredDifference","wasmStridedSlice","stepConfig","Step","stridedSliceConfig","StridedSlice","end","beginMask","endMask","ellipsisMask","newAxisMask","shrinkAxisMask","finalShapeSparse","finalShape","isIdentity","sliceDim0","isSimpleSlice","$begin","$end","$strides","sliced","beginBytes","endBytes","stringNGramsConfig","StringNGrams","dataSplits","compute","nGramsOut","nGramsSplitsOut","stringSplitConfig","StringSplit","tokens","maxNumEntries","prevTokensLength","nEntries","c","indicesOut","valuesOut","shapeOut","wasmSum","stringToHashBucketFastConfig","StringToHashBucketFast","numBuckets","fingerPrint64","modulo","getLowBitsUnsigned","stringToHashBucketFastImplCPU","subConfig","Sub","wasmTile","sumConfig","Sum","tanConfig","Tan","tanhConfig","Tanh","wasmTopK","tileConfig","Tile","reps","newShapeBytes","wasmTransform","topKConfig","TopK","sorted","outValues","outValuesId","outIndices","outIndicesId","transformConfig","Transform","fillModeId","transforms","interpolation","fillMode","inputStrides","outputStrides","transformsId","interpolationModeId","unpackConfig","Unpack","numOutputs","outIndex","outs","zerosLikeConfig","ZerosLike","kernelConfigs","kernelConfigs_1","tslib_1.__values","kernelConfig","registerKernel","ENV","env","registerFlag","WebAssembly","validate","MessageChannel","port1","postMessage","SharedArrayBuffer","_scriptDir","WasmBackendModuleThreadedSimd","document","currentScript","src","undefined","__filename","GROWABLE_HEAP_I8","wasmMemory","updateGlobalBufferAndViews","HEAP8","GROWABLE_HEAP_U8","GROWABLE_HEAP_I32","HEAP32","GROWABLE_HEAP_U32","HEAPU32","GROWABLE_HEAP_F64","HEAPF64","readyPromiseResolve","readyPromiseReject","beforeListeners","Module","process","listeners","uncaughtException","unhandledRejection","read_","readAsync","readBinary","moduleOverrides","assign","quit_","status","toThrow","ENVIRONMENT_IS_WEB","window","ENVIRONMENT_IS_WORKER","importScripts","ENVIRONMENT_IS_NODE","versions","node","ENVIRONMENT_IS_PTHREAD","scriptDirectory","locateFile","path","fs","nodePath","require$$0","dirname","__dirname","require","require$$1","filename","binary","readFileSync","ret","onload","onerror","readFile","err","replace","ex","ExitStatus","reason","keepRuntimeAlive","nodeWorkerThreads","require$$2","console","global","Worker","self","location","href","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","responseType","response","performance","require$$3","defaultPrint","log","bind","defaultPrintErr","warn","writeSync","wasmBinary","wasmModule","noExitRuntime","abort","EXITSTATUS","ABORT","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","maxBytesToRead","endIdx","endPtr","decode","u0","u1","u2","String","fromCharCode","ch","buf","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","Float64Array","wasmTable","INITIAL_MEMORY","Memory","initial","maximum","shared","byteLength","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","initRuntime","callRuntimeCallbacks","wasmBinaryFile","runDependencies","dependenciesFulfilled","what","cmd","arg","RuntimeError","isDataURI","startsWith","isFileURI","getBinary","file","ASM_CONSTS","name","message","cleanupThread","pthread_ptr","text","worker","PThread","pthreads","returnWorkerToPool","spawnThread","threadParams","getNewWorker","runningWorkers","msg","start_routine","startRoutine","runPthread","time","now","transferList","loaded","_proc_exit","code","_emscripten_proxy_to_main_thread_js","terminateAllThreads","_exit","implicit","exitOnMainThread","unusedWorkers","tlsInitFunctions","init","initWorker","initMainThread","pthreadPoolSize","allocateUnusedWorker","setExitStatus","_c","_e","terminate","__emscripten_thread_free_data","receiveObjectTransfer","threadInitTLS","loadWasmModuleToWorker","onFinishedLoading","onmessage","currentProxiedOperationCallerThread","_pthread_self","targetWorker","targetThread","executeNotifiedProxyingQueue","killThread","alert","target","lineno","on","urlOrBlob","pthreadMainJs","callbacks","shift","withStackSave","stack","stackSave","stackRestore","returnCode","handleException","stackTop","stackSize","_emscripten_stack_set_limits","_emscripten_get_now","wasmTableMirror","pthreadCreateProxied","attr","___pthread_create_js","queue","Atomics","store","__emscripten_proxy_execute_task_queue","compareExchange","warnOnce","shown","sync","numCallArgs","outerArgs","serializedNumCallArgs","stackAlloc","_emscripten_run_in_main_runtime_thread_js","ptr","funcPtr","func","__emscripten_thread_exit","_emscripten_receive_on_main_thread_js_callArgs","emscripten_realloc_buffer","grow","_fd_close","fd","_fd_seek","offset_low","offset_high","whence","newOffset","printCharBuffers","printChar","stream","curr","_fd_write","iov","iovcnt","pnum","num","len","getCFunc","ident","ccall","returnType","argTypes","opts","toC","string","outPtr","maxBytesToWrite","heap","outIdx","u","charCodeAt","stringToUTF8Array","stringToUTF8","array","arr","writeArrayToMemory","convertReturnValue","Boolean","cArgs","converter","onDone","proxiedFunctionTable","asmLibraryArg","__emscripten_init_main_thread_js","tb","__emscripten_thread_init","__emscripten_thread_cleanup","thread","__pthread_create_js","_emscripten_default_pthread_stack_size","_emscripten_get_now_is_monotonic","_emscripten_notify_task_queue","targetThreadId","currThreadId","mainThreadId","setTimeout","_emscripten_set_offscreencanvas_size","width","height","emscripten_check_blocking_allowed","emscripten_date_now","Date","emscripten_get_heap_max","emscripten_get_now","emscripten_memcpy_big","dest","copyWithin","emscripten_num_logical_cores","require$$4","cpus","navigator","emscripten_receive_on_main_thread_js","emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","multiple","cutDown","overGrownHeapSize","emscripten_unwind_to_js_event_loop","exit","fd_close","fd_seek","fd_write","memory","info","wasi_snapshot_preview1","receiveInstance","instance","module","tlsInitFunc","cb","exports","unshift","numWorkersToLoad","w","callback","removeRunDependency","receiveInstantiationResult","instantiateArrayBuffer","receiver","fetch","credentials","catch","getBinaryPromise","instantiate","instantiateStreaming","createWasm","calledRun","listenersAdded","actualModule","run","preRun","doRun","postRun","numericArgs","every","runCaller","listener","WasmBackendModule","tmpDispose","removeListener","ready","wasmFactoryThreadedSimd","wasmFactoryThreadedSimd_import.default","wasmFactoryThreadedSimd_import","wasmFactory","wasmFactory_import.default","_super","tfjs","initWithThreadsCount","threadsCount","actualThreadsCount","getThreadsCount","DataStorage","engine","__","constructor","create","tslib_1.__extends","BackendWasm","dataIdNextNumber","move","numDataIds","kernelMs","refCount","numBytes","bytesPerElement","memoryOffset","_malloc","registerTensor","byteOffset","typedArrayFromBuffer","force","has","delete","dispose","unreliable","write","KernelBackend","getPathToWasmBinary","simdSupported","threadsSupported","wasmModuleFolder","wasmPath","wasmFileMap","all","getAsync","tslib_1.__read","factoryConfig","prefix","endsWith","blob","Blob","URL","createObjectURL","wasmPathPrefix","customFetch","instantiateWasm","imports","arrayBuffer","initialized","onAbort","initAborted","mainScriptUrlOrBlob","toString","wasmBinaryNames","numThreads","usePlatformFetch","deprecationWarn","prefixOrFileMap","missingPaths","join"],"mappings":"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"}